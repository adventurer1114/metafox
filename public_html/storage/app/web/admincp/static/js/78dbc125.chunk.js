"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["dialogs"],{86980:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var i=a(85597),n=a(21822),r=a(29620),o=a(72962),l=a(24498),s=a(77745),c=a(22949),d=a(28583),p=a.n(d),u=a(67294);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function g({title:e,message:t,label:a,value:d,helperText:g,positiveButton:h,negativeButton:f}){let{i18n:v,useDialog:b}=(0,i.OgA)(),{setDialogValue:y,disableBackdropClick:x,dialogProps:E}=b(),w=()=>{y(!1)};u.useEffect(()=>{x(!0)},[]);let{label:C,...S}=p()({label:v.formatMessage({id:"cancel"}),color:"primary"},f),{label:k,...P}=p()({label:v.formatMessage({id:"ok"}),color:"primary"},h);e=null!=e?e:v.formatMessage({id:"prompt"});let[Z,O]=u.useState(null!=d?d:""),M=()=>{y(Z)};return u.createElement(r.Z,m({},E,{fullScreen:!1,"data-testid":"popupConfirm",maxWidth:"xs",role:"alertdialog",fullWidth:!0,"aria-modal":!0,variant:"alert"}),u.createElement(s.Z,{id:"dialogTitle","data-testid":"popupTitle"},null!=e?e:"Prompt"),u.createElement(l.Z,{dividers:!1},u.createElement(c.Z,{onChange:e=>O(e.currentTarget.value),autoFocus:!0,defaultValue:d,fullWidth:!0,required:!0,placeholder:a,InputLabelProps:{shrink:!1},variant:"outlined",helperText:g})),u.createElement(o.Z,null,u.createElement(n.Z,m({},P,{role:"button","data-testid":"buttonCancel",tabIndex:0,variant:"contained",size:"medium",color:"primary",disabled:!Z.trim().length,onClick:M,sx:{minWidth:120}}),k),u.createElement(n.Z,m({},S,{role:"button","data-testid":"buttonSubmit",tabIndex:1,variant:"outlined",size:"medium",color:"primary",sx:{minWidth:120},onClick:w}),C)))}},25391:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var i=a(85597),n=a(41547),r=a(13478),o=a(29620),l=a(72962),s=a(24498),c=a(77745),d=a(21822),p=a(22949),u=a(12902),m=a(67294),g=a(22410),h=a(73327),f=(0,g.Z)(e=>(0,h.Z)({root:{},actionWrapper:{marginBottom:e.spacing(2),paddingRight:e.spacing(2),"& .MuiButton-root":{marginLeft:e.spacing(1.5)}},suggestionsWrapper:{position:"fixed",zIndex:1,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(2),borderRadius:"4px",boxShadow:e.shadows[2]},userWrapper:{margin:e.spacing(1,0),minWidth:"385px"},userOuter:{display:"inline-flex",alignItems:"center",padding:e.spacing(.5),color:e.palette.primary.main,border:e.mixins.border("primary"),marginRight:e.spacing(.5),marginBottom:e.spacing(.5),"&:hover":{background:e.palette.primary.main,color:"#fff","& $removeBtn":{color:"#fff"}}},removeBtn:{color:e.palette.primary.main,fontSize:11,margin:e.spacing(0,.5,0,1),cursor:"pointer"},name:{fontSize:e.mixins.pxToRem(13)}}),{name:"DialogCreateCustomListPrivacy"});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let b=(0,g.Z)(e=>(0,h.Z)({root:{},mentionSuggestionsWrapper:{position:"absolute",backgroundColor:e.mixins.backgroundColor("paper"),borderRadius:4},mentionOptionWrapper:{display:"flex",alignItems:"center",padding:e.spacing(.5,0),cursor:"pointer"},avatar:{width:32,height:32,borderRadius:"50%"},name:{marginLeft:e.spacing(1),color:e.palette.text.primary,fontSize:e.mixins.pxToRem(13)}}));function y({user:e,...t}){let a=b();return m.createElement("div",v({className:a.root},t),m.createElement("div",{className:a.mentionOptionWrapper},m.createElement("img",{src:e.avatar,alt:e.name,className:a.avatar}),m.createElement("span",{className:a.name},e.name)))}function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function E(e){let{customList:t}=e,a=f(),{useDialog:g,i18n:h,apiClient:v}=(0,i.OgA)(),{dialogProps:b,closeDialog:E,setDialogValue:w}=g(),[C,S]=m.useState(""),[k,P]=m.useState([]),[Z,O]=m.useState([]),[M,_]=m.useState({listName:!1,friends:!1}),[R,z]=m.useState(!1),[W,I]=m.useState([]),N=m.useRef(),T=m.useCallback(({value:e})=>{v.request({method:"get",url:"/friend",params:{q:e,limit:6}}).then(e=>{var t,a,i;return(null===(t=e.data)||void 0===t?void 0:null===(a=t.data)||void 0===a?void 0:a.length)?null===(i=e.data)||void 0===i?void 0:i.data:[]}).then(e=>{return e.map(e=>({avatar:(0,r.Q4)(e.avatar,"240"),name:e.full_name,link:`/${e.resource_name}/${e.id}`}))}).then(e=>I(e))},[v]),A=()=>{let e=!1;(L(C)||""===C)&&(_(e=>({...e,listName:!0})),e=!0),0===Z.length&&(_(e=>({...e,friends:!0})),e=!0),e||(E(),w(C))},j=e=>{_(e=>({...e,listName:!1}));let t=e.target.value;S(t),L(t)&&_(e=>({...e,listName:!0}))},$=e=>{_(e=>({...e,friends:!1}));let t=e.target.value;P(t),T({value:t}),z(!0)},L=e=>{return t.includes(e)},B=e=>{if(O(t=>[...t,e]),P([]),z(!1),N){var t;null==N||null===(t=N.current)||void 0===t||t.focus()}_(e=>({...e,friends:!1}))},D=e=>{O((0,u.ZP)(Z,t=>{t.splice(e,1)})),0===Z.length&&_(e=>({...e,friends:!0}))};return m.createElement(o.Z,x({},b),m.createElement(c.Z,null,h.formatMessage({id:"create_friends_list"})),m.createElement(s.Z,null,m.createElement(p.Z,{error:M.listName,placeholder:h.formatMessage({id:"list_name"}),label:h.formatMessage({id:"list_name"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",value:C,onChange:e=>j(e),autoFocus:!0}),Z&&0<Z.length?m.createElement("div",{className:a.userWrapper},Z.map((e,t)=>m.createElement("div",{key:t.toString(),className:a.userOuter},m.createElement("span",{className:a.name},e.name),m.createElement(n.zb,{icon:"ico-close",className:a.removeBtn,onClick:()=>D(t)})))):null,m.createElement(p.Z,{error:M.friends,placeholder:h.formatMessage({id:"add_friend"}),label:h.formatMessage({id:"add_friend"}),variant:"outlined",fullWidth:!0,margin:"normal",size:"small",multiline:!0,value:k,onChange:e=>$(e),inputRef:N}),R&&m.createElement("div",{className:a.suggestionsWrapper},W?W.map((e,t)=>m.createElement(y,{key:t.toString(),user:e,onClick:()=>B(e)})):null)),m.createElement(l.Z,null,m.createElement("div",{className:a.actionWrapper},m.createElement(d.Z,{variant:"outlined",onClick:E,size:"small"},h.formatMessage({id:"back"})),m.createElement(d.Z,{variant:"contained",onClick:A,size:"small",color:"primary"},h.formatMessage({id:"create"})))))}},11437:function(e,t,a){a.r(t),a.d(t,{default:function(){return O}});var i=a(85597),n=a(92114),r=a(17171),o=a(39628),l=a(41609),s=a.n(l),c=a(96026),d=a.n(c),p=a(21822),u=a(49960),m=a(18037),g=a(52922),h=a(91647),f=a(67294),v=a(12902),b=a(22410),y=a(73327),x=(0,b.Z)(e=>(0,y.Z)({root:{},shareWith:{fontSize:e.mixins.pxToRem(15),color:e.palette.text.primary,fontWeight:e.typography.fontWeightBold,marginBottom:e.spacing(1)},linkContainer:{marginTop:e.spacing(1),display:"flex",alignItems:"center"}}),{name:"DialogCustomListPrivacy"}),E=a(71682),w=(0,b.Z)(e=>(0,y.Z)({root:{height:e.spacing(5),display:"flex",alignItems:"center"},checkbox:{marginRight:e.spacing(1)}}),{name:"DialogCustomListPrivacy"});function C(){let e=w();return f.createElement("div",{className:e.root},f.createElement("div",{className:e.checkbox},f.createElement(E.Z,{variant:"rectangular",width:16,height:16})),f.createElement(E.Z,{variant:"text",width:"50%",height:24}))}var S=a(21241),k=a(13478);function P(){return(P=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let Z=e=>{let t=[];return e.forEach(e=>{(null==e?void 0:e.is_selected)&&t.push(null==e?void 0:e.id)}),t};function O({value:e,feed:t}){let a=x(),{useDialog:l,i18n:c,useFetchItems:b,dispatch:y,getAcl:E}=(0,i.OgA)(),{dialogProps:w,setDialogValue:O,closeDialog:M}=l(),_=(0,i.oHF)("core","privacy","getCustomPrivacyOptions"),R=E("friend.friend_list.create"),[z,W]=b({dataSource:{apiUrl:_.apiUrl,apiParams:(0,k.aZ)(_.apiParams,t)},normalize:!1}),[I,N]=f.useState(z),[T,A]=f.useState(Array.isArray(e)?e:[]);f.useEffect(()=>{N(z),s()(z)||A(Z(z))},[z]);let j=()=>{M(),O(T)},$=e=>{A(t=>{return t.find(t=>t==e)?t.filter(t=>t!=e):[...t,e]})},L=f.useCallback(()=>{y({type:"friend/addNewList",meta:{onSuccess:e=>{A(t=>(0,v.ZP)(t,t=>{t.push(e.id)})),N(t=>(0,v.ZP)(t,t=>{t.push(e)}))}}})},[]);return f.createElement(n.Vq,P({},w,{maxWidth:"xs",fullWidth:!0}),f.createElement(n.$N,null,c.formatMessage({id:"custom_privacy"})),f.createElement(n.cZ,null,f.createElement("div",{className:a.shareWith},c.formatMessage({id:"share_with"})),f.createElement(S.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:200},W?d()(1,5).map(e=>f.createElement(C,{key:e.toString()})):f.createElement(g.Z,null,(null==I?void 0:I.length)===0?f.createElement(h.Z,{paragraph:!0,variant:"body1",margin:"0",color:"textSecondary"},c.formatMessage({id:"there_are_no_friend_list"})):null==I?void 0:I.map((e,t)=>f.createElement(m.Z,{checked:-1<T.indexOf(e.id),key:t.toString(),value:e.id,label:e.title,onChange:()=>$(e.id),control:f.createElement(u.Z,{value:e,icon:f.createElement(o.Z,{fontSize:"small"}),checkedIcon:f.createElement(r.Z,{fontSize:"small"}),color:"primary"})})))),f.createElement("div",{className:a.linkContainer},R&&f.createElement(f.Fragment,null,f.createElement(p.Z,{variant:"link",size:"small",color:"primary",onClick:L},c.formatMessage({id:"create_new_custom_list"})),"\xa0",f.createElement("span",null," ",c.formatMessage({id:"or"})," "),"\xa0"),f.createElement(p.Z,{variant:"link",size:"small",href:"/friend",color:"primary"},c.formatMessage({id:"manage_lists"})))),f.createElement(n.kX,null,f.createElement(p.Z,{variant:"outlined",onClick:M,size:"small"},c.formatMessage({id:"cancel"})),f.createElement(p.Z,{variant:"contained",onClick:j,size:"small",color:"primary",disabled:0===T.length},c.formatMessage({id:"save"}))))}},24615:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var i=a(85597),n=a(92114),r=a(13478),o=a(39348),l=a(30120),s=a(22949),c=a(81719),d=a(67294),p=a(21822),u=a(44373),m=a(71682),g=a(91647);function h({item:{title:e,keywords:t,description:a,previewImage:n,name:r},onItemSelected:o,onKeyWorkClicked:s}){let{i18n:c}=(0,i.OgA)();return d.createElement(d.Fragment,null,d.createElement(l.Z,{component:"div",flexDirection:"row",display:"flex"},d.createElement(l.Z,{component:"div",mr:"16px"},d.createElement(m.Z,{component:"div",variant:"rectangular",width:"120px",height:"80px",animation:!1})),d.createElement(l.Z,{sx:{flex:1}},d.createElement(g.Z,{variant:"h4"},null!=e?e:r),d.createElement(g.Z,{variant:"body1"},t),d.createElement(g.Z,{variant:"body1"},a)),d.createElement(l.Z,{sx:{mt:1.5}},d.createElement(p.Z,{onClick:()=>o(r)},c.formatMessage({id:"create_layout_block"})))),d.createElement(u.Z,{style:{margin:"12px 0"}}))}var f=a(44908),v=a.n(f);function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let y=(0,c.ZP)(l.Z,{name:"Editor",slot:"Tag"})(({theme:e})=>({display:"inline-block",color:e.palette.primary.main,cursor:"pointer",fontSize:e.typography.body1.fontSize,background:"#2682d511",margin:"2px",padding:"0 4px",borderRadius:"4px"}));function x(e){let{parentBlockId:t,slotName:a,pageName:c,pageSize:p}=e,{useDialog:u,layoutBackend:m,dispatch:g,i18n:f}=(0,i.OgA)(),{dialogProps:x,closeDialog:E}=u(),[w,C]=d.useState(""),S=m.getAllBlockView(),k=d.useMemo(()=>{let e=[];return Object.values(S).filter(e=>!e.experiment).filter(e=>e.admincp).forEach(({keywords:t})=>{t&&t.split(",").map(e=>e.trim().toLowerCase()).forEach(t=>e.push(t))}),v()(e).filter(Boolean).sort()},[]),P=e=>{(0,r._v)(150).then(()=>{let i=(0,r.kb)(),n={blockId:i,parentBlockId:t,pageName:c,slotName:a,blockName:e,pageSize:p};m.addBlock(n),g({type:"@layout/editBlock",payload:n})}),E()},Z=d.useMemo(()=>Object.values(S).map(e=>({...e})).filter(e=>!e.experiment).filter(e=>e.admincp).filter(Boolean),[]),O=d.useMemo(()=>{if(!w)return Z;let e=RegExp((0,r.hr)(w),"i");return Z.filter(t=>{return e.test(t.keywords)||e.test(t.title)||e.test(t.description)})},[Z,w]);return d.createElement(n.Vq,b({},x,{maxWidth:"md",fullWidth:!0}),d.createElement(n.$N,{id:"alert-dialog-title"},f.formatMessage({id:"create_layout_block"})),d.createElement(n.cZ,{sx:{height:"50vh"}},d.createElement(l.Z,{sx:{display:"flex",flexDirection:"row"}},d.createElement(l.Z,{sx:{width:220,mr:2}},d.createElement(o.Z,{sx:{mb:2},freeSolo:!0,options:k,getOptionLabel:e=>e,onChange:(e,t)=>{C(t)},value:w,renderInput:e=>d.createElement(s.Z,b({},e,{hiddenLabel:!0,autoFocus:!0,fullWidth:!0,size:"small",variant:"outlined",placeholder:f.formatMessage({id:"search"})}))}),k.map(e=>{return d.createElement(y,{key:e,onClick:()=>C(e)},e)})),d.createElement(l.Z,{sx:{flex:1}},O.map((e,t)=>d.createElement(h,{key:t.toString(),item:e,onItemSelected:P,onKeyWorkClicked:C}))))))}},59740:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(85597),n=a(84635),r=a(29620),o=a(67294),l=a(43581);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(){let{useDialog:e,i18n:t}=(0,i.OgA)(),{closeDialog:a,dialogProps:c}=e(),d=t.formatMessage({id:"add_new_template"}),p=(0,l.Hy)(d);p.elements.content.elements.name={component:"Text",name:"name",variant:"outlined",margin:"normal",required:!0,defaultValue:"",label:"Template Name",fullWidth:!0},p.elements.footer.elements={cancel:{component:"Button",label:"Cancel",color:"primary",type:"cancel",onClick:a},submit:{component:"Button",label:"Submit",color:"primary",type:"cancel",onClick:a}};let u=()=>{};return o.createElement(r.Z,s({},c),o.createElement(n.qu,{dialog:!0,initialValues:{},formSchema:p,onSubmit:u}))}},50789:function(e,t,a){a.r(t),a.d(t,{ItemView:function(){return f},default:function(){return b}});var i=a(92114),n=a(85597),r=a(21822),o=a(44373),l=a(30030),s=a(30120),c=a(81719),d=a(22410),p=a(73327),u=a(67294);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g=(0,c.ZP)(s.Z,{name:"ThemeItem",slot:"Root"})(({theme:e,selected:t})=>({borderRadius:8,overflow:"hidden",border:`2px solid ${t?e.palette.primary.main:"rgba(0,0,0,0.1)"}}`})),h=(0,c.ZP)(s.Z,{name:"ThemeItem",slot:"Content"})(({theme:e})=>({borderRadius:8,display:"block",paddingBottom:"60%",backgroundColor:"rgba(0,0,0,0.1)",backgroundSize:"cover"}));function f({title:e,id:t,image:a,selected:i,onChange:n}){return u.createElement(g,{selected:i},u.createElement(h,{title:e,onClick:()=>n(t),style:{backgroundImage:`url(${a})`}}))}let v=(0,d.Z)(e=>(0,p.Z)({content:{display:"flex",flexWrap:"nowrap",flexDirection:"row"},divider:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},dialogActions:{margin:e.spacing(1),"& button":{width:94,height:40}}}),{name:"ChooseThemeDialog"});function b(){let{useDialog:e,getSetting:t,i18n:a,usePreference:s,preferenceBackend:c}=(0,n.OgA)(),{themeId:d=n.t04}=s(),{dialogProps:p,closeDialog:g,setDialogValue:h}=e(),[b,y]=u.useState(d),x=v(),E=t("layout.variants",[]),w=u.useCallback(()=>{c.setTheme(b),h(b)},[c,h,b]),C=u.useCallback(e=>{y(e)},[]);return u.createElement(i.Vq,m({},p,{maxWidth:"sm","data-testid":"dialogThemePicker"}),u.createElement(i.$N,null,a.formatMessage({id:"choose_your_preferred_theme"})),u.createElement(i.cZ,null,u.createElement("div",{className:x.content},u.createElement(l.ZP,{container:!0,columnSpacing:1,rowSpacing:2},E.map(e=>{var t;return u.createElement(l.ZP,{item:!0,key:null===(t=e.id)||void 0===t?void 0:t.toString(),xs:12},u.createElement(f,m({},e,{image:e.image,selected:e.id===b,onChange:C})))})))),u.createElement(o.Z,{className:x.divider}),u.createElement(i.kX,{className:x.dialogActions},u.createElement(r.Z,{onClick:w,variant:"contained",color:"primary",disabled:!b,"data-testid":"buttonSubmit"},a.formatMessage({id:"apply"})),u.createElement(r.Z,{onClick:g,type:"button",variant:"outlined",color:"primary","data-testid":"buttonCancel"},a.formatMessage({id:"cancel"}))))}},43841:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(92114),r=a(21822),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s(){let{i18n:e,theme:t,useDialog:a}=(0,i.OgA)(),{closeDialog:s,dialogProps:c}=a();return o.createElement(n.Vq,l({},c,{maxWidth:"sm",fullWidth:!0}),o.createElement(n.$N,{id:"alert-dialog-title"},e.formatMessage({id:"layout_inspect_theme"})),o.createElement(n.cZ,null,o.createElement("pre",null,JSON.stringify(t,null,"  "))),o.createElement(n.kX,null,o.createElement(r.Z,{onClick:s,color:"primary",autoFocus:!0,children:e.formatMessage({id:"ok"})})))}},46060:function(e,t,a){a.d(t,{sU:function(){return i.Z},zp:function(){return n.Z}}),a(26830),a(36611);var i=a(83273),n=a(43115)},15890:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(29620),r=a(67294),o=a(84635);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({config:e}){let{action_name:t,onSubmit:a}=e||{},{useDialog:s,dispatch:c}=(0,i.OgA)(),{setDialogResolveValue:d,setDialogValue:p,dialogProps:u,forceClose:m}=s(),g=(0,i.oHF)("captcha","captcha","getVerifyForm"),h=(e,t)=>{d(e),c({type:"@waitingCaptchaImage/start",payload:{form:t,forceClose:m}})},f=()=>{p(null)};return r.createElement(n.Z,l({},u,{fullScreen:!1,"data-testid":"dialogCaptchaImage",maxWidth:"xs",fullWidth:!0,"aria-modal":!0}),r.createElement(o.AO,{dataSource:g,onSubmit:a||h,onCancel:f,pageParams:{action_name:t,auto_focus:!0},navigationConfirmWhenDirty:!1,dialog:!0}))}},67430:function(e,t,a){a.r(t),a.d(t,{default:function(){return H},initState:function(){return D}});var i,n=a(85597),r=a(41547),o=a(13478),l=a(21822),s=a(35705),c=a(29620),d=a(77745),p=a(50130),u=a(763),m=a(62097),g=a(61225),h=a(23560),f=a.n(h),v=a(67294);let b=e=>new Promise((t,a)=>{let i=new Image;i.addEventListener("load",()=>t(i)),i.addEventListener("error",e=>a(e)),i.setAttribute("crossOrigin","anonymous"),i.src=e});async function y(e,t,a,i=0,n=!1,r=!1){try{let o=await b(e),l=document.createElement("canvas"),s=l.getContext("2d"),c=Math.max(o.width,o.height),d=2*(c/2*Math.sqrt(2));l.width=d,l.height=d,s.translate(d/2,d/2),s.rotate(i*Math.PI/180),s.scale(n?-1:1,r?-1:1),s.translate(-d/2,-d/2),s.drawImage(o,d/2-.5*o.width,d/2-.5*o.height);let p=s.getImageData(0,0,d,d);if(l.width=t.width,l.height=t.height,s.putImageData(p,Math.round(0-d/2+.5*o.width-t.x),Math.round(0-d/2+.5*o.height-t.y)),"base64"===a)return l.toDataURL("image/jpeg");return new Promise(e=>{l.toBlob(t=>{e(URL.createObjectURL(t))},"image/jpeg")})}catch(u){throw Error(u)}}var x=a(52796),E=a.n(x);function w(e,t,a,i,n=0){let{width:r,height:o}=_(t.width,t.height,n);return{x:C(e.x,r,a.width,i),y:C(e.y,o,a.height,i)}}function C(e,t,a,i){let n=t*i/2-a/2;return Math.min(n,Math.max(e,-n))}function S(e,t){return Math.sqrt(Math.pow(e.y-t.y,2)+Math.pow(e.x-t.x,2))}function k(e,t){return 180*Math.atan2(t.y-e.y,t.x-e.x)/Math.PI}function P(e,t){return Math.min(e,Math.max(0,t))}function Z(e,t){return t}function O(e,t){return{x:(t.x+e.x)/2,y:(t.y+e.y)/2}}function M(e,t,a,i,n){let r=Math.cos,o=Math.sin,l=n*Math.PI/180,s=(e-a)*r(l)-(t-i)*o(l)+a,c=(e-a)*o(l)+(t-i)*r(l)+i;return[s,c]}function _(e,t,a){let i=e/2,n=t/2,r=[M(0,0,i,n,a),M(e,0,i,n,a),M(e,t,i,n,a),M(0,t,i,n,a)],o=Math.min(...r.map(e=>e[0])),l=Math.max(...r.map(e=>e[0])),s=Math.min(...r.map(e=>e[1])),c=Math.max(...r.map(e=>e[1]));return{width:l-o,height:c-s}}function R(...e){return e.filter(e=>{return"string"==typeof e&&0<e.length}).join(" ").trim()}function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}class W extends(i=v.Component){componentDidMount(){window.addEventListener("resize",this.computeSizes),this.containerRef&&(this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.preventZoomSafari),this.containerRef.addEventListener("gesturechange",this.preventZoomSafari)),this.imageRef&&this.imageRef.complete&&this.onMediaLoad()}componentWillUnmount(){window.removeEventListener("resize",this.computeSizes),this.containerRef&&(this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.containerRef.removeEventListener("gesturechange",this.preventZoomSafari)),this.styleRef&&this.styleRef.remove(),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent()}componentDidUpdate(e){var t,a,i,n,r,o,l,s;e.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):e.aspect!==this.props.aspect?this.computeSizes():e.zoom!==this.props.zoom?this.recomputeCropPosition():(null===(t=e.cropSize)||void 0===t?void 0:t.height)!==(null===(a=this.props.cropSize)||void 0===a?void 0:a.height)||(null===(i=e.cropSize)||void 0===i?void 0:i.width)!==(null===(n=this.props.cropSize)||void 0===n?void 0:n.width)?this.computeSizes():((null===(r=e.crop)||void 0===r?void 0:r.x)!==(null===(o=this.props.crop)||void 0===o?void 0:o.x)||(null===(l=e.crop)||void 0===l?void 0:l.y)!==(null===(s=this.props.crop)||void 0===s?void 0:s.y))&&this.emitCropAreaChange(),e.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent())}getAspect(){let{cropSize:e,aspect:t}=this.props;return e?e.width/e.height:t}onPinchStart(e){let t=W.getTouchPoint(e.touches[0]),a=W.getTouchPoint(e.touches[1]);this.lastPinchDistance=S(t,a),this.lastPinchRotation=k(t,a),this.onDragStart(O(t,a))}onPinchMove(e){let t=W.getTouchPoint(e.touches[0]),a=W.getTouchPoint(e.touches[1]),i=O(t,a);this.onDrag(i),this.rafPinchTimeout&&window.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=window.requestAnimationFrame(()=>{let e=S(t,a),n=this.props.zoom*(e/this.lastPinchDistance);this.setNewZoom(n,i),this.lastPinchDistance=e;let r=k(t,a),o=this.props.rotation+(r-this.lastPinchRotation);this.props.onRotationChange&&this.props.onRotationChange(o),this.lastPinchRotation=r})}render(){let{image:e,video:t,mediaProps:a,transform:i,crop:{x:n,y:r},rotation:o,zoom:l,flipHorizontal:s=!1,flipVertical:c=!1,cropShape:d,showGrid:p,style:{containerStyle:u,cropAreaStyle:m,mediaStyle:g},classes:{containerClassName:h,cropAreaClassName:f,mediaClassName:b}}=this.props,y=c?-1:1,x=s?-1:1;return v.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:e=>this.containerRef=e,"data-testid":"container",style:u,className:R("reactEasyCrop_Container",h)},e?v.createElement("img",z({alt:"",className:R("reactEasyCrop_Image",b)},a,{src:e,ref:e=>this.imageRef=e,style:{...g,transform:i||`translate(${n}px, ${r}px) rotate(${o}deg) scale(${l*y}, ${l*x})`},onLoad:this.onMediaLoad})):t&&v.createElement("video",z({autoPlay:!0,loop:!0,muted:!0,className:R("reactEasyCrop_Video",b)},a,{src:t,ref:e=>this.videoRef=e,onLoadedMetadata:this.onMediaLoad,style:{...g,transform:i||`translate(${n}px, ${r}px) rotate(${o}deg) scale(${l*y}, ${l*x})`},controls:!1})),this.state.cropSize&&v.createElement("div",{style:{...m,width:this.state.cropSize.width,height:this.state.cropSize.height},"data-testid":"cropper",className:R("reactEasyCrop_CropArea","round"===d&&"reactEasyCrop_CropAreaRound",p&&"reactEasyCrop_CropAreaGrid",f)}))}constructor(...e){super(...e),this.imageRef=null,this.videoRef=null,this.containerRef=null,this.styleRef=null,this.containerRect=null,this.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},this.dragStartPosition={x:0,y:0},this.dragStartCrop={x:0,y:0},this.lastPinchDistance=0,this.lastPinchRotation=0,this.rafDragTimeout=null,this.rafPinchTimeout=null,this.wheelTimer=null,this.state={cropSize:null,hasWheelJustStarted:!1},this.preventZoomSafari=e=>e.preventDefault(),this.cleanEvents=()=>{document.removeEventListener("mousemove",this.onMouseMove),document.removeEventListener("mouseup",this.onDragStopped),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onDragStopped)},this.clearScrollEvent=()=>{this.containerRef&&this.containerRef.removeEventListener("wheel",this.onWheel),this.wheelTimer&&clearTimeout(this.wheelTimer)},this.onMediaLoad=()=>{this.computeSizes(),this.emitCropData(),this.setInitialCrop(),this.props.onMediaLoaded&&this.props.onMediaLoaded(this.mediaSize)},this.setInitialCrop=()=>{let{initialCroppedAreaPixels:e,cropSize:t}=this.props;if(!e)return;let{crop:a,zoom:i}=function(e,t,a){let i=t.width/t.naturalWidth,n=function(e,t,a){let i=t.width/t.naturalWidth;if(a){let n=a.height>a.width;return n?a.height/i/e.height:a.width/i/e.width}let r=e.width/e.height,o=t.naturalWidth>=t.naturalHeight*r;return o?t.naturalHeight/e.height:t.naturalWidth/e.width}(e,t,a),r=i*n,o={x:((t.naturalWidth-e.width)/2-e.x)*r,y:((t.naturalHeight-e.height)/2-e.y)*r};return{crop:o,zoom:n}}(e,this.mediaSize,t);this.props.onCropChange(a),this.props.onZoomChange&&this.props.onZoomChange(i)},this.computeSizes=()=>{let e=this.imageRef||this.videoRef;if(e&&this.containerRef){var t,a,i,n,r,o;this.containerRect=this.containerRef.getBoundingClientRect(),this.mediaSize={width:e.offsetWidth,height:e.offsetHeight,naturalWidth:(null===(t=this.imageRef)||void 0===t?void 0:t.naturalWidth)||(null===(a=this.videoRef)||void 0===a?void 0:a.videoWidth)||0,naturalHeight:(null===(i=this.imageRef)||void 0===i?void 0:i.naturalHeight)||(null===(n=this.videoRef)||void 0===n?void 0:n.videoHeight)||0};let l=this.props.cropSize?this.props.cropSize:function(e,t,a,i,n,r=0){let{width:o,height:l}=_(e,t,r),s=Math.min(o,a),c=Math.min(l,i);return s>c*n?{width:c*n,height:c}:{width:s,height:s/n}}(e.offsetWidth,e.offsetHeight,this.containerRect.width,this.containerRect.height,this.props.aspect,this.props.rotation);((null===(r=this.state.cropSize)||void 0===r?void 0:r.height)!==l.height||(null===(o=this.state.cropSize)||void 0===o?void 0:o.width)!==l.width)&&this.props.onCropSizeChange&&this.props.onCropSizeChange(l),this.setState({cropSize:l},this.recomputeCropPosition)}},this.onMouseDown=e=>{e.preventDefault(),document.addEventListener("mousemove",this.onMouseMove),document.addEventListener("mouseup",this.onDragStopped),this.onDragStart(W.getMousePoint(e))},this.onMouseMove=e=>this.onDrag(W.getMousePoint(e)),this.onTouchStart=e=>{e.preventDefault(),document.addEventListener("touchmove",this.onTouchMove,{passive:!1}),document.addEventListener("touchend",this.onDragStopped),2===e.touches.length?this.onPinchStart(e):1===e.touches.length&&this.onDragStart(W.getTouchPoint(e.touches[0]))},this.onTouchMove=e=>{e.preventDefault(),2===e.touches.length?this.onPinchMove(e):1===e.touches.length&&this.onDrag(W.getTouchPoint(e.touches[0]))},this.onDragStart=({x:e,y:t})=>{var a,i;this.dragStartPosition={x:e,y:t},this.dragStartCrop={...this.props.crop},null===(i=(a=this.props).onInteractionStart)||void 0===i||i.call(a)},this.onDrag=({x:e,y:t})=>{this.rafDragTimeout&&window.cancelAnimationFrame(this.rafDragTimeout),this.rafDragTimeout=window.requestAnimationFrame(()=>{if(!this.state.cropSize||void 0===e||void 0===t)return;let a=e-this.dragStartPosition.x,i=t-this.dragStartPosition.y,n={x:this.dragStartCrop.x+a,y:this.dragStartCrop.y+i},r=this.props.restrictPosition?w(n,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):n;this.props.onCropChange(r)})},this.onDragStopped=()=>{var e,t;this.cleanEvents(),this.emitCropData(),null===(t=(e=this.props).onInteractionEnd)||void 0===t||t.call(e)},this.onWheel=e=>{e.preventDefault();let t=W.getMousePoint(e),{pixelY:a}=E()(e),i=this.props.zoom-a*this.props.zoomSpeed/200;this.setNewZoom(i,t),this.state.hasWheelJustStarted||this.setState({hasWheelJustStarted:!0},()=>{var e,t;return null===(t=(e=this.props).onInteractionStart)||void 0===t?void 0:t.call(e)}),this.wheelTimer&&clearTimeout(this.wheelTimer),this.wheelTimer=window.setTimeout(()=>{return this.setState({hasWheelJustStarted:!1},()=>{var e,t;return null===(t=(e=this.props).onInteractionEnd)||void 0===t?void 0:t.call(e)})},250)},this.getPointOnContainer=({x:e,y:t})=>{if(!this.containerRect)throw Error("The Cropper is not mounted");return{x:this.containerRect.width/2-(e-this.containerRect.left),y:this.containerRect.height/2-(t-this.containerRect.top)}},this.getPointOnMedia=({x:e,y:t})=>{let{crop:a,zoom:i}=this.props;return{x:(e+a.x)/i,y:(t+a.y)/i}},this.setNewZoom=(e,t)=>{if(!this.state.cropSize||!this.props.onZoomChange)return;let a=this.getPointOnContainer(t),i=this.getPointOnMedia(a),n=Math.min(this.props.maxZoom,Math.max(e,this.props.minZoom)),r={x:i.x*n-a.x,y:i.y*n-a.y},o=this.props.restrictPosition?w(r,this.mediaSize,this.state.cropSize,n,this.props.rotation):r;this.props.onCropChange(o),this.props.onZoomChange(n)},this.getCropData=()=>{if(!this.state.cropSize)return null;let e=this.props.restrictPosition?w(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;return function(e,t,a,i,n,r=0,o=!0){let l=o&&0===r?P:Z,s={x:l(100,((t.width-a.width/n)/2-e.x/n)/t.width*100),y:l(100,((t.height-a.height/n)/2-e.y/n)/t.height*100),width:l(100,a.width/t.width*100/n),height:l(100,a.height/t.height*100/n)},c=Math.round(l(t.naturalWidth,s.width*t.naturalWidth/100)),d=Math.round(l(t.naturalHeight,s.height*t.naturalHeight/100)),p=t.naturalWidth>=t.naturalHeight*i,u=p?{width:Math.round(d*i),height:d}:{width:c,height:Math.round(c/i)},m={...u,x:Math.round(l(t.naturalWidth-u.width,s.x*t.naturalWidth/100)),y:Math.round(l(t.naturalHeight-u.height,s.y*t.naturalHeight/100))};return{croppedAreaPercentages:s,croppedAreaPixels:m}}(e,this.mediaSize,this.state.cropSize,this.getAspect(),this.props.zoom,this.props.rotation,this.props.restrictPosition)},this.emitCropData=()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropComplete&&this.props.onCropComplete(t,a),this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)},this.emitCropAreaChange=()=>{let e=this.getCropData();if(!e)return;let{croppedAreaPercentages:t,croppedAreaPixels:a}=e;this.props.onCropAreaChange&&this.props.onCropAreaChange(t,a)},this.recomputeCropPosition=()=>{if(!this.state.cropSize)return;let e=this.props.restrictPosition?w(this.props.crop,this.mediaSize,this.state.cropSize,this.props.zoom,this.props.rotation):this.props.crop;this.props.onCropChange(e),this.emitCropData()}}}W.defaultProps={zoom:1,rotation:0,aspect:4/3,flipVertical:!1,flipHorizontal:!1,maxZoom:3,minZoom:1,cropShape:"rect",showGrid:!0,style:{},classes:{},mediaProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0},W.getMousePoint=e=>({x:Number(e.clientX),y:Number(e.clientY)}),W.getTouchPoint=e=>({x:Number(e.clientX),y:Number(e.clientY)});var I=a(12902),N=a(18446),T=a.n(N);let A=(0,I.ZP)((e,t)=>{switch(t.type){case"setCrop":e.crop=t.payload;break;case"setFlipVertical":e.flipVertical=!e.flipVertical;break;case"setFlipHorizontal":e.flipHorizontal=!e.flipHorizontal;break;case"pendingSave":e.isLoading=!0;break;case"fullfilSave":e.isLoading=!1,e.isDirty=!1,e.isSuccess=!0;return;case"rejectSave":e.isLoading=!1;break;case"updateFile":e.imageSrc=t.payload,e.rotation=D.rotation,e.crop=D.crop,e.zoom=D.zoom;break;case"setImgSource":e.imageSrc=t.payload;break;case"setZoom":{let{mode:a,zoom:i}=t.payload;if(i){e.zoom=i;break}let n=0;"minus"===a&&(n=1<e.zoom-.2?e.zoom-.2:1),"plus"===a&&(n=3>e.zoom+.2?e.zoom+.2:3),e.zoom=n;break}case"setCroppedAreaPixels":e.croppedAreaPixels=t.payload;break;case"setRotation":e.rotation=t.payload}let r={crop:e.crop,flipVertical:e.flipVertical,flipHorizontal:e.flipHorizontal,rotation:e.rotation,zoom:e.zoom,imageSrc:e.imageSrc},o={crop:D.crop,flipVertical:D.flipVertical,flipHorizontal:D.flipHorizontal,rotation:D.rotation,zoom:D.zoom,imageSrc:D.imageSrc};e.isDirty=!T()(o,r)});var j=a(22410),$=a(73327),L=(0,j.Z)(e=>(0,$.Z)({avatarWrapper:{marginTop:-96,marginRight:e.spacing(3),position:"relative"},userAvatar:{width:168,height:168,border:"4px solid",borderColor:e.palette.background.paper},btnClose:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:"1px",color:`${e.palette.text.secondary} !important`,marginRight:`${e.spacing(-1)} !important`,marginLeft:"auto !important",width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:e.palette.background.default,color:"#fff"}},btnControl:{background:"none",boxShadow:"none",padding:0,fontSize:e.mixins.pxToRem(18),minWidth:e.spacing(4),color:`${e.palette.text.primary} !important`,width:e.spacing(4),height:e.spacing(4),borderRadius:e.spacing(4),"&:hover":{background:"rgba(5, 5, 5, 0.04)",color:e.palette.text.primary,boxShadow:"none"}},btnEditAvatar:{backgroundColor:e.palette.background.paper,textTransform:"capitalize",position:"absolute",top:e.spacing(1),right:e.spacing(1),minWidth:32,height:32,borderRadius:"100%","&:hover":{backgroundColor:e.palette.background.default}},sliderZoom:{margin:e.spacing(0,2)},iconEdit:{},cropDialog:{"& .MuiDialog-paper":{overflowY:"visible"}},titleDialog:{fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary,fontSize:e.mixins.pxToRem(18),padding:e.spacing(2),display:"flex",justifyContent:"space-between",alignItems:"center"},cropContainer:{[e.breakpoints.down("sm")]:{width:"100%"}},cropContent:{position:"relative",height:400,"& .reactEasyCrop_CropArea":{border:"none",color:"rgba(255,255,255,.3)"}},controls:{padding:e.spacing(1),display:"flex"},btnActions:{padding:e.spacing(1),display:"flex",justifyContent:"flex-end","& .Mui-disabled":{..."dark"===e.palette.mode&&{color:`${e.palette.text.hint} !important`}}},btnAction:{margin:`${e.spacing(1)} !important`},btnContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:500,margin:"auto",justifyContent:"center",marginBottom:e.spacing(2),"& button":{padding:e.spacing(1,2),margin:e.spacing(0,1),whiteSpace:"nowrap",fontWeight:"normal",color:e.palette.text.primary}},sliderContainer:{padding:e.spacing(0,1),display:"flex",flexGrow:1,alignItems:"center",maxWidth:400,margin:"auto"},sliderLabel:{"& + span":{marginLeft:e.spacing(2)}},btnChangePhoto:{position:"relative",overflow:"hidden"},inputFile:{position:"absolute",opacity:0,left:0,top:0,right:0,bottom:0,cursor:"pointer"},cropBackdrop:{top:0,left:0,right:0,bottom:0,display:"flex",overflow:"hidden",position:"absolute",textAlign:"center",alignItems:"center",justifyContent:"center",backgroundColor:e.mixins.backgroundColor("paper")},cropBlurContent:{filter:"blur(10px)",transform:"scale(12)"},blurImage:{width:"100%",height:"100%",objectFit:"cover",border:0}}),{name:"MuiUserAvatarPhoto"});function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let D={crop:{x:0,y:0},zoom:1,flipHorizontal:!1,flipVertical:!1,rotation:0,isDirty:!1,isLoading:!1,croppedAreaPixels:null,isSuccess:!1},V=e=>{return new Promise(t=>{let a=new FileReader;a.addEventListener("load",()=>t(a.result),!1),a.readAsDataURL(e)})},F=({onUpdate:e,item:t,avatar:a})=>{let i=L(),h=(0,m.Z)(),b=v.useRef(null),[x,E]=v.useState(null),{i18n:w,dispatch:C,dialogBackend:S,useDialog:k,useLimitFileSize:P}=(0,n.OgA)(),{dialogProps:Z,setUserConfirm:O,closeDialog:M}=k(),{photo:_}=P(),R=(0,g.Z)(h.breakpoints.down("sm")),z=(0,o.Q4)(null==t?void 0:t.avatar);a&&(z=(0,o.Q4)(a)),D.imageSrc=z;let[I,N]=(0,v.useReducer)(A,{...D}),[T,j]=v.useState(!z),{crop:$,zoom:F,rotation:H,flipHorizontal:q,flipVertical:U,imageSrc:Y,croppedAreaPixels:X,isLoading:G,isDirty:Q,isSuccess:J}=I;(0,v.useEffect)(()=>{O(()=>{if(Q)return{message:"Are you sure you want to discard the changes?"}})},[O,Q]),(0,v.useEffect)(()=>{J&&M()},[J,M]);let K=(e,t)=>{N({type:"setCroppedAreaPixels",payload:t})},ee=()=>{let e=360<=I.rotation+90?0:I.rotation+90;N({type:"setRotation",payload:e})},et=async()=>{N({type:"pendingSave"});try{let i=await y(Y,X,"base64",H,U,q);i&&C({type:"updateProfileUserAvatar",payload:{avatar:x,avatar_crop:i,userId:null==t?void 0:t.id,identity:null==t?void 0:t._identity},meta:{onSuccess:()=>{N({type:"fullfilSave"})},onFailure:()=>{S.alert({title:"Error",message:"Ops! Something wrong"}),N({type:"rejectSave"})}}}),f()(e)&&e(a)}catch(n){S.alert({title:"Error",message:"Ops! Picture format is not correct."}),N({type:"rejectSave"})}},ea=async e=>{if(e.target.files&&0<e.target.files.length){let t=e.target.files[0],a=t.size;if(a>_&&0!==_){S.alert({message:w.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,o.TX)(t.name,30),fileSize:(0,o.jA)(t.size),maxSize:(0,o.jA)(_)})});return}E(t);let i=await V(t);N({type:"updateFile",payload:i})}},ei=()=>{b.current.click()},en=()=>{window.addEventListener("focus",er)},er=()=>{setTimeout(()=>{j(!1)},500),window.removeEventListener("focus",er)};return((0,v.useEffect)(()=>{T&&ei()},[T]),Y)?v.createElement(c.Z,B({},Z,{className:i.cropDialog,"aria-labelledby":"dialog-title",maxWidth:"sm",fullWidth:!0,scroll:"body",fullScreen:R}),v.createElement(d.Z,{id:"dialog-title"},w.formatMessage({id:"update_your_profile_picture"}),v.createElement(p.Z,{size:"small",className:i.btnClose,disabled:G,onClick:M},v.createElement(r.zb,{icon:"ico-close"}))),v.createElement("div",{className:i.cropContainer},v.createElement("div",{className:i.cropContainer},v.createElement("div",{className:i.cropContent},v.createElement("div",{className:i.cropBackdrop},v.createElement("div",{className:i.cropBlurContent},v.createElement("img",{crossOrigin:"anonymous",src:Y,alt:"",className:i.blurImage}))),v.createElement(W,{image:Y,crop:$,zoom:F,aspect:1,flipHorizontal:q,flipVertical:U,onCropChange:e=>N({type:"setCrop",payload:e}),onCropComplete:K,onZoomChange:e=>N({type:"setZoom",payload:{zoom:e}}),rotation:H,showGrid:!1,cropShape:"round"})),!(0,o.Mf)(Y)&&v.createElement(v.Fragment,null,v.createElement("div",{className:i.controls},v.createElement("div",{className:i.sliderContainer},v.createElement(l.Z,{variant:"text",className:i.btnControl,onClick:()=>N({type:"setZoom",payload:{mode:"minus"}})},v.createElement(r.zb,{icon:"ico-minus"})),v.createElement(u.ZP,{className:i.sliderZoom,value:F,min:1,max:3,step:.1,"aria-labelledby":"Zoom",onChange:(e,t)=>N({type:"setZoom",payload:{zoom:t}})}),v.createElement(l.Z,{variant:"text",className:i.btnControl,onClick:()=>N({type:"setZoom",payload:{mode:"plus"}})},v.createElement(r.zb,{icon:"ico-plus"})))),v.createElement("div",{className:i.btnContainer},v.createElement(l.Z,{startIcon:v.createElement(r.zb,{icon:"ico-rotate-right-alt"}),onClick:ee},w.formatMessage({id:"rotate"})),v.createElement(l.Z,{startIcon:v.createElement(r.zb,{icon:"ico-flip-v"}),onClick:()=>N({type:"setFlipVertical"})},w.formatMessage({id:"flip_vertical"})),v.createElement(l.Z,{startIcon:v.createElement(r.zb,{icon:"ico-flip-h"}),onClick:()=>N({type:"setFlipHorizontal"})},w.formatMessage({id:"flip_horizontal"})))),v.createElement("div",{className:i.btnActions},v.createElement("div",{className:i.btnChangePhoto},v.createElement("input",{type:"file",onChange:ea,accept:"image/*",className:i.inputFile,ref:b}),v.createElement(l.Z,{variant:"outlined",disabled:G,className:i.btnAction,size:"small",onClick:ei},w.formatMessage({id:"change_photo"}))),v.createElement(l.Z,{variant:"contained",className:i.btnAction,disabled:!Q,onClick:et,size:"small"},G?v.createElement(s.Z,{color:"inherit",size:"1rem"}):w.formatMessage({id:"save"})))))):T?v.createElement("input",{type:"file",onChange:ea,accept:"image/*",style:{display:"none"},ref:b,onClick:en}):null};var H=F},19373:function(e,t,a){a.r(t),a.d(t,{default:function(){return E}});var i=a(85597),n=a(92114),r=a(21241),o=a(1771),l=a(30120),s=a(61225),c=a(62097),d=a(67294),p=a(86706),u=a(30030),m=a(13478),g=a(86010);function h({item:e,classes:t,onClick:a}){return d.createElement("div",{"data-testid":"itemBackgroundStatus",className:t.itemRoot,onClick:a},d.createElement("div",{className:(0,g.default)(t.itemBg,"withBackgroundStatus"),style:{backgroundImage:`url("${(0,m.Q4)(e.image,"300")}")`}}))}function f(e){var t;let{data:a,classes:i,onSelectItem:n}=e;return(null===(t=a.backgrounds)||void 0===t?void 0:t.length)?d.createElement(u.ZP,{container:!0,spacing:1},a.backgrounds.map((e,t)=>d.createElement(u.ZP,{item:!0,key:e.id.toString(),md:4,sm:6,xs:12},d.createElement(h,{item:e,onClick:()=>n(e),classes:i})))):null}var v=a(22410),b=a(73327),y=(0,v.Z)(e=>(0,b.Z)({collectionRoot:{},collectionTitle:{fontWeight:e.typography.fontWeightBold,fontSize:"1.5rem",padding:e.spacing(2,0)},collectionContent:{},itemRoot:{cursor:"pointer",paddingBottom:"60%",position:"relative"},itemBg:{position:"absolute",left:0,top:0,bottom:0,right:0,display:"block",backgroundSize:"cover"},itemLabel:{}}),{name:"BgStatusList"});function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function E(e){let{useDialog:t,i18n:a}=(0,i.OgA)(),{dialogProps:u,setDialogValue:m,closeDialog:g}=t(),{onSelectItem:h}=e,v=y(),b=(0,c.Z)(),E=(0,s.Z)(b.breakpoints.down("sm")),{collections:w}=(0,p.v9)(o.D),C=e=>{h&&h(e),m(e),g()};return d.createElement(n.Vq,x({maxWidth:"sm",fullWidth:!0},u),d.createElement(n.$N,{enableBack:!0,disableClose:!0},a.formatMessage({id:"select_background_status"})),d.createElement(n.cZ,{variant:"fitScroll"},d.createElement(r.l$,x({},E?{autoHeightMax:"none"}:{}),d.createElement(l.Z,{sx:{px:2}},w.map(e=>d.createElement(f,{key:e.id.toString(),classes:v,data:e,onSelectItem:C}))))))}},1771:function(e,t,a){a.d(t,{D:function(){return n}});var i=a(22222);let n=(0,i.P1)(e=>e.bgstatus,e=>e)},47152:function(e,t,a){a.r(t);var i=a(85597),n=a(92114),r=a(81719),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s="BlogViewDialog",c=(0,r.ZP)(n.cZ,{name:s,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),d=(0,r.ZP)("div",{name:s,slot:"root"})(({theme:e})=>({width:"1020px",maxWidth:"100%"}));t.default=(0,i.SuR)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:r,useIsMobile:s,i18n:p}=(0,i.OgA)(),{dialogProps:u}=a(),m=r.get("blog.block.blogView"),g=s();return e?o.createElement(n.Vq,l({},u,{maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"}),o.createElement(n.$N,{enableBack:g,disableClose:g},p.formatMessage({id:"blog"})),o.createElement(c,null,o.createElement(d,null,o.createElement(m,{item:e,identity:t,isModalView:!0})))):null})},98251:function(e,t,a){var i=a(85597),n=a(41547),r=a(67294);t.Z=(0,r.memo)(function({identity:e,size:t=30,user:a}){let{useGetItem:o}=(0,i.OgA)(),l=o(e);return a||l?r.createElement(n.Yt,{user:a||l,size:t,noLink:!0}):null})},21690:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var i=a(2475),n=a(92114),r=a(85597),o=a(41547),l=a(81719),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d="dialogItemView",p=(0,l.ZP)("div",{name:d,slot:"ico-close",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"]},...t&&{top:e.spacing(2.5),right:e.spacing(2.5)}})),u=(0,l.ZP)("div",{name:d,slot:"ico-download",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:e.spacing(4),right:e.spacing(10),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,"&:hover":{background:e.palette.grey["800"]},...t&&{top:e.spacing(2.5),right:e.spacing(8.125)}})),m=(0,l.ZP)(n.cZ,{name:d,slot:"content",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("xs")]:{flexFlow:"column"},...t&&{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:e.palette.grey.A400}})),g=(0,l.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),h=(0,l.ZP)("img")(({theme:e})=>({maxWidth:"100%",maxHeight:" calc(100vh - 88px)",margin:"auto"})),f=(0,l.ZP)("div",{name:d,slot:"button-prev",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),left:e.spacing(4),...t&&{left:e.spacing(.5),zIndex:999,opacity:.8}})),v=(0,l.ZP)("div",{name:d,slot:"button-next",shouldForwardProp:e=>"isMobile"!==e})(({theme:e,isMobile:t})=>({position:"fixed",top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",width:e.spacing(5),right:e.spacing(4),...t&&{right:e.spacing(.5),zIndex:999,opacity:.8}})),b=(0,l.ZP)("div",{name:d,slot:"button-image"})(({theme:e})=>({cursor:"pointer",width:e.spacing(5),height:e.spacing(5),borderRadius:"100%",display:"flex",alignItems:"center",justifyContent:"center",background:e.palette.grey["800"],"& .ico":{fontSize:e.mixins.pxToRem(16),color:e.palette.grey["50"]}}));function y({image:e,images:t}){let{useDialog:a,useIsMobile:l}=(0,r.OgA)(),d=l(),{dialogProps:y,closeDialog:x}=a(),E=t&&t.length-1,w=t&&t.length>1,C=parseInt(null==e?void 0:e.id)||0,[S,k]=s.useState(C),P=e=>{e+1>E?k(0):k(parseInt(e)+1)},Z=e=>{e-1<0?k(E):k(parseInt(e)-1)},O=e=>{let t="rtl"===document.dir,a="";switch(e.keyCode){case 27:x();break;case 39:a=t?"prev":"next";break;case 37:a=t?"next":"prev"}if("next"===a&&S!==E){P(S);return}if("prev"===a&&0!==S){Z(S);return}},M=(e,t)=>{e&&(0,i.Sv)(e,t)};return(s.useEffect(()=>{return document.addEventListener("keydown",O),()=>{document.removeEventListener("keydown",O)}},[S]),w)?s.createElement(n.Vq,c({},y,{"data-testid":"popupDetailPhoto",maxWidth:d?"xl":"lg",fullScreen:!!d,fullWidth:!1,scroll:"body"}),s.createElement(p,{onClick:x,isMobile:d},s.createElement(o.zb,{icon:"ico-close"})),0!==S&&s.createElement(f,{isMobile:d},s.createElement(b,{onClick:()=>Z(S)},s.createElement(o.zb,{icon:"ico-angle-left"}))),s.createElement(m,{dividers:!1,isMobile:d},t.map((e,t)=>{return s.createElement("div",{key:t},e.id===S?s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.download_url)?s.createElement(u,{onClick:()=>M(e.download_url,e.file_name),isMobile:d},s.createElement(o.zb,{icon:"ico-download"})):null):null)})),S!==E&&s.createElement(v,{isMobile:d},s.createElement(b,{onClick:()=>P(S)},s.createElement(o.zb,{icon:"ico-angle-right"})))):e?s.createElement(n.Vq,c({},y,{"data-testid":"popupDetailPhoto",maxWidth:d?"xl":"lg",fullScreen:!!d,fullWidth:!1,scroll:"body"}),s.createElement(p,{onClick:x,isMobile:d},s.createElement(o.zb,{icon:"ico-close"})),s.createElement(m,{dividers:!1,isMobile:d},s.createElement(g,null,(null==e?void 0:e.video_type)?s.createElement("video",{src:e.src,type:e.video_type,controls:!0,autoPlay:!0}):s.createElement(h,{src:e.src,alt:""}),(null==e?void 0:e.download_url)&&(null==e?void 0:e.is_image)?s.createElement(u,{onClick:()=>M(e.download_url,e.file_name),isMobile:d},s.createElement(o.zb,{icon:"ico-download"})):null))):null}},39218:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var i=a(92114),n=a(85597),r=a(21241),o=a(40471),l=a(70214),s=a(99164),c=a(22410),d=a(73327),p=a(41609),u=a.n(p),m=a(47037),g=a.n(m),h=a(67294),f=a(98251),v=a(21822),b=(0,c.Z)(e=>(0,d.Z)({root:{position:"relative",textDecoration:"none",display:"block",borderBottom:e.mixins.border("secondary"),"& .MuiAvatar-root":{fontSize:e.mixins.pxToRem(16)}},itemOuter:{height:"100%"},itemInner:{height:"100%",position:"relative",padding:e.spacing(1),alignItems:"center",display:"flex",flexDirection:"row",overflow:"hidden"},itemMainContent:{display:"flex",alignItems:"center"},itemSmallInner:{display:"flex",padding:e.spacing(2),justifyContent:"space-between",alignItems:"center",borderRadius:e.shape.borderRadius},actionContent:{fontWeight:`${e.typography.fontWeightMedium} !important`},itemSmallRequestInner:{display:"flex",padding:e.spacing(2),borderRadius:e.shape.borderRadius},itemMedia:{overflow:"hidden",position:"relative"},itemSmallMedia:{transition:"all 300ms ease",borderRadius:"100%",position:"relative"},itemReactSmall:{position:"absolute",width:"15px",height:"15px",right:0,bottom:0},imgSmallReactionIcon:{width:"100%"},imgWrapper:{margin:"auto"},imgSmallWrapper:{borderRadius:"100%"},userInfo:{flex:1,overflow:"hidden",paddingLeft:e.spacing(2),paddingRight:e.spacing(2),flexBasis:"auto"},userSmallInfo:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden",paddingRight:e.spacing(1)},userSmallInfoRequest:{marginLeft:e.spacing(1.5),flex:1,overflow:"hidden"},userTitle:{color:e.palette.text.primary,fontSize:"1.125rem",marginBottom:e.spacing(1),transition:"all 300ms ease",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},userSmallTitle:{color:e.palette.text.primary,fontSize:e.mixins.pxToRem(15),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",fontWeight:e.typography.fontWeightBold},friendInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary},friendSmallInfo:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginTop:e.spacing(.5),display:"inline-block"},userLocation:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},userJoined:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",marginBottom:e.spacing(1)},friendActions:{position:"relative",display:"flex"},friendActionsDropdown:{boxShadow:"none",padding:0,marginLeft:e.spacing(1)},iconButton:{border:"1px solid",width:"40px",height:"40px",borderRadius:e.spacing(.5),display:"flex",alignItems:"center",color:e.palette.primary.main,justifyContent:"center"},button:{boxShadow:"none",borderRadius:e.spacing(.5),fontSize:"1rem",textTransform:"capitalize"},friendRequestActions:{display:"flex",marginTop:e.spacing(1.5)},requestOption:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(15),fontWeight:"bold",flexGrow:1,"& + $requestOption":{marginLeft:e.spacing(1)}},mutualFriend:{marginRight:e.spacing(.5)},btnAddFriend:{textTransform:"capitalize",fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,padding:e.spacing(.25,1.5),minWidth:"inherit"}}),{name:"ReactedUserItemView"});let y=({data:e,unsetReaction:t})=>{let a=b(),{useDialog:i,i18n:r,useSession:o}=(0,n.OgA)(),{closeDialog:l}=i(),{user:s}=o(),c=s.user_name;return e?e.usernames.map((e,i)=>{var n;return h.createElement("div",{className:a.root,key:i},h.createElement("div",{className:a.itemOuter},h.createElement("div",{className:a.itemSmallInner},h.createElement("div",{className:a.itemMainContent},h.createElement("div",{className:a.itemSmallMedia},h.createElement("div",{className:a.imgSmallWrapper},h.createElement(f.Z,{user:e.user,size:40})),h.createElement("div",{className:a.itemReactSmall},h.createElement("img",{className:a.imgSmallReactionIcon,src:e.icon,alt:"reaction"}))),h.createElement("div",{className:a.userSmallInfo},h.createElement("div",{className:a.userSmallTitle,onClick:l},(null===(n=e.user)||void 0===n?void 0:n.full_name)||e.username))),c===e.username&&h.createElement(v.Z,{className:a.actionContent,variant:"outlined",color:"primary",onClick:()=>t(e.id)},r.formatMessage({id:"remove"})))))}):null};function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let E=(0,c.Z)(e=>(0,d.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,2,1,2)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5,1.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"}),w={minHeight:32},C={minWidth:16},S={width:15,height:15},k=e=>{let{i18n:t}=(0,n.OgA)(),a=(0,o.z)();if(!e&&!(null==e?void 0:e.length))return{};try{let i=e=>{let t=g()(e)&&e.split(":")[1].split("_")[1];return t&&a?a.find(e=>e.id===parseInt(t)):{}},r=[],l=Object.keys(e).reduce((t,a)=>{var n;let o=i(a),l=e[a].map(e=>{return{username:e.user_name,user:e,icon:o.src,id:a}});return r=r.concat(...l),t+(null===(n=e[a])||void 0===n?void 0:n.length)},0),s={all:{id:"all",title:t.formatMessage({id:"all"}),total_reacted:l,usernames:r}};return Object.keys(e).map(t=>{let a=i(t),n=e[t].map(e=>{return{username:e.user_name,user:e,icon:a.src,id:t}});return s[t]={id:t,icon:a.src,total_reacted:e[t].length,usernames:n}}),s}catch(c){return{}}};function P({identity:e}){let t=E(),[a,o]=(0,h.useState)("all"),c=(0,h.useRef)(),{useDialog:d,i18n:p,dispatch:m,useGetItem:g}=(0,n.OgA)(),{dialogProps:f,closeDialog:v}=d(),b=g(e),P=h.useCallback(t=>{m({type:"chat/unsetReaction",payload:{identity:e,shortcut:t},meta:{onSuccess:M}})},[e]),Z=k(null==b?void 0:b.reactions);h.useEffect(()=>{(!b||u()(null==b?void 0:b.reactions)||u()(Z))&&v()},[b,null==b?void 0:b.reactions,Z,v]);let O=(e,t)=>{o(t)},M=()=>{a&&o("all")};return h.createElement(i.Vq,x({},f,{maxWidth:"xs",fullWidth:!0}),h.createElement(i.$N,null,p.formatMessage({id:"reacted_by"})),h.createElement(s.Z,{value:a,onChange:O,style:w,className:t.customTabs},Object.values(Z).map(e=>h.createElement(l.Z,{key:e.id,style:C,disableRipple:!0,icon:e.icon?h.createElement("img",{src:e.icon,alt:e.id,style:S}):h.createElement("span",{className:t.reactNumber},e.title),iconPosition:"start",label:e.total_reacted?h.createElement("span",{className:t.reactNumber},e.total_reacted):void 0,value:e.id,"aria-label":e.id}))),h.createElement("div",{className:t.dialogContent,ref:c},h.createElement(r.ID,{scrollRef:c},h.createElement(y,{data:Z[a],unsetReaction:P}))))}},86192:function(e,t,a){a.r(t),a.d(t,{default:function(){return x}});var i=a(92114),n=a(85597),r=a(41547),o=a(21822),l=a(44373),s=a(81719),c=a(91647),d=a(67294),p=a(86706),u=a(25237);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g="CommentDialog",h=(0,s.ZP)(o.Z,{name:g,slot:"btnBack"})(({theme:e})=>({color:`${e.palette.text.hint} !important`,[e.breakpoints.down("sm")]:{paddingRight:`${e.spacing(2.5)} !important`}})),f=(0,s.ZP)(i.cZ,{name:g,slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),v=(0,s.ZP)(i.cZ,{name:g,slot:"actionButtonStaticsWrapper"})(({theme:e})=>{var t;return{display:"flex",alignItems:"center",borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:0,[e.breakpoints.down("sm")]:{flexDirection:"column-reverse"}}}),b=(0,s.ZP)(i.cZ,{name:g,slot:"reactionWrapper"})(({theme:e})=>({padding:0,"& .MuiFeedCommentBlock-itemOuter":{border:"none"},[e.breakpoints.down("sm")]:{width:"100%"}})),y=(0,s.ZP)(i.cZ,{name:g,slot:"FeedStatisticWrapper"})(({theme:e})=>{var t;return{flex:1,display:"flex",justifyContent:"flex-end",padding:"8px 0",[e.breakpoints.down("sm")]:{width:"100%",fontWeight:e.typography.fontWeightBold,borderBottom:"solid 1px",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary}}});function x({identity:e,handleAction:t,isFocus:a,viewMoreComments:o}){var s,g,x;let E=(0,d.useRef)(null),w=(0,d.useRef)(null),C=(0,d.useRef)(null),S=(0,d.useRef)(null),[k,P]=(0,d.useState)(0),{dialogProps:Z,closeDialog:O}=(0,i.Rh)(),{i18n:M,CommentList:_,CommentActButton:R,ShareActButton:z,ReactionActButton:W,CommentReaction:I,useSession:N,useTheme:T,jsxBackend:A}=(0,n.OgA)(),j=T(),$=N(),[L,B]=(0,u.X)(),D=A.get("CommentComposer"),V=(0,p.v9)(t=>(0,n.AV9)(t,e));(0,d.useEffect)(()=>{return setImmediate(()=>{F()}),window.addEventListener("resize",F),()=>{window.removeEventListener("resize",F)}},[]);let F=()=>{var e,t,a,i;let n=null===(e=w.current)||void 0===e?void 0:e.offsetHeight,r=null===(t=E.current)||void 0===t?void 0:t.offsetHeight,o=null===(a=C.current)||void 0===a?void 0:a.offsetHeight,l=null===(i=S.current)||void 0===i?void 0:i.offsetHeight,s=getComputedStyle(S.current),c=Number(s.getPropertyValue("padding-top").replace(/\D/g,"")),d=Number(s.getPropertyValue("padding-bottom").replace(/\D/g,""));P(window.innerHeight-o-(l-(l-c-d-(n+r))))},{statistic:H,most_reactions:q,like_phrase:U}=V;return d.createElement(i.Vq,m({},Z,{scroll:"body"}),d.createElement(i.$N,{ref:C,disableClose:!0},d.createElement("div",null,d.createElement(h,{onClick:O,sx:{minWidth:0,paddingRight:j.spacing(2.5)},color:"secondary",size:"medium"},d.createElement(r.zb,{icon:"ico-angle-left"})),d.createElement(c.Z,{component:"span",fontWeight:"bold"},M.formatMessage({id:"comments"})))),d.createElement(f,{ref:S},d.createElement(d.Fragment,null,d.createElement(v,{ref:E},d.createElement(b,null,d.createElement(I,null,$.loggedIn&&(null===(s=V.extra)||void 0===s?void 0:s.can_like)&&W?d.createElement(W,{reacted:V.user_reacted,identity:e,handleAction:t}):null,$.loggedIn&&(null===(g=V.extra)||void 0===g?void 0:g.can_comment)&&R?d.createElement(R,{identity:e,handleAction:t}):null,$.loggedIn&&V.extra.can_share&&z?d.createElement(z,{handleAction:t,identity:e}):null)),d.createElement(y,null,d.createElement(r.Dq,{handleAction:t,identity:e,reactions:q,message:U,statistic:H}))),d.createElement("div",{style:{height:k,overflowY:"scroll"}},d.createElement(_,{identity:e,handleAction:t,data:V.related_comments,total_hidden:null==V?void 0:null===(x=V.related_comments_statistic)||void 0===x?void 0:x.total_hidden,viewMoreComments:o,total_comment:null==H?void 0:H.total_comment,total_reply:null==H?void 0:H.total_reply,setSortType:B,sortType:L})),$.loggedIn&&V.extra.can_comment&&D?d.createElement("div",{ref:w},d.createElement(l.Z,{sx:{display:{xs:"block",md:"none"}}}),d.createElement(D,{identity:e,open:!0,focus:a})):null)))}},14669:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=a(92114),n=a(85597),r=a(81719),o=a(91647),l=a(35705),s=a(30120),c=a(67294);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let p=(0,r.ZP)(i.cZ,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}}));function u({dataSource:e,pageParams:t}){let{dialogProps:a}=(0,i.Rh)(),{i18n:r,useFetchItems:u,jsxBackend:m}=(0,n.OgA)(),g=m.get("CommentHistoryItem"),[h,f]=u({dataSource:e,pageParams:t,data:[]});return c.createElement(i.Vq,d({},a,{fullWidth:!0,scroll:"body"}),c.createElement(i.$N,null,c.createElement(o.Z,{component:"span",fontWeight:"bold"},r.formatMessage({id:"edit_history"}))),c.createElement(p,null,f?c.createElement(s.Z,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},c.createElement(l.Z,{size:16})):null,h&&h.length?c.createElement(s.Z,{mt:2},h.map(e=>c.createElement(s.Z,{mb:2,key:`k${e.id}`},c.createElement(g,{item:e})))):null))}},81154:function(e,t,a){a.r(t);var i=a(92114),n=a(85597),r=a(41547),o=a(44373),l=a(92351),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.default=function(){let e=(0,l.Z)(),{useDialog:t,i18n:a,useSession:d,jsxBackend:p}=(0,n.OgA)(),{dialogProps:u}=t(),{user:m}=d(),g=(0,n.oRt)("core","accountMenu"),[h]=(0,n.zXz)(null,{}),f=a.formatMessage({id:"profile"});return s.createElement(i.Vq,c({maxWidth:"sm",fullWidth:!0,"data-testid":"popupProfileMenu"},u),s.createElement(i.$N,{"data-testid":"popupTitle",enableBack:!0,disableClose:!0},f),s.createElement(i.cZ,{className:e.dialog},s.createElement("div",{className:e.profile},s.createElement(o.Z,c({},{variant:"fullWidth"})),s.createElement("div",{className:e.userBlock},s.createElement("div",{className:e.userAvatar},s.createElement(r.Yt,{user:m,size:48})),s.createElement("div",{className:e.userInner},s.createElement("div",{className:e.userName},m.full_name),s.createElement(n.rUS,{className:e.linkInfo,to:m.link},a.formatMessage({id:"view_profile"})))),g.items.filter(Boolean).map((e,t)=>p.render({component:`menuItem.as.${e.as||"normal"}`,props:{key:t.toString(),item:e,variant:"contained",handleAction:h}})))))}},92351:function(e,t,a){var i=a(22410),n=a(73327);let r=(0,i.Z)(e=>{var t,a,i;return(0,n.Z)({blockHeader:{minHeight:60},menuWrapper:{display:"flex",height:60,boxShadow:"0px 2px 1px 0 rgba(0, 0, 0, 0.05)",backgroundColor:e.mixins.backgroundColor("paper"),position:"fixed",left:0,right:0,top:0,zIndex:1300},menuButton:{flex:"1",minWidth:"64px",display:"flex",alignItems:"center",justifyContent:"center",color:e.palette.text.secondary,borderBottom:"solid 2px #fff"},active:{color:`${e.palette.primary.main} !important`,borderBottomColor:e.palette.primary.main},menuButtonIcon:{width:"24px",height:"24px",fontSize:"24px"},menuInner:{position:"relative"},number:{width:20,height:20,backgroundColor:e.palette.error.main,color:"#fff",fontSize:e.mixins.pxToRem(13),borderRadius:"50%",display:"flex",justifyContent:"center",position:"absolute",top:-10,right:-10},dot:{width:8,height:8,backgroundColor:e.palette.error.main,borderRadius:"50%",position:"absolute",top:0,right:-4},logo:{height:"35px",display:"inline-block"},menuGuestWrapper:{display:"flex",alignItems:"center",justifyContent:"space-between",height:"60px",boxShadow:"0px 2px 1px 0 rgba(0, 0, 0, 0.05)",backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(0,2),position:"fixed",left:0,right:0,top:0,zIndex:2,"& $menuButton":{flex:"none"}},button:{fontSize:15,height:32,padding:e.spacing(0,3),textTransform:"capitalize"},popover:{"& .MuiPopover-paper":{maxWidth:"100%",width:"100%",borderRadius:0,top:"60px !important",bottom:0,boxShadow:"none !important",borderTop:`solid 1px ${null===(t=e.palette.border)||void 0===t?void 0:t.secondary}`,marginTop:"-1px"}},dropdownMenuWrapper:{width:"100%",minHeight:"calc(100vh - 60px)"},menuItem:{color:e.palette.text.primary,padding:e.spacing(1.5,2)},menuItemLink:{padding:0},link:{color:e.palette.text.primary,textDecoration:"none",padding:e.spacing(1.5,2),display:"block",flexGrow:1},icon:{textAlign:"center",marginRight:e.spacing(1.5)},toggleDarkMode:{fontSize:"32px",marginLeft:"auto",lineHeight:"20px",width:"32px",height:"20px",color:e.palette.text.disabled},userBlock:{display:"flex",alignItems:"center",padding:e.spacing(2),borderBottom:`solid 1px ${null===(a=e.palette.border)||void 0===a?void 0:a.secondary}`},userAvatar:{width:48,marginRight:e.spacing(1)},userInner:{flex:1,minWidth:0},userName:{fontSize:e.mixins.pxToRem(18),lineHeight:1.5,color:e.palette.text.primary,fontWeight:"bold"},linkInfo:{fontSize:e.mixins.pxToRem(15),lineHeight:1,color:e.palette.text.secondary},userAction:{marginLeft:"auto","& > .ico":{width:32,height:32,fontSize:16,color:e.palette.text.secondary,cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",marginRight:-16}},profile:{},menuApp:{borderTop:"solid 8px",borderTopColor:null===(i=e.palette.border)||void 0===i?void 0:i.secondary,paddingTop:16,"& ul":{marginLeft:e.spacing(-1),paddingBottom:e.spacing(4)},"& ul > li":{marginLeft:0,marginRight:0,marginBottom:e.spacing(1),paddingLeft:0,"& > a":{display:"flex",padding:e.spacing(1),fontSize:"0.9375rem",alignItems:"center",fontWeight:"bold"}}},dialog:{padding:"0 !important"},searchMobile:{display:"block",zIndex:"1301",position:"absolute",top:"0",width:"100%",height:"100%","& > div":{width:"100%"},"& form":{width:"calc(100% - 96px)"}},cancelButton:{position:"absolute",zIndex:"1",right:"16px",top:"50%",transform:"translateY(-50%)"}})},{name:"SiteBarMobileBlock"});t.Z=r},24656:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(92114),n=a(85597),r=a(21822),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s(){let{useDialog:e}=(0,n.OgA)(),{pathname:t}=(0,n.THL)(),{dialogProps:a,setDialogValue:s}=e(),c=({payload:e,type:t="@core/codeGenerate/make",children:a})=>{return o.createElement(r.Z,{onClick:()=>s({type:t,payload:e})},a)};return o.createElement(i.Vq,l({},a,{maxWidth:"xs",fullWidth:!0}),o.createElement(i.$N,null,"Code Generator"),o.createElement(i.cZ,null,o.createElement(c,{payload:"package"},"New App"),o.createElement(c,{payload:"migration"},"Migration"),o.createElement(c,{payload:"model"},"Model"),o.createElement(c,{payload:"web-api"},"Web API"),o.createElement(c,{payload:"admin-api"},"Admin API"),o.createElement(c,{payload:"form"},"Forms"),o.createElement(c,{payload:"request"},"Request"),o.createElement(c,{payload:"category"},"Category"),o.createElement(c,{payload:"data-grid"},"DataGrid"),o.createElement(c,{payload:"listener"},"Listener"),o.createElement(c,{payload:"notification"},"Notification"),o.createElement(c,{payload:"job"},"Job"),o.createElement(c,{payload:"mail"},"Mail"),o.createElement(c,{payload:"export"},"Export"),o.createElement(c,{payload:"inspect"},"Inspect"),o.createElement(c,{payload:"importer"},"Importer"),o.createElement(r.Z,{onClick:()=>s({type:"@core/codeGenerate/editCurrentSeo",payload:{url:t.replace(/^\/|\/$/g,"")}})},"Edit Meta"),o.createElement(r.Z,{onClick:()=>s({type:"@core/codeGenerate/ideFix"})},"IDE Fix")))}},4159:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var i=a(85597),n=a(92114),r=a(41547),o=a(41609),l=a.n(o),s=a(67294),c=a(73327),d=a(61366),p=a(94184),u=a.n(p);let m=e=>{var t;return(0,c.Z)({root:{borderBottom:"1px solid",borderBottomColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,padding:e.spacing(2),display:"flex",alignItems:"flex-start","&:hover":{backgroundColor:e.palette.action.hover}},info:{display:"flex",flexDirection:"column"},title:{flex:1,fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,color:e.palette.text.primary},icon:{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(2),marginTop:e.spacing(.5),color:e.palette.text.secondary},address:{fontSize:e.mixins.pxToRem(13),color:e.palette.text.secondary,marginRight:e.spacing(2)},media:{},active:{color:e.palette.primary.main,"& $icon":{color:e.palette.primary.main}}})};var g=(0,d.Z)(m)(function({name:e,address:t,classes:a,active:i,onClick:n}){return s.createElement("div",{role:"button","aria-label":"select place","data-testid":"suggestion",className:u()([a.root,i&&a.active]),onClick:n},s.createElement(r.zb,{icon:"ico-checkin-o",className:a.icon}),s.createElement("div",{className:a.info},s.createElement("span",{className:u()([a.title,i&&a.active])},e),t?s.createElement("div",{className:u()([a.address,i&&a.active]),children:t}):null))}),h=(0,a(22410).Z)(e=>(0,c.Z)({dialog:{},dialogContent:{height:370,padding:`${e.spacing(0,0,2,0)} !important`},inputStage:{padding:e.spacing(2)},btnCancel:{minWidth:e.spacing(3),padding:0,marginRight:e.spacing(1),color:e.palette.text.secondary},searchIcon:{color:e.palette.text.secondary},dialogTitle:{},dialogContentTitle:{color:e.palette.text.secondary,padding:e.spacing(.5,0,.5,2),textTransform:"uppercase"},mapStage:{}}));function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var v=function({defaultValue:e}){let t=h(),{useDialog:a,i18n:o}=(0,i.OgA)(),{dialogProps:c,setDialogValue:d}=a(),p=o.formatMessage({id:"search_for_location"}),u=o.formatMessage({id:"search_dots"}),m=s.useRef(),[v,b,y,x]=(0,i.$Cd)(m,{...e,address:""}),E=s.useCallback(e=>y(e),[y]),w=e=>{d({...e,query:b})},C=()=>{d(!1)};return s.createElement(n.Vq,f({className:t.dialog,maxWidth:"sm",fullWidth:!0,"data-testid":"dialogLocationPicker"},c),s.createElement(n.$N,{"data-testid":"popupTitle",enableBack:!0,disableClose:!0},p),s.createElement("div",{className:t.inputStage},s.createElement(r.mN,{autoFocus:!0,"data-testid":"searchBox",placeholder:u,onChanged:E})),s.createElement(n.cZ,{className:t.dialogContent},s.createElement("div",{className:t.dialogContentTitle},o.formatMessage({id:"base_on_your_location"})),s.createElement("div",{className:t.mapStage,ref:m}),!l()(x)&&!b&&s.createElement(g,{active:!0,name:x.name,address:x.address,onClick:C}),!!(null==v?void 0:v.length)&&v.map((e,t)=>{return e.lat===(null==x?void 0:x.lat)&&e.lng===(null==x?void 0:x.lng)?null:s.createElement(g,{name:e.name,address:e.address,key:t.toString(),onClick:()=>w(e)})})))}},18661:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(92114),r=a(84635),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({title:e="Edit",maxWidth:t="sm",...a}){let{useDialog:s}=(0,i.OgA)(),c=s(),{dialogProps:d}=c;return o.createElement(n.Vq,l({},d,{maxWidth:t,fullWidth:!0,"data-testid":"editPopup"}),o.createElement(r.dq,l({dialog:!0,dialogTitle:e,dialogItem:c},a)))}},55502:function(e,t,a){a.r(t),a.d(t,{default:function(){return g}});var i=a(85597),n=a(92114),r=a(41547),o=a(81674),l=a(86010),s=a(67294),c=a(22410),d=a(73327);let p=(0,c.Z)(e=>(0,d.Z)({root:{display:"flex",position:"relative"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},searchFocused:{border:e.mixins.border("primary"),background:"none"},searchIcon:{top:0,width:e.mixins.pxToRem(32),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center",transition:"all .2s ease",cursor:"pointer"},searchIconFocused:{color:e.palette.primary.main},inputRoot:{color:"inherit",width:"100%"},inputInput:{padding:e.spacing(1,2,1,0),boxSizing:"border-box",paddingLeft:"30px !important",transition:"all .2s ease",width:"100%",height:e.mixins.pxToRem(32)}}),{name:"SearchInModule"});var u=a(17563);function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function g({title:e,placeholder:t,item:a}){let{useDialog:c,navigate:d}=(0,i.OgA)(),{dialogProps:g,closeDialog:h}=c(),f=p(),[v,b]=(0,s.useState)(!1),[y,x]=(0,s.useState)(""),E=()=>{b(!0)},w=()=>{b(!1)},C=e=>{let{value:t}=e.target;x(t)},S=e=>{let t=null==e?void 0:e.keyCode;13===t&&(e.preventDefault(),k())},k=()=>{let e=y.trim();if(!e)return;let{id:t,module_name:i}=a;d({pathname:`/${i}/search/${t}`,search:u.stringify({q:e})}),h()};return s.createElement(n.Vq,m({},g,{maxWidth:"sm",fullWidth:!0,fullScreen:!1,"data-testid":"dialogSearchInApp"}),s.createElement(n.$N,null,s.createElement("div",{className:f.titleDialog},e)),s.createElement(n.cZ,{className:f.root},s.createElement("div",{className:(0,l.default)(f.searchIcon,v&&f.searchIconFocused)},s.createElement(r.zb,{icon:"ico-search-o"})),s.createElement(o.ZP,{placeholder:t,classes:{root:f.inputRoot,input:f.inputInput},value:y,name:"searchBox",autoComplete:"off",autoCapitalize:"off",inputProps:{"aria-label":"search","data-testid":"search_box_in_module"},onFocus:E,onChange:C,onKeyDown:S,onBlur:w})))}},50583:function(e,t,a){a.r(t);var i=a(92114),n=a(85597),r=a(41547),o=a(21822),l=a(71682),s=a(81719),c=a(38790),d=a(67294);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u="GenerateLinkField",m=(0,s.ZP)("div",{name:u})(({theme:e})=>({padding:e.spacing(.5,1.75),margin:e.spacing(2),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5),display:"flex",alignItems:"center",justifyContent:"space-between"})),g=(0,s.ZP)("div",{name:u})(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden",width:"90%"})),h=(0,s.ZP)(r.zb,{name:"ReloadIcon"})(({theme:e})=>({fontSize:e.spacing(1.875),color:(e.palette.mode,e.palette.primary.main),cursor:"pointer"})),f=(0,s.ZP)(o.Z,{name:"ReloadButton"})(({theme:e})=>({fontWeight:"bold",height:e.spacing(4),marginLeft:e.spacing(1)})),v=(0,s.ZP)(r.Ys,{name:"CodeText"})(({theme:e})=>({color:e.palette.text.hint,overflow:"hidden"})),b=(0,s.ZP)("div",{name:"WrapperLoading"})(({theme:e})=>({margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"})),y=(0,s.ZP)(o.Z)(()=>({"& span":{margin:0}})),x=e=>{let{useDialog:t,i18n:a,dispatch:r,copyToClipboard:o,toastBackend:s}=(0,n.OgA)(),{dialogProps:u}=t(),[x,E]=d.useState(null),w=t=>{r({type:t,payload:e,meta:{onSuccess:e=>{E(e)},onFailure:()=>{}}})};d.useEffect(()=>{e&&w("event/getCode")},[]);let C=()=>{o(x.url),s.success(a.formatMessage({id:"copied_to_clipboard"}))},S=()=>{w("event/refreshCode")};return d.createElement(i.Vq,p({},u,{maxWidth:"sm",fullWidth:!0}),d.createElement(i.$N,null,a.formatMessage({id:"generate_invite_link"})),d.createElement(i.cZ,{variant:"fitScroll"},x?d.createElement(m,null,d.createElement(g,null,d.createElement(v,{lines:1},x.url)),(null==x?void 0:x.status)?null:d.createElement(c.Z,{title:a.formatMessage({id:"refresh"}),placement:"top"},d.createElement(y,{onClick:S,variant:"outlined",size:"small",startIcon:d.createElement(h,{icon:"ico-refresh-o"})})),d.createElement(f,{variant:"outlined",onClick:C},a.formatMessage({id:"copy"}))):d.createElement(b,null,d.createElement(l.Z,{variant:"rounded",width:"100%",height:35}))))};t.default=x},67821:function(e,t,a){a.r(t),a.d(t,{default:function(){return h}});var i=a(92114),n=a(58394),r=a(85597),o=a(21241),l=a(70214),s=a(99164),c=a(67294),d=a(22410),p=a(73327),u=(0,d.Z)(e=>(0,p.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function m(){return(m=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let g=e=>{var t;let a=(0,r.oHF)(n.t3,"event_member","viewAll"),i=(0,r.oHF)(n.t3,"event_invite","viewAll"),o={joined:{id:"going",value:"joined",itemView:"event.itemView.guestSmallCard",emptyPage:"core.block.no_content",invisible:!0,dataSource:{apiUrl:a.apiUrl,apiParams:{event_id:e.id,view:"joined"}},total:"total_member"},interested:{id:"interested",value:"interested",itemView:"event.itemView.guestSmallCard",emptyPage:"core.block.no_content",invisible:!0,dataSource:{apiUrl:a.apiUrl,apiParams:{event_id:e.id,view:"interested"}},total:"total_interested"},invited:{id:"invited",value:"invited",invisible:(null===(t=e.extra)||void 0===t?void 0:t.can_invite)||!1,itemView:"event.itemView.inviteCard",emptyPage:"event.block.no_invite_content",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:{component:"event.invitedButton",props:{item:e,type:"event/invitePeopleToCome"}}},dataSource:{apiUrl:i.apiUrl,apiParams:{event_id:e.id}},total:"total_pending_invite"}};return o};function h({item:e,defaultTab:t="joined"}){let a=u(),n=g(e),[d,p]=(0,c.useState)(t),h=(0,c.useRef)(),{useDialog:f,i18n:v,ListView:b,useGetItem:y}=(0,r.OgA)(),{dialogProps:x}=f(),{resource_name:E,item_id:w}=e,C=`event_guest/${E}/${w}/${d}`,S=y(e._identity),k=(e,t)=>{p(t)};return c.createElement(i.Vq,m({},x,{maxWidth:"xs",fullWidth:!0}),c.createElement(i.$N,null,v.formatMessage({id:"guests"})),c.createElement(s.Z,{value:d,onChange:k,className:a.customTabs},Object.keys(n).filter(e=>n[e].invisible).map(e=>{var t;return c.createElement(l.Z,{key:n[e].id,disableRipple:!0,label:`${v.formatMessage({id:n[e].id})} (${S.statistic[null===(t=n[e])||void 0===t?void 0:t.total]||0})`,value:n[e].value,"aria-label":n[e].value})})),c.createElement("div",{className:a.dialogContent,ref:h},c.createElement(o.ID,{scrollRef:h},c.createElement(b,{dataSource:n[d].dataSource,pagingId:C,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",emptyPage:n[d].emptyPage,emptyPageProps:n[d].emptyPageProps,itemView:n[d].itemView}))))}},49185:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var i=a(92114),n=a(58394),r=a(85597),o=a(21241),l=a(13478),s=a(70214),c=a(99164),d=a(67294),p=a(22410),u=a(73327),m=(0,p.Z)(e=>(0,u.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let h=e=>{var t;let a=(0,r.oHF)(n.t3,"event_member","viewHosts"),i=(0,r.oHF)(n.t3,"event_host_invite","viewAll"),o=(0,l.aZ)(a.apiParams,{id:e.id}),s=(0,l.aZ)(null==i?void 0:i.apiParams,{id:e.id}),c={list_host:{id:"host_list",value:"list_host",itemView:"event.itemView.hostCard",invisible:!0,dataSource:{apiUrl:null==a?void 0:a.apiUrl,apiParams:o},emptyPage:"core.block.no_content"},invited:{id:"invited",value:"invited",invisible:(null===(t=e.extra)||void 0===t?void 0:t.can_invite)&&e.extra.can_manage_host,itemView:"event.itemView.hostInviteCard",dataSource:{apiUrl:null==i?void 0:i.apiUrl,apiParams:s},emptyPage:"event.block.no_invite_content",emptyPageProps:{icon:"ico-user3-three",description:"no_one_has_been_invited",buttonCustom:{component:"event.invitedButton",props:{item:e,type:"event/inviteToComeHost"}}}}};return c};function f({item:e,defaultTab:t="list_host"}){let a=m(),n=h(e),[l,p]=(0,d.useState)(t),u=(0,d.useRef)(),{useDialog:f,i18n:v,ListView:b}=(0,r.OgA)(),{dialogProps:y}=f(),{resource_name:x,item_id:E}=e,w=`event_host/${x}/${E}/${l}`,C=(e,t)=>{p(t)};return d.createElement(i.Vq,g({},y,{maxWidth:"xs",fullWidth:!0}),d.createElement(i.$N,null,v.formatMessage({id:"manage_host_list"})),d.createElement(c.Z,{value:l,onChange:C,className:a.customTabs},Object.keys(n).filter(e=>n[e].invisible).map(e=>d.createElement(s.Z,{key:n[e].id,disableRipple:!0,label:v.formatMessage({id:n[e].id}),value:n[e].value,"aria-label":n[e].value}))),d.createElement("div",{className:a.dialogContent,ref:u},d.createElement(o.ID,{scrollRef:u},d.createElement(b,{dataSource:n[l].dataSource,pagingId:w,canLoadMore:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:n[l].itemView,emptyPage:n[l].emptyPage,emptyPageProps:n[l].emptyPageProps}))))}},30898:function(e,t,a){a.r(t),a.d(t,{default:function(){return b}});var i=a(85597),n=a(92114),r=a(21241),o=a(41547),l=a(30120),s=a(70214),c=a(99164),d=a(81719),p=a(23279),u=a.n(p),m=a(67294),g=a(74499);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let f=(0,d.ZP)(s.Z)(({theme:e})=>({height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(4),textTransform:"uppercase","& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main}})),v=e=>{switch(e){case g.yr:return"friend";case g.U3:return"page";case g.LL:return"group"}};function b(e){let{i18n:t,useSession:a,useDialog:s,ListView:d}=(0,i.OgA)(),{dialogProps:p}=s(),{user:{id:b}}=a(),[y,x]=m.useState(""),E=m.useRef(""),[w,C]=m.useState(g.yr),S=m.useMemo(()=>{return{source:{apiUrl:"/feed/hidden",apiParams:{user_id:b,limit:6,q:y||void 0,type:v(w)}},paging:`/manage-hidden/tab=${w}/${y}`}},[y,w]),k=()=>{E.current.trim()!==y.trim()&&x(E.current.trim())},P=u()(k,1e3),Z=e=>{E.current=e,P()},O=(e,t)=>{C(t)};return m.createElement(n.Vq,h({},p,{maxWidth:"sm",fullWidth:!0}),m.createElement(n.$N,null,t.formatMessage({id:"manage_hidden"})),m.createElement(n.cZ,{variant:"fitScroll",sx:{height:"50vh"}},m.createElement(l.Z,{sx:{m:[2,2,0,2]}},m.createElement(o.mN,{placeholder:t.formatMessage({id:"search_users_pages_groups"}),onChanged:Z})),m.createElement(c.Z,{value:w,onChange:O,indicatorColor:"primary",textColor:"primary",sx:{ml:2}},m.createElement(f,{disableRipple:!0,label:t.formatMessage({id:"users"})}),m.createElement(f,{disableRipple:!0,label:t.formatMessage({id:"pages"})}),m.createElement(f,{disableRipple:!0,label:t.formatMessage({id:"groups"})})),m.createElement("div",{key:y},m.createElement(r.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:352},m.createElement(d,{canLoadMore:!0,dataSource:S.source,pagingId:S.paging,itemView:"user.itemView.hiddenUser",emptyPage:"core.block.no_content",emptyPageProps:{title:`no_${v(w)}_found`},clearDataOnUnMount:!0,prefixPagingId:"/manage-hidden",gridLayout:"Friend - Small List",itemLayout:"Friend - Small List"})))))}},28977:function(e,t,a){a.r(t);var i=a(92114),n=a(85597),r=a(30120),o=a(81719),l=a(35705),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let d=(0,o.ZP)(i.cZ,{name:"HistoryDialog",slot:"DialogContentStyled"})(({theme:e})=>({borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,padding:e.spacing(0,2),paddingBottom:0,[e.breakpoints.down("sm")]:{borderRadius:0}})),p=({dataSource:e,pageParams:t})=>{let{useDialog:a,i18n:o,useFetchItems:p,jsxBackend:u}=(0,n.OgA)(),m=u.get("FeedHistoryItem"),{dialogProps:g}=a(),[h,f]=p({dataSource:e,pageParams:t,data:[]});return s.createElement(i.Vq,c({},g,{"data-testid":"dialogStatusComposer",maxWidth:"sm",fullWidth:!0}),s.createElement(i.$N,null,o.formatMessage({id:"edit_history"})),s.createElement(d,null,f?s.createElement(r.Z,{p:2,sx:{display:"flex",alignItems:"center",justifyContent:"center"}},s.createElement(l.Z,{size:16})):null,h&&h.length?s.createElement(r.Z,{mt:2},h.map(e=>s.createElement(r.Z,{mb:3,key:`k${e.id}`},s.createElement(m,{item:e})))):null))};t.default=p},56979:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(92114),r=a(84635),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({initialValues:e,formUrl:t}){let{useDialog:a}=(0,i.OgA)(),{dialogProps:s}=a();return t?o.createElement(n.Vq,l({},s,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.AO,{initialValues:e,dataSource:{apiUrl:t},dialog:!0})):null}},35597:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(92114),r=a(84635),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({dataSource:e,parentPost:t}){let{useDialog:a,jsxBackend:s}=(0,i.OgA)(),{dialogProps:c}=a(),d=s.render({component:"forum_post.ui.quoteItem",props:{item:t}});return o.createElement(n.Vq,l({},c,{maxWidth:"sm",fullWidth:!0}),o.createElement(r.AO,{noHeader:!0,dataSource:e,dialog:!0,dialogEmbedItem:d,keepPaginationData:!0}))}},96370:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var i=a(92114),n=a(85597),r=a(21241),o=a(46060),l=a(21822),s=a(18446),c=a.n(s),d=a(67294),p=a(49960),u=a(71682),m=a(91647),g=a(81719);let h=(0,g.ZP)("div",{name:"FriendListItem",slot:"Root"})(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(1.5),borderBottom:"1px solid",borderBottomColor:e.palette.divider,":hover":{backgroundColor:e.palette.action.hover}}));function f({item:e,checked:t,onChange:a}){let i=d.useCallback((t,i)=>{a(i,e.id)},[]);return d.createElement(h,null,d.createElement(m.Z,{variant:"h5",sx:{flex:1}},e.name),d.createElement(p.Z,{size:"small",color:"primary",checked:Boolean(t),onChange:i}))}let v=()=>{return d.createElement(h,null,d.createElement(m.Z,{variant:"h5",sx:{flex:1}},d.createElement(u.Z,{variant:"text",width:"50%",height:24})),d.createElement(u.Z,{variant:"rectangular",width:16,height:16}))};f.LoadingSkeleton=v;var b=a(41547);let y=(0,g.ZP)("div",{name:"root"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2),alignItems:"center",marginTop:e.spacing(11.25)})),x=(0,g.ZP)(b.zb,{name:"LineIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(64),color:e.palette.text.secondary,marginBottom:e.spacing(4)})),E=(0,g.ZP)("div",{name:"content"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:e.mixins.pxToRem(15)}})),w=(0,g.ZP)(l.Z,{name:"WrapButton"})(({theme:e})=>({marginTop:e.spacing(1),"&:hover":{backgroundColor:"unset"}})),C=(0,g.ZP)(l.Z,{name:"ButtonInviteStyled"})(({theme:e})=>({height:"100%","& .MuiButton-startIcon":{marginLeft:0}}));function S({icon:e="ico-list-bullet-o",description:t="there_are_no_friend_list",buttonCustom:a}){let{i18n:i,dispatch:r,useDialog:o}=(0,n.OgA)(),{closeDialog:l}=o(),s=()=>{l(),a.type&&r({type:a.type})};return d.createElement(y,null,d.createElement(x,{icon:e}),t?d.createElement(E,null,i.formatMessage({id:t})):null,a?d.createElement(w,null,d.createElement(C,{size:"small",variant:"outlined",component:"h5",onClick:s,startIcon:d.createElement(b.zb,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},d.createElement("span",null,i.formatMessage({id:a.label||"add_new_listing"})))):null)}function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function P({id:e}){let{useDialog:t,i18n:a}=(0,n.OgA)(),[s,p]=d.useState([]),[u,m]=(0,o.sU)({dataSource:{apiUrl:`/friend/list/assign/${e}`},data:[]});d.useEffect(()=>{p(u)},[u]);let{dialogProps:g,setDialogValue:h}=t(),v=()=>{h(s)},b=d.useCallback((e,t)=>{p(a=>{return e?[...a,t]:a.filter(e=>e!==t)})},[p]),[y,x]=(0,o.sU)({dataSource:{apiUrl:"/friend/list"},data:[]});return d.createElement(i.Vq,k({maxWidth:"xs",fullWidth:!0},g),d.createElement(i.$N,null,a.formatMessage({id:"friend_list"})),d.createElement(i.cZ,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(r.l$,null,x||m?[0,5].map(e=>d.createElement(f.LoadingSkeleton,{key:e.toString()})):null,x||m||y.length?null:d.createElement(S,{icon:"ico-list-bullet-o",buttonCustom:{type:"friend/addNewList",label:"add_new_listing"}}),x||m||!y.length?null:y.map(e=>d.createElement(f,{key:e.id.toString(),item:e,checked:s.includes(e.id),onChange:b})))),d.createElement(i.kX,null,d.createElement(l.Z,{disabled:c()(u,s),color:"primary",variant:"contained",size:"medium",onClick:v},a.formatMessage({id:"save_changes"}))))}},18884:function(e,t,a){a.r(t);var i=a(85597),n=a(41547),r=a(67294);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t}=(0,i.OgA)(),[a,l]=(0,i.fBB)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[s,c]=r.useState(e.value),d=r.useCallback(e=>{c(e)},[]);return r.createElement(n.zU,o({placeholder:t.formatMessage({id:"search_friend"}),dialogTitle:t.formatMessage({id:"select_friend"}),items:a.items,loading:a.loading,onSelectItem:d,selectedItem:s,onChanged:l,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},"data-testid":"popupFriendPicker"},e))}},52267:function(e,t,a){a.r(t);var i=a(85597),n=a(41547),r=a(57043),o=a.n(r),l=a(59704),s=a.n(l),c=a(67294);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t,useTheme:a}=(0,i.OgA)(),r=a(),[l,p]=(0,i.fBB)({apiUrl:e.apiUrl||"/friend/mention",initialParams:null==e?void 0:e.initialParams}),[u,m]=(0,c.useState)(e.value||[]),g=e=>{m(t=>{return s()(t,t=>t.id===e.id)?t.filter(t=>t.id!==e.id):o()(t,e)})};return c.createElement(n.f7,d({items:l.items,onSelectItem:g,selectedItems:u,onChanged:p,loading:l.loading,placeholder:t.formatMessage({id:"search_for_friends"}),dialogTitle:t.formatMessage({id:"tag_people"}),emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_people_found"})},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.ui.pickItem",heightContent:r.spacing(37.5)},e))}},56897:function(e,t,a){a.d(t,{Z:function(){return s}});var i=a(85597),n=a(92114),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d}=(0,i.OgA)(),{dialogProps:p}=c();return o.createElement(n.Vq,l({},p,{maxWidth:"xs",fullWidth:!0}),o.createElement(n.$N,null,s),o.createElement(n.cZ,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.l$,{style:{height:"auto"}},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},pagingId:a,canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"friend.itemView.smallCard"}))))}},90347:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var i=a(85597),n=a(67294),r=a(56897);function o(e){let{i18n:t}=(0,i.OgA)();return n.createElement(r.Z,{apiUrl:"/friend",apiParams:{user_id:e.user_id,view:"mutual",limit:20},pagingId:`mutualFriends/${e.user_id}`,dialogTitle:t.formatMessage({id:"mutual_friends"})})}},54394:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var i=a(85597),n=a(67294),r=a(56897);function o({item_type:e,item_id:t}){let{i18n:a}=(0,i.OgA)();return n.createElement(r.Z,{apiUrl:"/feed/tagged-friend",apiParams:{item_type:e,item_id:t,limit:20},pagingId:`tagged-friend/${e}/${t}`,dialogTitle:a.formatMessage({id:"tagged_friends"})})}},16234:function(e,t,a){a.r(t),a.d(t,{default:function(){return o}});var i=a(85597),n=a(67294),r=a(56897);function o(e){let{i18n:t}=(0,i.OgA)();return n.createElement(r.Z,{apiUrl:"/friend",apiParams:{user_id:e.user_id,limit:20},pagingId:`friends/${e.user_id}`,dialogTitle:t.formatMessage({id:"Friends"})})}},50821:function(e,t,a){a.r(t);var i=a(85597),n=a(92114),r=a(67294),o=a(84635);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s="changeRuleGroupDialog",c=({id:e,dataSource:t})=>{let{eventCenter:a,dispatch:c}=(0,i.OgA)(),{dialogProps:d}=(0,n.Rh)();return(0,r.useEffect)(()=>{let e=a.on(s,e=>c({type:s,payload:e}));return()=>{a.off(s,e)}},[]),r.createElement(n.Vq,l({},d),r.createElement(o.AO,{changeEventName:s,dialog:!0,dataSource:t}))};t.default=c},19024:function(e,t,a){a.r(t);var i=a(92114),n=a(67294),r=a(84635);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let l=({id:e,dataSource:t})=>{let{dialogProps:a}=(0,i.Rh)();return n.createElement(i.Vq,o({fullWidth:!0,maxWidth:"xs"},a),n.createElement(r.AO,{dialog:!0,dataSource:t}))};t.default=l},34880:function(e,t,a){a.r(t);var i=a(92114),n=a(85597),r=a(41547),o=a(21822),l=a(71682),s=a(81719),c=a(38790),d=a(67294);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u="GenerateLinkField",m=(0,s.ZP)("div",{name:u})(({theme:e})=>({padding:e.spacing(.5,1.75),margin:e.spacing(2),border:e.mixins.border("secondary"),borderRadius:e.spacing(.5),display:"flex",alignItems:"center",justifyContent:"space-between"})),g=(0,s.ZP)("div",{name:u})(({theme:e})=>({display:"flex",alignItems:"center",overflow:"hidden",width:"90%"})),h=(0,s.ZP)(r.zb,{name:"ReloadIcon"})(({theme:e})=>({fontSize:e.spacing(1.875),color:(e.palette.mode,e.palette.primary.main),cursor:"pointer"})),f=(0,s.ZP)(o.Z,{name:"ReloadButton"})(({theme:e})=>({fontWeight:"bold",height:e.spacing(4),marginLeft:e.spacing(1)})),v=(0,s.ZP)(r.Ys,{name:"CodeText"})(({theme:e})=>({color:e.palette.text.hint,overflow:"hidden"})),b=(0,s.ZP)("div",{name:"WrapperLoading"})(({theme:e})=>({margin:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center"})),y=(0,s.ZP)(o.Z)(()=>({"& span":{margin:0}})),x=e=>{let{useDialog:t,i18n:a,dispatch:r,copyToClipboard:o,toastBackend:s}=(0,n.OgA)(),{dialogProps:u}=t(),[x,E]=d.useState(null),w=t=>{r({type:t,payload:e,meta:{onSuccess:e=>{E(e)},onFailure:()=>{}}})};d.useEffect(()=>{e&&w("group/getCode")},[]);let C=()=>{o(x.url),s.success(a.formatMessage({id:"link_copied_to_clipboard"}))},S=()=>{w("group/refreshCode")};return d.createElement(i.Vq,p({},u,{maxWidth:"sm",fullWidth:!0}),d.createElement(i.$N,null,a.formatMessage({id:"generate_invite_link"})),d.createElement(i.cZ,{variant:"fitScroll"},x?d.createElement(m,null,d.createElement(g,null,d.createElement(v,{lines:1},x.url)),(null==x?void 0:x.status)?null:d.createElement(c.Z,{title:a.formatMessage({id:"refresh"}),placement:"top"},d.createElement(y,{onClick:S,variant:"outlined",size:"small",startIcon:d.createElement(h,{icon:"ico-refresh-o"})})),d.createElement(f,{variant:"outlined",onClick:C},a.formatMessage({id:"copy"}))):d.createElement(b,null,d.createElement(l.Z,{variant:"rounded",width:"100%",height:35}))))};t.default=x},86384:function(e,t,a){a.r(t);var i=a(85597),n=a(90717),r=a(41547),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t}=(0,i.OgA)(),a=(0,i.oHF)(n.eA,n.eA,"getShareOnGroupSuggestion"),{apiUrl:s,apiParams:c}=Object.assign({},a),[d,p]=(0,i.fBB)({apiUrl:s,initialParams:c}),[u,m]=o.useState(e.value),g=o.useCallback(e=>{m(e)},[]);return o.createElement(r.zU,l({placeholder:t.formatMessage({id:"search_group"}),dialogTitle:t.formatMessage({id:"select_group_to_share"}),items:d.items,loading:d.loading,onSelectItem:g,selectedItem:u,onChanged:p,"data-testid":"popupGroupPicker",emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_groups_found"})},gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"group.ui.pickGroupItem"},e))}},33009:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(85597),n=a(1881),r=a(67294),o=a(92114),l=a(21241);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:n}){let{useDialog:c,ListView:d}=(0,i.OgA)(),{dialogProps:p}=c();return r.createElement(o.Vq,s({},p,{maxWidth:"xs",fullWidth:!0}),r.createElement(o.$N,null,n),r.createElement(o.cZ,{variant:"fitScroll",sx:{height:"45vh"}},r.createElement(l.l$,{style:{height:"auto"}},r.createElement(d,{dataSource:{apiUrl:e,apiParams:t},canLoadMore:!0,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"group.itemView.reportCard"}))))}function d({id:e}){let{i18n:t,compactUrl:a}=(0,i.OgA)(),o=(0,i.oHF)(n.a,n.v,"listUsersReportOwner");return r.createElement(c,{apiUrl:a(o.apiUrl,{id:e}),pagingId:`listReport/${e}`,apiParams:{},dialogTitle:t.formatMessage({id:"people_who_reported_post"})})}},45694:function(e,t,a){a.r(t);var i=a(92114),n=a(84635),r=a(85597),o=a(67294),l=a(90717);let s=({id:e})=>{let{useDialog:t}=(0,r.OgA)(),{dialogProps:a}=t(),s=(0,r.oHF)(l.eA,"group_question","getQuestionForm"),{open:c}=a,d=o.useMemo(()=>o.createElement(i.Vq,{open:c,maxWidth:"md",fullWidth:!0,"data-testid":"popupReport"},o.createElement(n.AO,{dialog:!0,dataSource:s,pageParams:{id:e}})),[e,c]);return d};t.default=s},27265:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(92114),n=a(85597),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({item:e,dataSource:t}){let a=(0,o.useRef)(),{useDialog:s,i18n:c,ListView:d}=(0,n.OgA)(),{dialogProps:p}=s(),{resource_name:u,item_id:m}=e,g=`marketplace/${u}/${m}`;return o.createElement(i.Vq,l({},p,{maxWidth:"sm",fullWidth:!0}),o.createElement(i.$N,null,c.formatMessage({id:"invited_people"})),o.createElement(i.cZ,null,o.createElement("div",{ref:a},o.createElement(r.ID,{scrollRef:a},o.createElement(d,{dataSource:t,pagingId:g,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},gridLayout:"Friend - Small List",itemLayout:"User - List",itemView:"marketplace.itemView.peopleCard"})))))}},28302:function(e,t,a){a.r(t);var i=a(85597),n=a(13585),r=a(41547),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}t.default=function(e){let{i18n:t}=(0,i.OgA)(),[a,s]=o.useState(e.value),c=(0,i.oHF)(n.t2,n.t2,"getShareOnPageSuggestion"),{apiUrl:d,apiParams:p}=Object.assign({},c),[u,m]=(0,i.fBB)({apiUrl:d,initialParams:p}),g=o.useCallback(e=>{s(e)},[]);return o.createElement(r.zU,l({placeholder:t.formatMessage({id:"search_page"}),dialogTitle:t.formatMessage({id:"select_page_to_share"}),items:u.items,loading:u.loading,onSelectItem:g,selectedItem:a,onChanged:m,emptyPage:"core.block.no_content",emptyPageProps:{title:t.formatMessage({id:"no_pages_found"})},"data-testid":"popupPagePicker",gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"page.ui.pickPageItem"},e))}},64169:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(85597),n=a(92114),r=a(21822),o=a(91647),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(){let{useDialog:e,i18n:t}=(0,i.OgA)(),{dialogProps:a,closeDialog:c}=e();return l.createElement(n.Vq,s({},a),l.createElement(n.$N,null,t.formatMessage({id:"Reassign Owner"})),l.createElement(n.cZ,null,l.createElement(o.Z,null,"Choose a friend and transfer this page to them. Remember that: Current owner will lose all admin privilege on this page after do this.")),l.createElement(n.kX,null,l.createElement(r.Z,{autoFocus:!0,color:"primary",onClick:c,"data-testid":"alertDialogOkButton"},t.formatMessage({id:"Submit"}))))}c.displayName="ReassignOwnerDialog";var d=c},33651:function(e,t,a){a.d(t,{Z:function(){return v}});var i=a(85597),n=a(62937),r=a(67294),o=a(27361),l=a.n(o),s=a(13478),c=a(7961),d=a(35705),p=a(81719);let u="SuggestionList",m=(0,p.ZP)("div",{name:u,slot:"RootNoFound"})(({theme:e})=>({minHeight:"100px",textAlign:"center"})),g=(0,p.ZP)("div",{name:u,slot:"Root"})(({theme:e})=>({minHeight:"100px"})),h=(e,{text:t,identity:a})=>{let i=l()(e,a);return{...e.friend.suggestions[`:${t}`],item_id:null==i?void 0:i.id}};var f=(0,i.$jX)(h)(function(e){let{dispatch:t,i18n:a}=(0,i.OgA)(),{text:n,item_id:o,data:l,loaded:p,onItemClick:u,classes:h,excludeIds:f,isFullFriend:v}=e,b=r.useMemo(()=>{return v?{excludeIds:f}:{item_type:"photo",item_id:o}},[f,o,v]);return(r.useEffect(()=>{t({type:"friend/suggestions/LOAD",payload:{text:n,...b}})},[t,n,b]),p)?(null==l?void 0:l.length)?r.createElement(g,null,l.map(e=>r.createElement("div",{onClick:t=>{t.preventDefault(),t.stopPropagation(),u(e)},className:h.tagItem,key:e.id.toString()},r.createElement(c.Z,{src:(0,s.Q4)(e.image,"240"),children:(0,s.vK)(e.label),alt:e.label,className:h.smallAvatar,style:{backgroundColor:s.kU.hex((0,s.vK)(e.label))}}),r.createElement("span",{className:h.userName},e.label)))):r.createElement(m,null,r.createElement("div",{style:{padding:16}},a.formatMessage({id:"no_people_found"}))):r.createElement(m,{sx:{display:"flex",alignItems:"center",justifyContent:"center"}},r.createElement(d.Z,{color:"secondary",size:32}))});function v({classes:e,onItemClick:t,anchorRef:a,identity:o,isFullFriend:l,excludeIds:s}){let{i18n:c}=(0,i.OgA)(),[d,p]=r.useState(""),u=e=>{p(e)};return r.createElement(n.Z,{id:"suggest-friends",open:Boolean(a.current),disablePortal:!0,anchorEl:a.current,placement:"bottom",className:e.popper},r.createElement("div",{className:e.inputBaseBox},r.createElement("input",{type:"text",placeholder:c.formatMessage({id:"type_any_name"}),onChange:e=>u(e.target.value),autoFocus:!0,onBlur:e=>e.target.focus()})),r.createElement(f,{onItemClick:t,text:d,classes:e,identity:o,isFullFriend:l,excludeIds:s}))}},11770:function(e,t,a){var i=a(86010),n=a(67294);t.Z=n.forwardRef(function({classes:e,px:t,py:a,open:r},o){let l=n.useMemo(()=>{return{left:`${t}%`,top:`${a}%`}},[t,a]);return n.createElement("div",{className:(0,i.default)(e.taggedBox,r?"":"srOnly"),style:l,ref:o},n.createElement("div",{className:e.whoIsThis}))})},97252:function(e,t,a){var i=a(13478),n=a(81719),r=a(67294);let o=(0,n.ZP)("div",{name:"MultipleUploadField",slot:"PreviewImg",shouldForwardProp:e=>"radio"!==e})(({theme:e,radio:t})=>({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"auto 100%",maxWidth:"100%",...t&&"horizontal"===t&&{backgroundSize:"cover"}})),l=({item:e})=>{let[t,a]=r.useState({}),n=(e,t)=>{try{let a=new Image;a.src=t,a.onload=()=>{e({height:a.height,width:a.width})},a.onerror=e=>{}}catch(i){}},l=(null==e?void 0:e.source)||e.image_url||(0,i.Q4)(null==e?void 0:e.image,"1024");r.useEffect(()=>{n(a,l)},[]);let s="horizontal";return s=t&&t.width/t.height<=1?"vertical":"horizontal",r.createElement(o,{radio:s,style:{backgroundImage:`url(${l})`}})};t.Z=l},49249:function(e,t,a){a.d(t,{Z:function(){return v}});var i=a(85597),n=a(27361),r=a.n(n),o=a(41547),l=a(21822),s=a(81719),c=a(67294);let d="PhotoTag",p=(0,s.ZP)("div",{name:d,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:i,hovering:n,forceShow:r})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||r)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:n?10:"auto",...a&&i&&{left:`${a}%`,top:`${i}%`}})),u=(0,s.ZP)("div",{name:d,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),m=(0,s.ZP)(i.QVN,{name:d,slot:"LinkStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,maxWidth:120,whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",flexGrow:1,margin:e.spacing(0,.5)})),g=(0,s.ZP)(l.Z,{name:d,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),h=(0,s.ZP)("span",{name:d,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"})),f=(e,{identity:t})=>{let a=r()(e,t);return a?{item:a,user:a.user?r()(e,a.user):void 0}:{}};var v=(0,i.$jX)(f)(function({item:e,user:t,tagging:a,extra:i,onRemove:n,isTypePreview:r,forceShow:l}){var s;let d=a&&(null==e?void 0:null===(s=e.extra)||void 0===s?void 0:s.can_remove_tag_friend),[f,v]=c.useState(!1);return c.createElement(p,{px:e.px,py:e.py,tagging:a,hovering:f,forceShow:l},c.createElement(u,{onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1)},t&&!r?c.createElement(m,{to:`/${t.user_name}`,children:t.full_name}):c.createElement(h,null,(null==t?void 0:t.full_name)||(null==e?void 0:e.content)),d?c.createElement(g,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>{n(t,e.id)}},c.createElement(o.zb,{icon:"ico-close"})):null))})},81667:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(85597),n=a(92114),r=a(84635),o=a(89773),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c({id:e}){let{useDialog:t,compactUrl:a}=(0,i.OgA)(),{dialogProps:c}=t(),d=(0,i.oHF)(o.T7,o.Gk,"addItemForm");return d?l.createElement(n.Vq,s({},c,{fullWidth:!0,maxWidth:"xs","data-testid":"addPhotoAlbum"}),l.createElement(r.AO,{dialog:!0,dataSource:{apiMethod:d.apiMethod,apiUrl:a(d.apiUrl,{id:e})}})):null}},2067:function(e,t,a){a.r(t),a.d(t,{default:function(){return A}});var i=a(92114),n=a(85597),r=a(89773),o=a(21822),l=a(72962),s=a(70214),c=a(99164),d=a(67294),p=a(21241),u=a(61225),m=a(62097),g=a(12902),h=a(22410),f=a(73327),v=(0,h.Z)(e=>(0,f.Z)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{textTransform:"uppercase",height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseAlbumItemDialog"});let b={spacing:1},y={xs:12,sm:6,md:4,lg:4,xl:4};var x=function({fileItems:e,uploadFiles:t,setFiles:a,isDetailAlbum:i,albumId:r,dataSource:o}){let{jsxBackend:l}=(0,n.OgA)(),s=v(),c=(0,m.Z)(),h=(0,u.Z)(c.breakpoints.down("sm")),f=l.get("photo.block.photoListingBlock"),x=e=>{let i=Boolean(t.find(t=>t.id===e.id));a((0,g.ZP)(t,a=>{if(i){let n=t.findIndex(t=>t.id===e.id);a.splice(n,1)}else a.push(e)}))};return d.createElement(p.l$,{className:s.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:h?"90vh":352},d.createElement(f,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:o,itemView:"photo.itemView.selectPhotoProfile",emptyPage:"core.block.no_content",gridContainerProps:b,gridItemProps:y,itemProps:{fileItems:e,isDetailAlbum:i,albumId:r,onSuccess:x,files:t},blockLayout:"Profile - Clean Body Only"}))},E=a(97252),w=a(41547),C=a(30030),S=a(81719),k=a(38790);let P=(0,S.ZP)("div",{name:"MultipleUploadField",slot:"Root"})(({theme:e})=>({marginTop:e.spacing(3)})),Z=(0,S.ZP)(o.Z,{name:"DropButton",slot:"DropButton"})(({theme:e,isOver:t})=>({...t&&{backgroundColor:e.palette.action.hover}})),O=(0,S.ZP)("div",{name:"MultipleUploadField",slot:"PreviewItem"})(({theme:e})=>({width:"100%",paddingBottom:"56%",borderRadius:8,background:e.palette.grey.A700,position:"relative",overflow:"hidden"})),M=(0,S.ZP)("video",{name:"MultipleUploadField",slot:"PreviewVideo"})({position:"absolute",left:0,top:0,right:0,bottom:0,backgroundRepeat:"no-repeat",backgroundPosition:"center",maxWidth:"100%"}),_=(0,S.ZP)("div",{name:"MultipleUploadField",slot:"removeBtn"})(({theme:e})=>({width:e.spacing(3),height:e.spacing(3),borderRadius:e.spacing(1.5),backgroundColor:"rgba(0,0,0,0.89)",color:"#fff",position:"absolute",top:e.spacing(2),right:e.spacing(2),display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer"})),R=(0,S.ZP)("div",{name:"MultipleUploadField",slot:"AddMoreBtnWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",border:e.mixins.border("primary"),borderRadius:e.shape.borderRadius,height:"100%",button:{width:"100% !important",height:"100% !important"},"&:before":{content:'""',display:"block",paddingBottom:"56%"}})),z=(0,S.ZP)("div",{name:"MultipleUploadField",slot:"PreviewVideoWrapper"})(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",height:"100%"})),W=(0,S.ZP)("div",{name:"MultipleUploadField",slot:"MaskPlay"})(({theme:e})=>({position:"absolute",width:e.spacing(5),height:e.spacing(5),color:"#fff",backgroundColor:"rgba(0,0,0,0.4)",borderRadius:"50%",left:"50%",top:"50%",marginLeft:e.spacing(-2.5),marginTop:e.spacing(-2.5),display:"flex",alignItems:"center",justifyContent:"center",fontSize:e.mixins.pxToRem(24)}));var I=function({config:e,uploadFiles:t,setFiles:a,checkFilesSize:i}){let{accept:r}=e,{i18n:o,getSetting:l}=(0,n.OgA)(),s=(0,d.useRef)(),c=(0,m.Z)(),g=(0,u.Z)(c.breakpoints.down("sm")),h=l("photo.photo_allow_uploading_video_to_photo_album");t=t.filter(e=>!e.id);let f=()=>{s.current.click()},v=()=>{let e=s.current.files;e.length&&i(Object.values(e))},b=e=>a(t=>t.filter(t=>t.uid!==e));return d.createElement(p.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:g?"90vh":352},d.createElement(P,null,d.createElement("input",{ref:s,type:"file","aria-hidden":!0,className:"srOnly",multiple:!0,accept:r,onChange:v}),d.createElement(C.ZP,{container:!0,columnSpacing:1,rowSpacing:1},d.createElement(C.ZP,{item:!0,sm:6,md:4},d.createElement(R,null,d.createElement(Z,{size:"large",color:"primary",startIcon:d.createElement(w.zb,{icon:"ico-photos-plus-o"}),sx:{fontWeight:"bold"},onClick:f},h?o.formatMessage({id:"select_files"}):o.formatMessage({id:"add_photos"})))),null==t?void 0:t.map((e,t)=>{var a,i;return d.createElement(C.ZP,{item:!0,key:e.uid,sm:6,md:4,xs:6},d.createElement(O,null,(null==e?void 0:null===(a=e.file)||void 0===a?void 0:a.type.match(/image\/*/i))?d.createElement(E.Z,{item:e}):null,(null==e?void 0:null===(i=e.file)||void 0===i?void 0:i.type.match(/video\/*/i))?d.createElement(z,null,d.createElement(M,{src:e.source,controls:!1}),d.createElement(W,null,d.createElement(w.zb,{icon:"ico-play"}))):null,d.createElement(k.Z,{title:o.formatMessage({id:"remove"})},d.createElement(_,{onClick:()=>b(e.uid)},d.createElement(w.zb,{icon:"ico-close"})))))}))))},N=a(2597);function T(){return(T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function A({config:e,fileItems:t,setFileItems:a,isDetailAlbum:p=!1,formik:u}){var m,g,h,f;let{useDialog:b,i18n:y,compactData:E}=(0,n.OgA)(),{dialogProps:w,closeDialog:C}=b(),S=v(),{dialogTitle:k,max_upload_filesize:P,upload_url:Z,isVideoUploadAllowed:O,acceptFail:M}=e||{},[_,R]=d.useState(0),[z,W,A]=(0,N.Z)({initialValues:[],upload_url:Z,maxSizeLimit:P,isAcceptVideo:O,messageAcceptFail:M}),j=(0,n.oHF)(r.T7,"photo_album","selectFromMyPhotos"),$=(0,n.oHF)(r.T7,"photo_album","selectFromGroupPhotos"),{apiUrl:L,apiParams:B}=$,D=(e,t)=>{R(t)},V=()=>{a([...t,...z]),C(),p&&setImmediate(u.submitForm)};return d.createElement(i.Vq,T({},w,{maxWidth:!1,fullWidth:!0,className:S.dialog}),d.createElement(i.$N,{className:S.dialogTitle},k||y.formatMessage({id:"add_photos_video"})),d.createElement(i.cZ,{className:S.dialogContent,sx:{overflow:"hidden !important"}},d.createElement(c.Z,{value:_,onChange:D,indicatorColor:"primary",textColor:"primary"},d.createElement(s.Z,{className:S.tab,disableRipple:!0,label:y.formatMessage({id:"upload"})}),d.createElement(s.Z,{className:S.tab,disableRipple:!0,label:y.formatMessage({id:"select_from_my_photos"})}),u&&(null==u?void 0:null===(m=u.values)||void 0===m?void 0:m.owner_type)==="group"&&d.createElement(s.Z,{className:S.tab,disableRipple:!0,label:y.formatMessage({id:"select_from_group_photos"})})),0===_&&d.createElement(I,{config:e,uploadFiles:z,setFiles:W,checkFilesSize:A}),1===_&&d.createElement(x,{fileItems:t,uploadFiles:z,setFiles:W,isDetailAlbum:p,albumId:null==u?void 0:null===(g=u.values)||void 0===g?void 0:g.album,dataSource:j}),2===_&&d.createElement(x,{fileItems:t,uploadFiles:z,setFiles:W,isDetailAlbum:p,albumId:null==u?void 0:null===(h=u.values)||void 0===h?void 0:h.album,dataSource:{apiUrl:L,apiParams:E(B,{user_id:null==u?void 0:null===(f=u.values)||void 0===f?void 0:f.owner_id})}})),d.createElement(l.Z,null,d.createElement(o.Z,{"data-testid":"buttonSubmit",role:"button",id:"buttonSubmit",autoFocus:!0,color:"primary",size:"medium",variant:"contained",onClick:V,sx:{minWidth:120},disabled:!z.length},y.formatMessage({id:"add_to_album"}))))}},10149:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var i=a(92114),n=a(85597),r=a(21241),o=a(41547),l=a(50130),s=a(70214),c=a(99164),d=a(61225),p=a(62097),u=a(67294),m=a(22410),g=a(73327),h=(0,m.Z)(e=>(0,g.Z)({dialog:{"& .MuiDialog-paper":{maxWidth:"720px !important"}},dialogTitle:{height:50,maxWidth:720,display:"flex"},dialogContent:{padding:e.spacing(0,2,2,2),maxWidth:720,height:426,overflow:"hidden"},scroll:{marginTop:e.spacing(3),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"350px !important"}},scrollAlbum:{marginTop:e.spacing(2),"& > *:first-of-type":{padding:e.spacing(.5),maxHeight:"406px !important"}},btnBack:{marginRight:`${e.spacing(1)} !important`,"& .ico":{flex:1}},tab:{textTransform:"uppercase",height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(5),"& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main}}}),{name:"ChooseCoverPhoto"});function f(){return(f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let v={spacing:1},b={xs:12,sm:6,md:4,lg:4,xl:4};function y({identity:e,onSuccess:t,onFailure:a}){let{useDialog:m,i18n:g,jsxBackend:y}=(0,n.OgA)(),{dialogProps:x,closeDialog:E}=m(),w=h(),C=y.get("photo.block.photoListingBlock"),[S,k]=u.useState(0),[P,Z]=u.useState(0),[O,M]=u.useState(""),[_,R]=u.useState(""),z=(0,p.Z)(),W=(0,d.Z)(z.breakpoints.down("sm")),I=e.split(".")[0],N=e.split(".")[3],T={close:E,onSuccess:t,onFailure:a,resource_name:I},A=`setCover/photo/${I}/${N}`,j={apiUrl:"/photo",apiParams:`user_id=${N}&sort=recent&limit=20`},$=`setCover/album/${I}/${N}`,L={apiUrl:"/photo-album",apiParams:`user_id=${N}&sort=recent&limit=20`},B=`setCover/photo-album/${I}/${_}/${N}`,D={apiUrl:"/photo",apiParams:`album_id=${_}&sort=recent&limit=20`},V=(e,t)=>{k(t)};return u.createElement(i.Vq,f({},x,{maxWidth:!1,fullWidth:!0,className:w.dialog}),u.createElement(i.$N,{className:w.dialogTitle},1===P&&u.createElement(l.Z,{size:"small",className:w.btnBack},u.createElement(o.zb,{icon:"ico-arrow-left",onClick:()=>Z(0)})),0===P?g.formatMessage({id:"choose_cover_photo"}):O),0===P&&u.createElement(i.cZ,{className:w.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(c.Z,{value:S,onChange:V,indicatorColor:"primary",textColor:"primary"},u.createElement(s.Z,{className:w.tab,disableRipple:!0,label:g.formatMessage({id:"latest_photos"})}),u.createElement(s.Z,{className:w.tab,disableRipple:!0,label:g.formatMessage({id:"albums"})})),0===S&&u.createElement(r.l$,{className:w.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:W?"90vh":352,style:{height:"auto"}},u.createElement(C,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:j,pagingId:A,itemView:"photo.itemView.chooseCoverPhoto",emptyPage:"core.block.no_content",gridContainerProps:v,gridItemProps:b,itemProps:T,blockLayout:"Profile - Clean Body Only"})),1===S&&u.createElement(r.l$,{className:w.scroll,autoHide:!0,autoHeight:!0,autoHeightMax:W?"90vh":352,style:{height:"auto"}},u.createElement(C,{canLoadMore:!0,dataSource:L,clearDataOnUnMount:!0,pagingId:$,emptyPage:"core.block.no_content",itemView:"photo_album.itemView.chooseCoverPhoto",gridContainerProps:v,gridItemProps:b,itemProps:{setId:e=>R(e),setStep:e=>Z(e),setName:e=>M(e)},blockLayout:"Profile - Clean Body Only"}))),1===P&&u.createElement(i.cZ,{className:w.dialogContent,sx:{overflow:"hidden !important"}},u.createElement(r.l$,{className:w.scrollAlbum,autoHide:!0,autoHeight:!0,autoHeightMax:W?"90vh":400,style:{height:"auto"}},u.createElement(C,{canLoadMore:!0,clearDataOnUnMount:!0,dataSource:D,pagingId:B,emptyPage:"core.block.no_content",itemView:"photo.itemView.chooseCoverPhoto",gridContainerProps:v,gridItemProps:b,itemProps:T,blockLayout:"Profile - Clean Body Only"}))))}},50474:function(e,t,a){a.r(t),a.d(t,{default:function(){return L}});var i=a(73327);let n=e=>(0,i.Z)({dialogTitle:{},dialogContent:{padding:0,display:"flex",flexDirection:"row"},dialogActions:{},leftSide:{width:360,display:"flex",flexDirection:"column",padding:`${e.spacing(2)} ${e.spacing(2)} ${e.spacing(2)} 0`},leftSideActions:{display:"flex",flex:1,flexDirection:"column",padding:e.spacing(2,0)},leftSideBottom:{display:"flex",flexDirection:"row","& > :first-of-type":{marginRight:e.spacing(1)}},mainContent:{display:"flex",flexDirection:"column",backgroundColor:e.palette.background.default,width:720,height:600,position:"relative",textAlign:"center"},mask:{position:"absolute",left:0,right:0,top:0,bottom:0,backgroundColor:"rgba(0,0,0,0.6)"},backdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",left:0,right:0,top:0,bottom:0},blurContainer:{width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"},blurImg:{objectFit:"cover",width:"100%",height:"100%",border:0},mediaContainer:{position:"relative",maxWidth:"100%",height:"100%",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",padding:e.spacing(2),flexGrow:1},mediaWrapper:{maxHeight:"100%",position:"relative",justifyContent:"center",alignItems:"center",display:"flex"},largeImage:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain",position:"relative"},largeImageCropping:{},imageError:{color:"white",fontSize:e.mixins.pxToRem(20)}});var r=a(61366),o=a(85597),l=a(92114),s=a(41547),c=a(21822),d=a(22949),p=a(86010),u=a(67294),m=a(22410),g=(0,m.Z)(e=>(0,i.Z)({root:{top:200,left:200,width:200,height:200,position:"absolute",transform:"translate3d(0, 0, 0)",boxSizing:"border-box",cursor:"move",boxShadow:"0 0 0 9999em rgba(0, 0, 0, 0.5)",touchAction:"manipulation",border:"1px solid rgba(255,255,255, 0.9)"},disabled:{cursor:"inherit","& $dragHandle":{cursor:"inherit"}},circular:{borderRadius:"50%",boxShadow:"0px 0px 1px 1px white, 0 0 0 9999em rgba(0, 0, 0, 0.5)"},rootInvisible:{display:"none"},dragHandle:{position:"absolute","&::after":{position:"absolute",content:"''",display:"block",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"rgba(255,255,255, 0.5)",border:"1px solid rgba(255, 255, 255, 0.7)",boxSizing:"border-box",outline:"1px solid transparent"}},ordNW:{top:"0",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"nw-resize","&::after":{top:0,left:0}},ordN:{top:"0",left:"50%",marginTop:"-5px",marginLeft:"-5px",cursor:"n-resize","&::after":{top:"0"}},ordNE:{top:"0",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"ne-resize","&::after":{top:"0",right:"0"}},ordE:{top:"50%",right:"0",marginTop:"-5px",marginRight:"-5px",cursor:"e-resize","&::after":{right:"0"}},ordSE:{bottom:"0",right:"0",marginBottom:"-5px",marginRight:"-5px",cursor:"se-resize","&::after":{bottom:"0",right:"0"}},ordS:{bottom:"0",left:"50%",marginBottom:"-5px",marginLeft:"-5px",cursor:"s-resize","&::after":{bottom:"0"}},ordSW:{bottom:"0",left:"0",marginBottom:"-5px",marginLeft:"-5px",cursor:"sw-resize","&::after":{bottom:"0",left:"0"}},ordW:{top:"50%",left:"0",marginTop:"-5px",marginLeft:"-5px",cursor:"w-resize","&::after":{left:"0"}},dragBar:{position:"absolute","& $ordN":{top:"0",left:"0",width:"100%",height:"6px",marginTop:"-3px"},"& $ordE":{right:"0",top:"0",width:"6px",height:"100%",marginRight:"-3px"},"& $ordS":{bottom:"0",left:"0",width:"100%",height:"6px",marginBottom:"-3px"},"& $ordW":{top:"0",left:"0",width:"6px",height:"100%",marginLeft:"-3px"}},fixedAspect:{"& $dragHandle.$ordN":{display:"none"},"& $dragHandle.$ordE":{display:"none"},"& $dragHandle.$ordS":{display:"none"},"& $dragHandle.$ordW":{display:"none"}},"@media (pointer: coarse)":{ordN:{display:"none"},ordE:{display:"none"},ordS:{display:"none"},ordW:{display:"none"},dragHandle:{width:"24px",height:"24px"}}}),{name:"ImageCropperSelection"}),h=u.forwardRef(function({onMounted:e,onMouseDown:t,onTouchStart:a,style:i},n){let r=g();return u.useEffect(()=>{e&&e()},[]),u.createElement("div",{onMouseDown:t,onTouchStart:a,className:r.root,style:i,ref:n},u.createElement("div",{className:(0,p.default)(r.dragBar,r.ordN),"data-ord":"n"}),u.createElement("div",{className:(0,p.default)(r.dragBar,r.ordE),"data-ord":"e"}),u.createElement("div",{className:(0,p.default)(r.dragBar,r.ordS),"data-ord":"s"}),u.createElement("div",{className:(0,p.default)(r.dragBar,r.ordW),"data-ord":"w"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordNW),"data-ord":"nw"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordN),"data-ord":"n"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordNE),"data-ord":"ne"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordE),"data-ord":"e"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordSE),"data-ord":"se"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordS),"data-ord":"s"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordSW),"data-ord":"sw"}),u.createElement("div",{className:(0,p.default)(r.dragHandle,r.ordW),"data-ord":"w"}))});function f(e){let t,a;return e.touches?[{pageX:t,pageY:a}]=e.touches:{pageX:t,pageY:a}=e,{x:t,y:a}}function v(e,t,a){return Math.min(Math.max(e,t),a)}function b(e){return"n"===e?"s":"ne"===e?"sw":"e"===e?"w":"se"===e?"nw":"s"===e?"n":"sw"===e?"ne":"w"===e?"e":"nw"===e?"se":e}function y(e,t,a){return"%"===e.unit?e:{unit:"%",aspect:e.aspect,x:e.x/t*100,y:e.y/a*100,width:e.width?e.width/t*100:100,height:e.height?e.height/a*100:100}}function x(e,t,a){return"px"===e.unit?e:{unit:"px",aspect:e.aspect,x:e.x*t/100,y:e.y*a/100,width:e.width?e.width*t/100:t,height:e.height?e.height*a/100:a}}let E={x:0,y:0,unit:"px",aspect:0},w={xOrds:["e","w"],yOrds:["n","s"],xyOrds:["nw","ne","se","sw"],nudgeStep:1,nudgeStepMedium:10,nudgeStepLarge:100},C=e=>(0,i.Z)({root:{fontSize:"1rem",justifyContent:"flex-start !important",marginBottom:"12px !important","&.Mui-disabled":{"& .MuiButton-startIcon":{borderColor:`${e.palette.action.disabled} !important`}}},startIcon:{width:"32px",height:"32px",fontSize:"15px",borderRadius:"50%",alignItems:"center",textAlign:"center",lineHeight:"32px",justifyContent:"center",border:`1px solid ${e.palette.primary.main}`},label:{}});var S=(0,r.Z)(C)(c.Z),k=a(13478),P=a(11770),Z=a(33651),O=a(81719);let M="PhotoTag",_=(0,O.ZP)("div",{name:M,slot:"root",shouldForwardProp:e=>"tagging"!==e&&"px"!==e&&"py"!==e&&"hovering"!==e&&"forceShow"!==e})(({theme:e,tagging:t,px:a,py:i,hovering:n,forceShow:r})=>({position:"absolute",width:t?10:100,height:t?10:100,transform:"translate(-50%,-50%)","&:hover > div:first-of-type":{visibility:"visible"},...(t||r)&&{"& > div:first-of-type":{visibility:"visible"}},zIndex:n?10:"auto",...a&&i&&{left:`${a}%`,top:`${i}%`}})),R=(0,O.ZP)("div",{name:M,slot:"Item"})(({theme:e})=>({position:"absolute",backgroundColor:"rgba(255,255,255,.8)",borderRadius:e.shape.borderRadius,overflow:"hidden",textOverflow:"ellipsis",maxWidth:"120px",textAlign:"center",display:"flex",alignItems:"center",padding:e.spacing(.5),transform:"translate(-50%,-50%)",left:"50%",top:"50%",visibility:"hidden"})),z=(0,O.ZP)(c.Z,{name:M,slot:"ButtonStyled"})(({theme:e})=>({color:"light"===e.palette.mode?e.palette.grey.A700:e.palette.grey["800"],minWidth:"11px",padding:e.spacing(.5,1),margin:e.spacing(-.5),fontSize:e.mixins.pxToRem(11)})),W=(0,O.ZP)("span",{name:M,slot:"LabelStyled"})(({theme:e})=>({margin:"0 4px"}));function I({content:e,px:t,py:a,tagging:i,onRemove:n,forceShow:r}){let[o,l]=u.useState(!1);return u.createElement(_,{px:t,py:a,tagging:i,hovering:o,forceShow:r},u.createElement(R,{onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1)},u.createElement(W,null,null==e?void 0:e.label),i?u.createElement(z,{disableRipple:!0,disableFocusRipple:!0,onClick:t=>{return n(t,null==e?void 0:e.id)}},u.createElement(s.zb,{icon:"ico-close"})):null))}var N=a(49249);let T=(0,m.Z)(e=>(0,i.Z)({root:{},image:{maxWidth:"100%",maxHeight:"100vh",float:"left",opacity:0,[e.breakpoints.down("sm")]:{maxHeight:"350px"}},imageHeightAuto:{maxHeight:"initial",[e.breakpoints.down("sm")]:{maxHeight:"350px"}},visibleImage:{opacity:1},boxFake:{position:"absolute",top:0,right:0,left:0,objectFit:"cover",display:"flex",alignItems:"center",justifyContent:"center"},imageFake:{width:"100%",height:"auto"},actionBar:{position:"absolute",right:0,top:0,padding:e.spacing(1),display:"flex",justifyContent:"flex-end",zIndex:1,alignItems:"center"},tagFriend:{color:"#fff !important",width:32,height:32,fontSize:e.mixins.pxToRem(15)},dropDown:{color:"#fff",minWidth:"32px",height:"32px",fontSize:e.mixins.pxToRem(15)},taggedBox:{position:"absolute",left:0,top:0,width:"100px",height:"100px",border:"2px solid",borderColor:e.palette.background.paper,boxShadow:e.shadows[20],transform:"translate(-50%,-50%)"},suggestFriend:{backgroundColor:e.mixins.backgroundColor("paper"),marginTop:"10px",marginLeft:"-70px",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,"&  .MuiFilledInput-root":{background:"none"}},smallAvatar:{width:"24px",height:"24px",marginRight:e.spacing(1)},whoIsThis:{height:"100px",width:"100%"},popper:{zIndex:e.zIndex.snackbar,backgroundColor:e.mixins.backgroundColor("paper"),padding:e.spacing(1),boxShadow:e.shadows[20],borderRadius:e.shape.borderRadius,margin:e.spacing(1,0),width:"240px","& .MuiAutocomplete-paper":{boxShadow:"none"},"& .MuiAutocomplete-listbox":{padding:0},"& .MuiAutocomplete-option":{borderRadius:e.shape.borderRadius,padding:"6px 8px"},"& .MuiAutocomplete-root":{maxWidth:"224px"},"& .MuiFilledInput-underline:after":{display:"none"},"& .MuiAutocomplete-endAdornment":{display:"none"},"& .MuiFilledInput-underline:before":{display:"none"},"& .MuiFilledInput-root":{background:"none",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius},"& .MuiAutocomplete-noOptions":{padding:e.spacing(1.5,1)}},tagItem:{display:"flex",alignItems:"center",width:"100%",padding:e.spacing(1,0),textAlign:"left",cursor:"pointer"},userName:{flexGrow:1,whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",display:"block",fontSize:e.mixins.pxToRem(14)},inputBaseBox:{"& input":{width:"100%",border:e.mixins.border("secondary"),borderRadius:e.shape.borderRadius,padding:e.spacing(1),fontSize:e.mixins.pxToRem(15),"&:focus":{border:e.mixins.border("secondary"),outline:"none"}}},message:{color:"#fff",margin:e.spacing(0,1)},iconButton:{color:"white"},clear:{clear:"both"}}),{name:"EditPreviewPhotoTag"});function A(){return(A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let j={top:0,left:0,width:"100%",height:"100%"},$=e=>{return{x:null==e?void 0:e.left,y:null==e?void 0:e.top,width:null==e?void 0:e.width,height:null==e?void 0:e.height}};var L=(0,r.Z)(n)(function({classes:e,dialogTitle:t="Edit Photos",item:a,hideTextField:i=!1,tagging:n}){var r,m;let{useDialog:g,i18n:C}=(0,o.OgA)(),{dialogProps:O,closeDialog:M,setDialogValue:_}=g(),[R]=u.useState(a),[z,W]=u.useState("loading"),[L,B]=u.useState(0),[D,V]=u.useState({x:0,y:0}),[F,H]=u.useState(n?"tag":void 0),q=u.useRef(),U=u.useRef(),Y=u.useRef(),X=u.useRef(),G=(0,k.Q4)(null==R?void 0:R.image),[Q,J]=u.useState(R.base64||R.source||G),K=u.useRef(),ee=u.useRef((null==R?void 0:R.tagged_friends)||[]),[et,ea]=u.useState((null==R?void 0:R.tagged_friends)||[]),ei=T(),{user:en}=(0,o.kPO)(),er=e=>{ea(t=>[...t,e])},eo=(e,t)=>{e.stopPropagation(),ea(e=>{return e.filter(e=>{var a;return(null===(a=e.content)||void 0===a?void 0:a.id)!==t})})},el=(e,t)=>{e.stopPropagation(),ea(e=>e.filter(e=>e.id!==t))},{onClickImageBox:es,setTagging:ec,tagging:ed,offsetTag:ep,openTagBox:eu,chooseFriendToTag:em}=function({imageRef:e,onAddPhotoTag:t,onRemovePhotoTag:a,ready:i}){let[n,r]=u.useState({px:0,py:0}),[o,l]=u.useState(!1),[s,c]=u.useState(!1),[d,p]=u.useState({width:0,height:0}),m=e=>{let t=e.getBoundingClientRect();p({width:t.width,height:t.height})},g=e=>{if(!s)return;let t=e.currentTarget.getBoundingClientRect(),a=Math.max(Math.min(e.clientX-t.left,d.width-50),50)/d.width*100,i=Math.max(Math.min(e.clientY-t.top,d.height-50),50)/d.height*100;r({px:a,py:i}),s&&l(!0)},h=e=>{let{px:a,py:i}=n;t({content:e,px:a,py:i}),l(!1)};return u.useEffect(()=>{i&&(null==e?void 0:e.current)&&m(null==e?void 0:e.current)},[i,null==e?void 0:e.current]),{chooseFriendToTag:h,onClickImageBox:g,tagging:s,setTagging:c,offsetTag:n,openTagBox:o}}({imageRef:Y,onAddPhotoTag:er,ready:"success"===z}),eg=u.useMemo(()=>{return null!==(m=null==R?void 0:R.text)&&void 0!==m?m:""},[null==R?void 0:R.text]),[eh,ef]=u.useState(eg),[ev,eb]=u.useState(),ey=u.useCallback(()=>{W("success")},[]),ex=u.useCallback(()=>{W("error")},[]),eE=u.useCallback((e,t)=>{},[]),{getCropStyle:ew,onFulfillSelection:eC,cropSelectionStyle:eS,onComponentMouseTouchDown:ek,onCropMouseTouchDown:eP}=function({imageContainerRef:e,imageWrapperRef:t,cropSelectionRef:a,imageRef:i,crop:n,minWidth:r=0,maxWidth:o=0,minHeight:l=0,maxHeight:s=0,disabled:c,locked:d,keepSelection:p,onComplete:m,onChange:g,onDragStart:h,onDragEnd:C}){let S=window.document,k=u.useRef(),[P,Z]=u.useState({}),O=u.useRef(!1),M=u.useRef(!1),_=u.useRef(Object.assign({},E,n)),R=u.useCallback(()=>{if(!t.current)return{width:0,height:0};let{clientWidth:e,clientHeight:a}=t.current;return{width:e,height:a}},[t]),z=u.useCallback(e=>{let t=_.current,{width:a,height:i}=R();return"px"===e?x(t,a,i):y(t,a,i)},[R]),W=u.useCallback(()=>{let{clientTop:e=0,clientLeft:t=0}=window.document.documentElement||{};return{clientTop:e,clientLeft:t}},[]),I=u.useCallback(()=>{let{pageYOffset:e=0,pageXOffset:t=0}=window;return{pageYOffset:e,pageXOffset:t}},[]),N=u.useCallback(e=>{let t=e.getBoundingClientRect(),a=W(),i=I(),n=t.top+i.pageYOffset-a.clientTop,r=t.left+i.pageXOffset-a.clientLeft;return{top:n,left:r}},[W,I]),T=u.useCallback(()=>{let e=z("%");return{top:`${e.y}${e.unit}`,left:`${e.x}${e.unit}`,width:`${e.width}${e.unit}`,height:`${e.height}${e.unit}`}},[z]),A=u.useCallback(()=>{let e;let{width:t,height:a}=R(),i=_.current,n=k.current.cropStartWidth+k.current.xDiff;return k.current.xCrossOver&&(n=Math.abs(n)),n=v(n,r,o||t),e=i.aspect?n/i.aspect:k.current.cropStartHeight+k.current.yDiff,k.current.yCrossOver&&(e=Math.min(Math.abs(e),k.current.cropStartY)),e=v(e,l,s||a),i.aspect&&(n=v(e*i.aspect,0,t)),{width:n,height:e}},[R,s,o,l,r]),j=u.useCallback(()=>{let e=z("px"),{width:t,height:a}=R();return e.x=v(k.current.cropStartX+k.current.xDiff,0,t-e.width),e.y=v(k.current.cropStartY+k.current.yDiff,0,a-e.height),e},[R,z]),$=u.useCallback(()=>{let e=z("px"),{width:t,height:i}=R();if(e.width=t,e.height=i,e.x=0,e.y=0,g&&g(x(e,t,i),y(e,t,i)),e.width&&e.height){let{left:n,top:r,width:o,height:l}=T();a.current.style.left=n,a.current.style.top=r,a.current.style.width=o,a.current.style.height=l}},[a,T,R,z,g]),L=u.useCallback(()=>{!r&&(!k.current.xCrossOver&&0<=-Math.abs(k.current.cropStartWidth)-k.current.xDiff||k.current.xCrossOver&&0>=-Math.abs(k.current.cropStartWidth)-k.current.xDiff)&&(k.current.xCrossOver=!k.current.xCrossOver),!l&&(!k.current.yCrossOver&&0<=-Math.abs(k.current.cropStartHeight)-k.current.yDiff||k.current.yCrossOver&&0>=-Math.abs(k.current.cropStartHeight)-k.current.yDiff)&&(k.current.yCrossOver=!k.current.yCrossOver);let e=k.current.xCrossOver!==k.current.startXCrossOver,t=k.current.yCrossOver!==k.current.startYCrossOver;k.current.inversedXOrd=!!e&&b(k.current.ord),k.current.inversedYOrd=!!t&&b(k.current.ord)},[l,r]),B=u.useCallback(()=>{let e=z("px"),{ord:t}=k.current;k.current.xInversed&&(k.current.xDiff-=2*k.current.cropStartWidth,k.current.xDiffPc-=2*k.current.cropStartWidth),k.current.yInversed&&(k.current.yDiff-=2*k.current.cropStartHeight,k.current.yDiffPc-=2*k.current.cropStartHeight);let a=A(),i=k.current.cropStartX,n=k.current.cropStartY;k.current.xCrossOver&&(i=e.x+(e.width-a.width)),k.current.yCrossOver&&(n=!1===k.current.lastYCrossover?e.y-a.height:e.y+(e.height-a.height));let r=_.current,{width:o,height:l}=R(),s=function(e,t,a,i){let n=x(t,a,i),r=x(e,a,i),o={...n};if(!n.aspect)return 0>n.x?(o.x=0,o.width+=n.x):n.x+n.width>a&&(o.width=a-n.x),n.y+n.height>i&&(o.height=i-n.y),o;let l=!1;0>n.x?(o.x=0,o.width+=n.x,o.height=o.width/n.aspect,l=!0):n.x+n.width>a&&(o.width=a-n.x,o.height=o.width/n.aspect,l=!0),l&&r.y>o.y&&(o.y=n.y+(n.height-o.height));let s=!1;return o.y+o.height>i&&(o.height=i-n.y,o.width=o.height*n.aspect,s=!0),s&&r.x>o.x&&(o.x=n.x+(n.width-o.width)),o}(r,{unit:e.unit,x:i,y:n,width:a.width,height:a.height,aspect:e.aspect},o,l);return e.aspect||-1<w.xyOrds.indexOf(t)?(e.x=s.x,e.y=s.y,e.width=s.width,e.height=s.height):-1<w.xOrds.indexOf(t)?(e.x=s.x,e.width=s.width):-1<w.yOrds.indexOf(t)&&(e.y=s.y,e.height=s.height),k.current.lastYCrossover=k.current.yCrossOver,L(),e},[L,R,A,z]),D=(0,u.useCallback)(e=>{let t;let i=_.current;if(c||!O.current)return;e.preventDefault(),!M.current&&(M.current=!0,h&&h(e));let n=f(e);if(k.current.isResize&&i.aspect&&k.current.cropOffset&&(n.y=H(n.x)),k.current.xDiff=n.x-k.current.clientStartX,k.current.yDiff=n.y-k.current.clientStartY,(t=k.current.isResize?B():j())!==i){let{width:r,height:o}=R();g&&g(x(t,r,o),y(t,r,o))}if(t.width&&t.height){let{left:l,top:s,width:d,height:p}=T();a.current.style.left=l,a.current.style.top=s,a.current.style.width=d,a.current.style.height=p}},[]),V=u.useCallback(e=>{if(F(),c)return;let t=_.current;if(O.current){O.current=!1,M.current=!1;let{width:a,height:i}=R();C&&C(e),m&&m(x(t,a,i),y(t,a,i)),Z(e=>({...e,cropIsActive:!1,newCropIsBeingDrawn:!1}))}},[c,R,m,C,F]);var F=u.useCallback(()=>{S.removeEventListener("mousemove",D),S.removeEventListener("touchmove",D),S.removeEventListener("mouseup",V),S.removeEventListener("touchend",V),S.removeEventListener("touchcancel",V)},[S,V,D]);let H=u.useCallback(e=>{let t,a;let{ord:i,cropOffset:n,cropStartWidth:r,cropStartHeight:o}=k.current;return"nw"===i||"se"===i?(t=o/r,a=n.top-n.left*t):(t=-o/r,a=n.top+(o-n.left*t)),t*e+a},[]),q=u.useCallback(()=>{S.addEventListener("mousemove",D),S.addEventListener("touchmove",D,{passing:!1}),S.addEventListener("mouseup",V),S.addEventListener("touchend",V,{passing:!1}),S.addEventListener("touchcancel",V,{passing:!1})},[S,V,D]),U=t=>{let i;let n=_.current,{width:r,height:o}=R(),l=x(n,r,o);if(c)return;t.preventDefault(),q();let s=f(t);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let{ord:d}=t.target.dataset,p="nw"===d||"w"===d||"sw"===d,u="nw"===d||"n"===d||"ne"===d;l.aspect&&(i=N(a.current)),k.current={clientStartX:s.x,clientStartY:s.y,cropStartWidth:l.width,cropStartHeight:l.height,cropStartX:p?l.x+l.width:l.x,cropStartY:u?l.y+l.height:l.y,xInversed:p,yInversed:u,xCrossOver:p,yCrossOver:u,startXCrossOver:p,startYCrossOver:u,isResize:t.target.dataset.ord,ord:d,cropOffset:i,xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},O.current=!0,Z(e=>({...e,cropIsActive:!0}))},Y=a=>{var i;let n=_.current;if(!t.current)return;let r=t.current.firstChild;if(a.target!==r||!r.contains(a.target)||c||d||p&&(i=n)&&!isNaN(i.width)&&!isNaN(i.height))return;a.preventDefault(),q();let o=f(a);e.current.setActive?e.current.setActive({preventScroll:!0}):e.current.focus({preventScroll:!0});let l=N(t.current),s=o.x-l.left,u=o.y-l.top,m={unit:"px",aspect:n?n.aspect:void 0,x:s,y:u,width:0,height:0};k.current={clientStartX:o.x,clientStartY:o.y,cropStartWidth:m.width,cropStartHeight:m.height,cropStartX:m.x,cropStartY:m.y,xInversed:!1,yInversed:!1,xCrossOver:!1,yCrossOver:!1,startXCrossOver:!1,startYCrossOver:!1,isResize:!0,ord:"nw",xDiff:0,yDiff:0,xDiffPc:0,yDiffPc:0},O.current=!0;let{width:h,height:v}=R();g&&g(x(m,h,v),y(m,h,v)),Z(e=>({...e,cropIsActive:!0,newCropIsBeingDrawn:!0}))},X=u.useCallback(()=>{let e=z("%"),t=0!==e.x||0!==e.y||100!==e.height||100!==e.width;return[t,e]},[z]);return{getCropStyle:T,cropSelectionStyle:T(),onFulfillSelection:$,getCropValue:X,onCropMouseTouchDown:U,onComponentMouseTouchDown:Y}}({imageContainerRef:q,imageWrapperRef:U,imageRef:Y,cropSelectionRef:X,onChange:eE}),eZ=u.useCallback(()=>{"crop"!==F&&H("crop")},[F]),eO=u.useCallback(()=>{V(e=>({...e,x:e.x?0:1})),"flip"!==F&&H("flip")},[F]),eM=u.useCallback(()=>{V(e=>({...e,y:e.y?0:1})),"flip"!==F&&H("flip")},[F]),e_=u.useCallback(()=>{"rotate"!==F&&H("rotate"),B(e=>(e+90)%360)},[F]),eR=u.useCallback(()=>{"tag"!==F&&H("tag")},[F]);u.useEffect(()=>{ec("tag"===F)},[F,ec]);let ez=u.useCallback(()=>{"tag"===F&&ea(ee.current),J(Q||R.source||G),H(void 0),V({x:0,y:0}),B(0)},[R.source,G,Q,ee.current,F]),eW=async()=>{let e="crop"===F?ew():j,t=$(e),a=await (0,k.m4)(ev||Q,t,"base64",L,!!(null==D?void 0:D.x),!!(null==D?void 0:D.y),"%");return V({x:0,y:0}),B(0),a&&eb(a),!0},eI=u.useCallback(async()=>{if("tag"===F)ee.current=et,H(null);else{let e=await eW();e&&H(null)}},[eh,eS,Q,L,D]),eN=u.useCallback(()=>{_({text:eh,base64:ev,tagged_friends:et.map(e=>{var t,a;return{...e,user_id:(null===(t=e.content)||void 0===t?void 0:t.id)||(null===(a=e.user)||void 0===a?void 0:a.id)}})})},[eh,ev,et]),eT=(0,p.default)(e.mediaWrapper),eA=(0,p.default)(e.largeImage,F&&e.largeImageCropping),ej=u.useCallback(e=>{return"success"!==z||F&&e!==F},[z,F]),e$=L?`rotate(${L}deg)`:"",eL=D.x||D.y?`scale(${D.x?-1:1}, ${D.y?-1:1})`:"",eB={transform:`${e$} ${eL}`},eD=e=>{let t=e.target.value;ef(t)};return u.createElement(l.Vq,A({},O,{disableBackdropClick:!0,scroll:"body",maxWidth:"lg"}),u.createElement(l.$N,{className:e.dialogTitle},t),u.createElement(l.cZ,{className:e.dialogContent},u.createElement("div",{className:e.leftSide},i?null:u.createElement("div",{className:e.composerContainer},u.createElement(d.Z,{variant:"outlined",disabled:"success"!==z,placeholder:C.formatMessage({id:"caption"}),fullWidth:!0,multiline:!0,rows:4,InputLabelProps:{shrink:!0},value:eh,className:e.composer,onChange:eD})),u.createElement("div",{className:e.leftSideActions},(null===(r=en.extra)||void 0===r?void 0:r.can_tag_friend)&&u.createElement(S,{disabled:ej("tag"),startIcon:u.createElement(s.zb,{icon:"ico-price-tag"}),children:C.formatMessage({id:"tags"}),onClick:eR}),u.createElement(S,{disabled:ej("crop"),startIcon:u.createElement(s.zb,{icon:"ico-arrow-collapse"}),children:C.formatMessage({id:"crop"}),onClick:eZ}),u.createElement(S,{disabled:ej("rotate"),startIcon:u.createElement(s.zb,{icon:"ico-rotate-right-alt"}),children:C.formatMessage({id:"rotate"}),onClick:e_}),u.createElement(S,{disabled:ej("flip"),startIcon:u.createElement(s.zb,{icon:"ico-flip-v"}),children:C.formatMessage({id:"flip_vertical"}),onClick:eO}),u.createElement(S,{disabled:ej("flip"),startIcon:u.createElement(s.zb,{icon:"ico-flip-h"}),children:C.formatMessage({id:"flip_horizontal"}),onClick:eM})),u.createElement("div",{className:e.leftSideBottom},F?u.createElement(c.Z,{disabled:"success"!==z,variant:"contained",color:"primary",onClick:eI},C.formatMessage({id:"save_changes"})):null,F?u.createElement(c.Z,{disabled:"success"!==z,variant:"outlined",color:"primary",onClick:ez},C.formatMessage({id:"discard"})):null,F?null:u.createElement(c.Z,{disabled:!z,variant:"contained",color:"primary",onClick:eN},C.formatMessage({id:"save"})),F?null:u.createElement(c.Z,{disabled:!z,variant:"outlined",color:"primary",onClick:M},C.formatMessage({id:"cancel"})))),u.createElement("div",{className:e.mainContent},u.createElement("div",{className:e.backdrop},u.createElement("div",{className:e.blurContainer},u.createElement("img",{draggable:!1,src:R.source||G,className:e.blurImg,alt:R.uid}))),u.createElement("div",{className:e.mask}),u.createElement("div",{className:e.mediaContainer,onMouseDown:ek,onTouchStart:ek,ref:q},u.createElement("div",{className:eT,ref:U,onClick:es},"error"!==z?u.createElement(u.Fragment,null,u.createElement("img",{draggable:!1,src:ev||Q,ref:Y,className:eA,onLoad:ey,style:eB,onError:ex,alt:R.uid}),u.createElement(P.Z,{open:ed&&eu,px:ep.px,py:ep.py,classes:ei,ref:K}),ed&&eu?u.createElement(Z.Z,{onItemClick:em,classes:ei,anchorRef:K,identity:(null==R?void 0:R.id)?`photo.entities.photo.${R.id}`:void 0,open:!0,excludeIds:et.map(e=>{var t,a;return(null==e?void 0:null===(t=e.content)||void 0===t?void 0:t.id)||(null==e?void 0:null===(a=e.user)||void 0===a?void 0:a.id)}),isFullFriend:!0}):null,et&&(null==et?void 0:et.length)?et.map(e=>{return(null==e?void 0:e.resource_name)==="photo_tag"?u.createElement(N.Z,{tagging:ed,identity:`${e.module_name}.entities.${e.resource_name}.${e.id}`,onRemove:el,classes:ei,isTypePreview:!0,forceShow:!0}):u.createElement(I,A({},e,{tagging:ed,onRemove:eo,forceShow:!0}))}):null):u.createElement("div",{className:e.imageError},C.formatMessage({id:"could_not_load_photo"})),"crop"===F&&"success"===z?u.createElement(h,{onMounted:eC,style:eS,ref:X,onMouseDown:eP,onTouchStart:eP}):null)))))})},23068:function(e,t,a){a.r(t),a.d(t,{default:function(){return R}});var i=a(73327);let n=e=>(0,i.Z)({dialogTitle:{},dialogContent:{backgroundColor:e.palette.background.default,minWidth:550,minHeight:500},dialogActions:{},itemListContainer:{display:"flex",flexWrap:"wrap",padding:e.spacing(2),justifyContent:"space-between"},isDragging:{},itemRoot:{width:"calc(50% - 8px)",backgroundColor:e.mixins.backgroundColor("paper"),marginBottom:e.spacing(2),borderRadius:e.spacing(1),boxShadow:e.shadows[2],"&:hover $autoHideButton":{visibility:"visible"},"&$isDragging":{border:"dashed 2px",borderColor:e.palette.primary.main}},itemMediaBackdrop:{backgroundColor:e.mixins.backgroundColor("paper"),textAlign:"center",overflow:"hidden",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",height:"33vh",borderTopLeftRadius:e.spacing(1),borderTopRightRadius:e.spacing(1)},itemBlur:{width:"10%",height:"10%",transform:"scale(14)",filter:"blur(3px)",WebkitFilter:"blur(3px)"},itemBlurImg:{objectFit:"cover",width:"100%",height:"100%",border:0},itemMediaContainer:{position:"relative",textAlign:"center"},itemMedia:{position:"absolute",objectFit:"contain",left:0,top:0,width:"100%",height:"100%"},itemComposerContainer:{padding:e.spacing(1)},itemComposer:{},autoHideButton:{visibility:"hidden"},closeButton:{position:"absolute",top:e.spacing(2),right:e.spacing(2)},tagButton:{position:"absolute",bottom:e.spacing(2),left:e.spacing(2)},editButton:{position:"absolute",left:e.spacing(2),top:e.spacing(2)}});var r=a(61366),o=a(85597),l=a(92114),s=a(21241),c=a(21822),d=a(30120),p=a(12902),u=a(27361),m=a.n(u),g=a(67294),h=a(41547),f=a(57043),v=a.n(f),b=a(44908),y=a.n(b),x=a(73955),E=a.n(x);function w({setItems:e,variant:t}){let{i18n:a}=(0,o.OgA)(),i=g.useRef(),n=g.useCallback(()=>{i.current.click()},[i]),r=g.useCallback(()=>{let t=i.current.files;if(!t.length)return;let a=[];for(let n=0;n<t.length;++n)a.push({uid:E()("file"),source:URL.createObjectURL(t.item(n)),file:t.item(n)});e(e=>{return y()(v()(e,a),"uid").filter(Boolean)})},[e]),l=(0,o.VW9)("video","video"),s="image/*";return l&&(s="image/*, video/*"),g.createElement(g.Fragment,null,"listing"===t?g.createElement(c.Z,{color:"primary",onClick:n,startIcon:g.createElement(h.zb,{icon:"ico-photos-plus-o"}),variant:"outlined"},a.formatMessage({id:"add_photos"})):g.createElement(c.Z,{color:"primary",onClick:n,variant:"outlined",startIcon:g.createElement(h.zb,{icon:"ico-plus"})},a.formatMessage({id:"add_photos"})),g.createElement("input",{onChange:r,multiple:!0,ref:i,className:"srOnly",type:"file",accept:s}))}var C=a(13478),S=a(22949),k=a(86010),P=a(60994),Z=a(86487);let O={PHOTO:"photo"};function M({id:e,index:t,item:a,movePhoto:i,editItem:n,removeItem:r,tagItem:l,editTextPhoto:s,classes:c}){var p,u;let{i18n:m}=(0,o.OgA)(),f=g.useRef(null),v=g.useMemo(()=>{return null!==(u=null==a?void 0:a.text)&&void 0!==u?u:""},[null==a?void 0:a.text]),[b,y]=g.useState(v),[,x]=(0,P.L)({accept:O.PHOTO,hover(e,a){var n;if(!f.current)return;let r=e.index;if(r===t)return;let o=null===(n=f.current)||void 0===n?void 0:n.getBoundingClientRect(),l=(o.bottom-o.top)/2,s=a.getClientOffset(),c=s.y-o.top;r<t&&c<l||r>t&&c>l||(i(r,t),e.index=t)}}),E=e=>{let t=e.target.value;y(t)};g.useEffect(()=>{b!==v&&s(a,b)},[b]),g.useEffect(()=>{y(null==a?void 0:a.text)},[null==a?void 0:a.text]);let[w,M]=(0,Z.c)({type:O.PHOTO,item:{type:O.PHOTO,id:e,index:t},collect:e=>({isDragging:e.isDragging()})}),_=w.isDragging?.5:.9999,R=w.isDragging?"isDragging":"";if(M(x(f)),a)return g.createElement("div",{"data-uid":a.uid,style:{cursor:"move",opacity:_},ref:f,className:(0,k.default)(c.itemRoot,R?c.isDragging:"")},g.createElement("div",{className:c.itemMediaContainer},g.createElement("div",{className:c.itemMediaBackdrop},(0,C.yh)(null===(p=a.file)||void 0===p?void 0:p.type)?g.createElement(g.Fragment,null,g.createElement("div",{className:c.itemBlur},g.createElement("video",{src:a.source,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:c.itemBlurImg})),g.createElement("video",{src:a.source,draggable:!1,controls:!1,autoPlay:!1,muted:!0,className:c.itemMedia})):g.createElement(g.Fragment,null,g.createElement("div",{className:c.itemBlur},g.createElement("img",{draggable:!1,src:a.base64||a.source||(0,C.Q4)(null==a?void 0:a.image),className:c.itemBlurImg,alt:a.uid})),g.createElement("img",{draggable:!1,src:a.base64||a.source||(0,C.Q4)(null==a?void 0:a.image),className:c.itemMedia,alt:a.uid})),g.createElement(d.Z,{className:(0,k.default)(c.editButton,c.autoHideButton)},g.createElement(h.Qh,{size:"small",color:"primary",icon:"ico-pencil",onClick:()=>n(a),title:m.formatMessage({id:"edit"})})),g.createElement(d.Z,{className:(0,k.default)(c.tagButton)},g.createElement(h.Qh,{onClick:()=>l(a),size:"small",color:"primary",icon:"ico-price-tag",title:m.formatMessage({id:"tag_friends"})})),g.createElement(d.Z,{className:(0,k.default)(c.closeButton,c.autoHideButton)},g.createElement(h.Qh,{size:"small",onClick:()=>r(a),color:"primary",icon:"ico-close",title:m.formatMessage({id:"remove"})})))),g.createElement("div",{className:c.itemComposerContainer},g.createElement(S.Z,{value:b,variant:"outlined",placeholder:m.formatMessage({id:"caption"}),fullWidth:!0,InputLabelProps:{shrink:!0},className:c.itemComposer,onChange:E})))}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var R=(0,r.Z)(n)(function({composerRef:e,classes:t,dialogTitle:a="edit_media"}){let{useDialog:i,i18n:n,dialogBackend:r}=(0,o.OgA)(),{dialogProps:u,closeDialog:h}=i(),[f,v]=g.useState(m()(e.current.state,"attachments.photo.value"));g.useEffect(()=>{e.current.setAttachments("photo","photo",{as:"StatusComposerControlAttachedPhotos",value:f})},[e,f]);let b=g.useCallback((e,t)=>{v((0,p.ZP)(f,a=>{let i=a.find(t=>{return(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id)});i&&Object.assign(i,t)}))},[f]),y=g.useCallback(e=>{r.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!1}}).then(t=>{t&&b(e,t)})},[r,b]),x=g.useCallback(e=>{v(t=>t.filter(t=>t.uid!==e.uid||t.id!==e.id))},[]),E=g.useCallback(e=>{r.present({component:"photo.dialog.EditPreviewPhotoDialog",props:{item:e,tagging:!0}}).then(t=>{t&&b(e,t)})},[r]),C=f.length,S=g.useCallback((e,t)=>{let a=f[e];v((0,p.ZP)(f,i=>{i.splice(e,1),i.splice(t,0,a)}))},[f]),k=g.useCallback((e,t)=>{v((0,p.ZP)(f,a=>{let i=a.find(t=>{return(null==e?void 0:e.uid)&&(null==t?void 0:t.uid)===e.uid||(null==e?void 0:e.id)&&(null==t?void 0:t.id)===(null==e?void 0:e.id)});i&&(i.text=t)}))},[f]);return g.createElement(l.Vq,_({},u,{fullWidth:!0}),g.createElement(l.$N,{className:t.dialogTitle},n.formatMessage({id:a})),g.createElement(s.l$,{className:t.dialogContent},g.createElement("div",{className:t.itemListContainer},C?f.map((e,a)=>g.createElement(M,{key:e.uid,index:a,id:e.uid,movePhoto:S,item:e,editItem:y,removeItem:x,tagItem:E,classes:t,editTextPhoto:k})):g.createElement(d.Z,{p:3,sx:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%"}},g.createElement(w,{variant:"listing",setItems:v})))),g.createElement(l.kX,{className:t.dialogActions},g.createElement(c.Z,{variant:"contained",color:"primary",onClick:h},n.formatMessage({id:"done"})),g.createElement(w,{setItems:v})))})},72425:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=a(85597),n=a(92114),r=a(41547),o=a(81719),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let c=(0,o.ZP)("div")(({theme:e})=>({position:"fixed",top:e.spacing(4),right:e.spacing(4),cursor:"pointer",width:e.spacing(5),height:e.spacing(5),fontSize:e.mixins.pxToRem(18),color:"light"===e.palette.mode?e.palette.background.paper:"#fff",display:"flex",alignItems:"center",justifyContent:"center",zIndex:"2"})),d=(0,o.ZP)(n.cZ)(({theme:e})=>({padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",zIndex:"1",flexFlow:"column"})),p=(0,o.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"center",position:"relative"})),u=(0,o.ZP)("img")(({theme:e})=>({maxHeight:" calc(100vh - 88px)",margin:"auto",maxWidth:"1280px",borderRadius:"8px"}));function m(e){let{useDialog:t}=(0,i.OgA)(),{src:a}=e,{dialogProps:o,closeDialog:m}=t();return l.createElement(n.Vq,s({},o,{"data-testid":"popupViewPhoto"}),l.createElement(c,{onClick:m},l.createElement(r.zb,{icon:"ico-close"})),l.createElement(d,{dividers:!1},l.createElement(p,null,l.createElement(u,{src:a,alt:"",style:{width:"100%"}}))))}},2597:function(e,t,a){a.d(t,{Z:function(){return d}});var i=a(85597),n=a(67294),r=a(41609),o=a.n(r),l=a(73955),s=a.n(l),c=a(13478);function d({initialValues:e,upload_url:t="",maxSizeLimit:a,isAcceptVideo:r=!0,messageAcceptFail:l}){let{dialogBackend:d,i18n:p}=(0,i.OgA)(),u=n.useRef(!0),[m,g]=n.useState([]),[h,f]=n.useState(e||[]),v=(null==a?void 0:a.photo)||(null==a?void 0:a.other)||0,b=(null==a?void 0:a.video)||(null==a?void 0:a.other)||0,y=e=>{let a=[],i=[];for(let n=0;n<e.length;++n){let o=e[n],u=o.size,m=(0,c.yh)(null==o?void 0:o.type)?b:v,g={id:0,uid:s()(),source:URL.createObjectURL(o),file_name:o.name,file_size:o.size,file_type:o.type,file:o,upload_url:t,type:o.type.match("image/*")?"photo":"video",status:"create"};if("video"===g.type&&!r){d.alert({message:l});break}u>m&&0!==m?(g.max_size=m,i.push(g)):a.push(g)}if(a.length&&f(e=>[...e||[],...a]),i.length>0){var h;d.alert({message:1===i.length?p.formatMessage({id:"warning_upload_limit_one_file"},{fileName:(0,c.TX)(i[0].file_name,30),fileSize:(0,c.jA)(i[0].file_size),maxSize:(0,c.jA)(null===(h=i[0])||void 0===h?void 0:h.max_size)}):p.formatMessage({id:"warning_upload_limit_multi_file"},{numberFile:i.length,photoMaxSize:(0,c.jA)(v),videoMaxSize:(0,c.jA)(b)})})}};return(0,n.useEffect)(()=>{if(u.current=!0,!o()(m))return y(m),()=>{u.current=!1}},[m]),[h,f,g]}},70949:function(e,t,a){a.r(t),a.d(t,{default:function(){return P}});var i=a(85597),n=a(30998),r=a.n(n),o=a(27361),l=a.n(o),s=a(92114),c=a(41547),d=a(30120),p=a(44373),u=a(81719),m=a(67294);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let h="ViewMediaModal",f=(0,u.ZP)(s.cZ,{name:h,slot:"root"})(({theme:e})=>({height:"100%",padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("sm")]:{flexFlow:"column",flexDirection:"column","& > div":{overflow:"inherit"}}})),v=(0,u.ZP)("div",{name:h,slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({display:t?"none":"block",height:"100%",width:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"45%"},[e.breakpoints.down("xs")]:{width:"100%",height:"420px"}})),b=(0,u.ZP)("div",{name:h,slot:"dialogVideo"})(({theme:e})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"}})),y=(0,u.ZP)("div",{name:h,slot:"dialogImage"})(({theme:e})=>({height:"100%",display:"flex",alignItems:"center",backgroundColor:"#000",width:"100%",justifyContent:"center",position:"relative",[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"55%"},[e.breakpoints.down("xs")]:{width:"100%",height:"auto",minHeight:"250px",maxHeight:"350px"}})),x=(0,u.ZP)("div",{name:h,slot:"nextPhoto",shouldForwardProp:e=>"displayPosition"!==e})(({theme:e,displayPosition:t})=>({left:"left"===t?e.spacing(2):"unset",right:"right"===t?e.spacing(2):"unset",display:"flex",alignItems:"center",backgroundColor:"rgba(0,0,0,0.4)",justifyContent:"center",position:"absolute",zIndex:1,padding:"10px",borderRadius:"50%",width:"30px",height:"30px",cursor:"pointer",color:"#FFF",top:"50%",transform:"translateY(-50%)",[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"55%"},[e.breakpoints.down("xs")]:{width:"100%",height:"auto",minHeight:"250px",maxHeight:"350px"}})),E=(0,u.ZP)("div",{name:h,slot:"HeaderAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,2)})),w=(0,u.ZP)("div",{name:h,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),C=(0,u.ZP)("div",{name:h,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),S=(0,u.ZP)(d.Z,{name:h,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"})),k=(e,{photo_set:t,photo_album:a,identity:i,photo_id:n,media_type:o})=>{let s=l()(e,i);if(!s)return{};let c=a?l()(e,`photo.entities.photo_album.${a}.photos`):l()(e,`photo.entities.photo_set.${t}.photos`),d=(null==s?void 0:s.user)?l()(e,s.user):void 0,p=null==c?void 0:c.length,u=1<p?r()(c,e=>e===i):-1,m=s.user_tags?s.user_tags.map(t=>l()(e,t)).filter(Boolean):[],g={item:s,photos:c,user:d,photo_id:n,user_tags:m,mediaType:o,nextUrl:void 0,prevUrl:void 0};if(-1<u){let h="/photo";if(t&&(h=`/media/${t}`),a&&(h=`/media/album/${a}`),u<p-1){let f=c[u+1],v=f.split(".")[2];g.nextUrl=`${h}/${v}/${f.replace(`${v}.entities.${v}.`,"")}`}if(0<u){let b=c[u-1],y=b.split(".")[2];g.prevUrl=`${h}/${y}/${b.replace(`${y}.entities.${y}.`,"")}`}}return g};var P=(0,i.$jX)(k)(function({item:e,identity:t,nextUrl:a,prevUrl:n,mediaType:r,loading:o}){let{jsxBackend:l,navigate:u,ItemDetailInteractionInModal:h,useDialog:k,dispatch:P,i18n:Z,useIsMobile:O,useGetItem:M,useGetItems:_}=(0,i.OgA)(),R=O(),[z,W]=m.useState(!1),I=M(null==e?void 0:e.album),N=_(null==e?void 0:e.categories),T=l.get("photo.itemView.modalCard"),A=l.get("photo.block.photoViewMobile"),j=l.get("video.itemView.modalCard"),{dialogProps:$}=k(),L=m.useCallback(()=>{u({pathname:n},{replace:!0,state:{asModal:!0}})},[u,n]),B=m.useCallback(()=>{u({pathname:a},{replace:!0,state:{asModal:!0}})},[u,a]),D=e=>{P({type:"photo/onAddPhotoTag",payload:{identity:t,data:e}})},V=e=>{P({type:"photo/onRemovePhotoTag",payload:{identity:t,id:e}})},F=e=>{W(e)},H=e=>{39===e.keyCode&&a?B():37===e.keyCode&&n&&L()};return e?R?m.createElement(s.Vq,g({},$,{fullScreen:!0,scroll:"body","data-testid":"popupViewPhoto"}),m.createElement(s.$N,{enableBack:R,disableClose:R},Z.formatMessage({id:"photo"})),m.createElement(f,null,m.createElement(A,{item:e,identity:t,onNextClick:B,onPrevClick:L,nextUrl:a,prevUrl:n}))):m.createElement(s.Vq,g({scroll:"body"},$,{fullScreen:!0,"data-testid":"popupDetailPhoto",onBackdropClick:void 0,onKeyDown:H}),m.createElement(f,{dividers:!1},"photo"===r?m.createElement(y,null,m.createElement(m.Fragment,null,a?m.createElement(x,{onClick:B,displayPosition:"right"},m.createElement(c.zb,{icon:"ico-angle-right"})):null,n?m.createElement(x,{onClick:L,displayPosition:"left"},m.createElement(c.zb,{icon:"ico-angle-left"})):null,m.createElement(T,{item:e,identity:t,taggedFriends:[],onAddPhotoTag:D,onRemovePhotoTag:V,onMinimizePhoto:F}))):m.createElement(b,null,m.createElement(m.Fragment,null,a?m.createElement(x,{onClick:B,displayPosition:"right"},m.createElement(c.zb,{icon:"ico-angle-right"})):null,n?m.createElement(x,{onClick:L,displayPosition:"left"},m.createElement(c.zb,{icon:"ico-angle-left"})):null,m.createElement(j,{item:e,onMinimizePhoto:F}))),m.createElement(v,{isExpand:z},m.createElement(S,null,m.createElement(E,null,I?m.createElement(d.Z,{sx:{pt:2}},m.createElement(w,null,m.createElement(c.zb,{icon:" ico-photos-o"}),m.createElement(C,null,Z.formatMessage({id:"from_album_name"},{name:m.createElement(i.rUS,{to:null==I?void 0:I.link},null==I?void 0:I.name)}))),m.createElement(d.Z,{sx:{pt:2}},m.createElement(p.Z,null))):null,m.createElement(c.ot,{to:"photo"===r?"/photo/category":"/video/category",data:N,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),m.createElement(d.Z,{sx:{flex:1,minHeight:0}},m.createElement(h,{identity:t,loading:o})))))):null})},37164:function(e,t,a){a.r(t),a.d(t,{default:function(){return k}});var i=a(85597),n=a(30998),r=a.n(n),o=a(27361),l=a.n(o),s=a(92114),c=a(41547),d=a(30120),p=a(44373),u=a(81719),m=a(67294),g=a(90910);function h(){return(h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let f="PhotoViewDialog",v=(0,u.ZP)(s.cZ,{name:f,slot:"root"})(({theme:e})=>({height:"100%",padding:"0 !important",paddingTop:"0 !important",display:"flex",overflowY:"visible",[e.breakpoints.down("sm")]:{flexFlow:"column",flexDirection:"column","& > div":{overflow:"inherit"}}})),b=(0,u.ZP)("div",{name:f,slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({height:"100vh",display:t?"none":"block",width:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"45%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),y=(0,u.ZP)("div",{name:f,slot:"dialogImage"})(({theme:e})=>({height:"100%",display:"flex",alignItems:"center",backgroundColor:"#000",width:"100%",justifyContent:"center",position:"relative",[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"55%"},[e.breakpoints.down("xs")]:{width:"100%",height:"auto",minHeight:"250px",maxHeight:"350px"}})),x=(0,u.ZP)("div",{name:f,slot:"HeaderAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,2)})),E=(0,u.ZP)("div",{name:f,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),w=(0,u.ZP)("div",{name:f,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),C=(0,u.ZP)(d.Z,{name:f,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"})),S=(e,{photo_set:t,identity:a,photo_id:i})=>{let n=l()(e,a);if(!n)return{};let o=l()(e,`photo.entities.photo_set.${t}.photos`),s=(null==n?void 0:n.user)?l()(e,n.user):void 0,c=null==o?void 0:o.length,d=1<c?r()(o,e=>e===a):-1,p=n.user_tags?n.user_tags.map(t=>l()(e,t)).filter(Boolean):[],u={item:n,photos:o,user:s,photo_id:i,user_tags:p,nextUrl:void 0,prevUrl:void 0};if(-1<d){let m=t?`/photo/${t}`:"/photo";if(d<c-1){let g=o[d+1];u.nextUrl=`${m}/${g.replace("photo.entities.photo.","")}`}if(0<d){let h=o[d-1];u.prevUrl=`${m}/${h.replace("photo.entities.photo.","")}`}}return u};var k=(0,i.$jX)(S)(function({item:e,identity:t,mediaType:a,loading:n,error:r,user:o}){let{jsxBackend:l,ItemDetailInteractionInModal:u,useDialog:f,dispatch:S,i18n:k,useIsMobile:P,useGetItems:Z,useGetItem:O,useSession:M}=(0,i.OgA)(),_=P(),[R,z]=m.useState(!1),W=Z(null==e?void 0:e.categories),I=O(null==e?void 0:e.album),N=O(null==e?void 0:e.owner),{user:T}=M(),A=l.get("photo.itemView.modalCard"),j=l.get("photo.block.photoViewMobile"),{dialogProps:$}=f(),L=e=>{S({type:"photo/onAddPhotoTag",payload:{identity:t,data:e}})},B=e=>{S({type:"photo/onRemovePhotoTag",payload:{identity:t,id:e}})},D=e=>{z(e)},V=(null==T?void 0:T.id)===(null==o?void 0:o.id);return e&&(!n||(null==o?void 0:o.id)===(null==N?void 0:N.id)||(null==e?void 0:e._loadedDetail)||V)?_?m.createElement(s.Vq,h({},$,{fullScreen:!r,scroll:"body","data-testid":"popupViewPhoto"}),m.createElement(s.$N,{enableBack:_,disableClose:_},k.formatMessage({id:"photo"})),m.createElement(g.Z,{error:r},m.createElement(v,null,m.createElement(j,{item:e,identity:t})))):m.createElement(s.Vq,h({scroll:"body"},$,{fullScreen:!r,"data-testid":"popupDetailPhoto",onBackdropClick:void 0}),m.createElement(g.Z,{error:r},m.createElement(v,{dividers:!1},m.createElement(y,null,m.createElement(m.Fragment,null,m.createElement(A,{item:e,identity:t,taggedFriends:[],onAddPhotoTag:L,onRemovePhotoTag:B,onMinimizePhoto:D}))),m.createElement(b,{isExpand:R},m.createElement(C,null,m.createElement(x,null,I?m.createElement(d.Z,{sx:{pt:2}},m.createElement(E,null,m.createElement(c.zb,{icon:" ico-photos-o"}),m.createElement(w,null,k.formatMessage({id:"from_album_name"},{name:m.createElement(i.rUS,{to:null==I?void 0:I.link},null==I?void 0:I.name)}))),m.createElement(d.Z,{sx:{pt:2}},m.createElement(p.Z,null))):null,m.createElement(c.ot,{to:"/photo/category",data:W,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),m.createElement(d.Z,{sx:{flex:1,minHeight:0}},m.createElement(u,{identity:t,loading:n}))))))):null})},77675:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(85597),n=a(92114),r=a(84635),o=a(98601),l=a.n(o),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function d({initialValues:e}){let{useDialog:t}=(0,i.OgA)(),{dialogProps:a,setDialogValue:o}=t();return l()(e,"submit"),s.createElement(n.Vq,c({},a,{maxWidth:"sm",fullWidth:!0}),s.createElement(r.AO,{initialValues:e,dataSource:{apiUrl:"/poll/status-form"},onSubmit:o,dialog:!0}))}},44635:function(e,t,a){a.r(t),a.d(t,{default:function(){return u}});var i=a(85597),n=a(92114),r=a(84635),o=a(98601),l=a.n(o),s=a(50361),c=a.n(s),d=a(67294);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function u({initialValues:e,formUrl:t}){let{useDialog:a}=(0,i.OgA)(),{dialogProps:o,setDialogValue:s}=a(),u=c()(e);return l()(u,"submit"),d.createElement(n.Vq,p({},o,{maxWidth:"sm",fullWidth:!0}),d.createElement(r.AO,{initialValues:u,dataSource:{apiUrl:t||"/poll/status-form"},onSubmit:s,dialog:!0}))}},26757:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var i=a(92114),n=a(85597),r=a(21241),o=a(41547),l=a(81719),s=a(70214),c=a(99164),d=a(67294),p=a(22410),u=a(73327),m=(0,p.Z)(e=>(0,u.Z)({root:{},dialogContent:{height:320},reactNumber:{paddingLeft:e.spacing(1),color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold},customTabs:{borderBottom:e.mixins.border("secondary"),"& .MuiTabs-scroller":{overflow:"auto !important"},"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5),display:"flex",flexDirection:"column"},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",minWidth:0,borderRadius:4,marginRight:e.spacing(1),padding:e.spacing(.5),flexDirection:"row","&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected,color:`${e.palette.text.secondary} !important`},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let h="PeopleWhoVoted",f={minHeight:32},v=(0,l.ZP)(s.Z,{name:h})(({theme:e})=>({justifyContent:"space-between",maxWidth:"100%",padding:`${e.spacing(.5,1)} !important`,height:`${e.spacing(3.5)} !important`,marginRight:"0px !important",marginBottom:e.spacing(.5)})),b=(0,l.ZP)(o.Ys,{name:h})(({theme:e})=>({maxWidth:"95%"}));var y=function(e){let{listAnswers:t}=e,a=m(),[o,l]=(0,d.useState)(t[0].id),{useDialog:s,i18n:p,ListView:u}=(0,n.OgA)(),{dialogProps:h}=s(),y=(0,d.useMemo)(()=>({apiUrl:"/poll-result",apiParams:{answer_id:o}}),[o]),x=`pollAnswerResult/${o}`,E=(e,t)=>{l(parseInt(t,10))};return d.createElement(i.Vq,g({},h,{maxWidth:"xs",fullWidth:!0}),d.createElement(i.$N,null,p.formatMessage({id:"people_who_voted"})),d.createElement(c.Z,{value:o,onChange:E,style:f,className:a.customTabs},t.map(e=>d.createElement(v,{key:e.id,disableRipple:!0,label:e.answer?d.createElement(d.Fragment,null,d.createElement(b,{lines:1},e.answer),d.createElement("span",{className:a.reactNumber},e.total_votes)):void 0,value:e.id,"aria-label":e.title}))),d.createElement("div",{className:a.dialogContent},d.createElement(r.l$,{autoHide:!0,autoHeightMax:320},d.createElement(u,{dataSource:y,pagingId:x,canLoadMore:!0,gridLayout:"Poll - People Who Voted",itemLayout:"Poll - People Who Voted",itemView:"poll.itemView.peopleWhoVoted",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_votes",contentStyle:{sx:{pt:2}}}}))))}},38782:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(85597),n=a(92114),r=a(67294),o=a(22410),l=a(73327);let s=(0,o.Z)(e=>(0,l.Z)({root:{padding:"0 !important",overflowY:"visible",display:"flex"},titleDialog:{display:"flex",alignItems:"center"},closeDialog:{color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),marginLeft:"auto",cursor:"pointer"},contentWrapper:{width:"1020px",maxWidth:"100%"}}),{name:"MuiPollViewModal"});function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var d=(0,i.SuR)(function({item:e,identity:t}){let a=s(),{useDialog:o,jsxBackend:l,useIsMobile:d,i18n:p}=(0,i.OgA)(),{dialogProps:u}=o(),m=l.get("poll.block.pollView"),g=d();return e?r.createElement(n.Vq,c({},u,{maxWidth:"md",scroll:"body","data-testid":"popupViewBlog"}),r.createElement(n.$N,{enableBack:g,disableClose:g},p.formatMessage({id:"poll"})),r.createElement(n.cZ,{className:a.root},r.createElement("div",{className:a.contentWrapper},r.createElement(m,{item:e,identity:t,isModalView:!0})))):null})},76494:function(e,t,a){a.r(t),a.d(t,{default:function(){return X}});var i=a(85597),n=a(92114),r=a(21241),o=a(30120),l=a(81719),s=a(70214),c=a(99164),d=a(67294);let p="quiz",u="quiz";var m=a(39348),g=a(17888),h=a(22949),f=a(15949),v=a(27361),b=a.n(v);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}var x=function({onSelect:e,data:t,valueSelect:a}){let{options:i=[]}=t,n=(e,t)=>b()(e,"id")==b()(t,"id"),r=e=>{var t;return null!==(t=b()(e,"label"))&&void 0!==t?t:""},l=(0,f.D)({stringify:({label:e})=>`${e}`}),s=e=>{13===e.keyCode&&e.preventDefault()},c=e=>{return d.createElement(h.Z,y({},e,{fullWidth:!0,onKeyDown:s,inputProps:{...e.inputProps,autoComplete:"on"}}))},p=d.useCallback((e,t)=>{return d.createElement(o.Z,y({component:"li"},e,{key:`${null==t?void 0:t.id}${null==t?void 0:t.question}`}),`${null==t?void 0:t.ordering}. ${t.label}`)},[]);return d.createElement(g.Z,{margin:"normal",fullWidth:!0,"data-testid":"field select custom"},d.createElement(m.Z,{disableClearable:!0,filterOptions:l,openOnFocus:!0,value:a||i[0],defaultValue:i[0],onChange:e,isOptionEqualToValue:n,options:i,getOptionLabel:r,autoHighlight:!0,renderInput:c,renderOption:p}))},E=a(90910),w=a(41547),C=a(91647),S=a(41609),k=a.n(S),P=a(57147),Z=a(53307),O=a(59462),M=a(18037),_=a(47546),R=a(20399),z=a(41470),W=a(1469),I=a.n(W),N=a(86706);let T=(0,l.ZP)(o.Z,{name:"quiz-question-dialog",slot:"root",shouldForwardProp:e=>"rightAnswer"!==e})(({theme:e,rightAnswer:t})=>({marginTop:e.spacing(3),marginBottom:e.spacing(1),...t?{"& .option .Mui-checked + span":{color:e.palette.success.main,fontWeight:"bold"}}:{"& .option .Mui-checked + span":{color:e.palette.error.main,fontWeight:"bold"}}})),A=(0,l.ZP)(R.Z,{slot:"RadioButton"})(({theme:e})=>({"&.Mui-disabled":{..."dark"===e.palette.mode&&{color:e.palette.text.hint}}})),j=(0,l.ZP)(_.Z,{slot:"label"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),lineHeight:1.33,fontWeight:"bold",color:e.palette.text.primary,marginBottom:e.spacing(1)}));function $(e){let{question:t,answers:a,order:i,result:n}=e,r=(0,N.v9)(e=>(0,P.u)(e,a)),o=Boolean((null==n?void 0:n.correct_answer_id)===(null==n?void 0:n.user_answer_id));return d.createElement(T,{rightAnswer:o},d.createElement(j,{variant:"h5",component:"div"},`${i}. ${t}`),d.createElement(z.Z,{value:null==n?void 0:n.user_answer_id.toString()},I()(r)?r.map(e=>{return d.createElement(M.Z,{disabled:!0,key:e.id.toString(),value:e.id.toString(),style:{width:"fit-content"},control:d.createElement(A,{color:"primary",size:"small",icon:e.id===(null==n?void 0:n.correct_answer_id)?d.createElement(Z.Z,{fontSize:"small"}):d.createElement(O.Z,{fontSize:"small"})}),label:e.answer,className:"option"})}):null))}let L=(0,l.ZP)(o.Z)(({theme:e})=>({display:"flex",alignItems:"center",marginTop:e.spacing(2)})),B=(0,l.ZP)(i.rUS,{name:"ProfileLinkStyled"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15),fontWeight:e.typography.fontWeightBold,paddingRight:e.spacing(.5),color:e.palette.text.primary}));var D=function({questions:e,item:t,userId:a}){var n;let{useFetchDetail:r,i18n:l}=(0,i.OgA)(),s=(0,i.oHF)(p,u,"viewQuizResultIndividual"),[c,m,g]=r({dataSource:s,pageParams:{quiz_id:t.id,user_id:a}}),h=(e||[]).reduce((e,t)=>{var a;let i=null==c?void 0:null===(a=c.user_result)||void 0===a?void 0:a.find(e=>e.question_id===t.id),n=Boolean((null==i?void 0:i.correct_answer_id)===(null==i?void 0:i.user_answer_id));return n?e+1:e},0);return d.createElement(E.Z,{loading:m,error:g,emptyComponent:null},k()(c)?null:d.createElement(o.Z,null,d.createElement(L,null,d.createElement(w.Yt,{user:null==c?void 0:c.user,size:48}),d.createElement(o.Z,{sx:{ml:1.5}},d.createElement(B,{to:null==c?void 0:null===(n=c.user)||void 0===n?void 0:n.link,children:null==c?void 0:c.user.full_name,"data-testid":"headline"}),d.createElement(C.Z,{color:"text.secondary",mt:.5},l.formatMessage({id:"correct_answer_percent_question"},{result:()=>{return d.createElement("strong",null,`${h}/${null==e?void 0:e.length}`)},percent:()=>{return d.createElement("strong",null,"(",null==c?void 0:c.result_correct,")")}})))),(null==e?void 0:e.length)>0&&e.map((e,t)=>{var a;return d.createElement($,{key:t.toString(),question:e.question,questionId:e.id,answers:e.answers,order:t+1,result:null==c?void 0:null===(a=c.user_result)||void 0===a?void 0:a.find(t=>t.question_id===e.id)})})))},V=a(47037),F=a.n(V),H=a(13478);function q(){return(q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let U=(0,l.ZP)(s.Z)(({theme:e})=>({height:50,fontSize:e.mixins.pxToRem(15),color:e.palette.text.secondary,fontWeight:"bold",borderBottom:"2px solid transparent",minWidth:0,padding:0,marginRight:e.spacing(4),textTransform:"uppercase","& .Mui-selected":{borderBottomColor:e.palette.primary.main,color:e.palette.primary.main},"&:hover":{color:e.palette.primary.main}})),Y=(0,l.ZP)(o.Z)(({theme:e})=>({padding:e.spacing(0,2)}));function X({dialogTitle:e,questions:t,user:a,userOwner:o,item:l}){let{useDialog:s,ListView:m,i18n:g,useGetItem:h}=(0,i.OgA)(),{dialogProps:f}=s(),v=(0,i.oHF)(p,u,"viewQuizSummary"),[b,y]=d.useState(0),[E,w]=d.useState(null),[C,S]=d.useState(t[0].id),P=(e,t)=>{S(t.id),w(t)},Z=(a||[]).map((e,t)=>{if(F()(e.user)){let a=h(e.user);return{id:a.id,label:a.full_name,ordering:t}}return{id:e.user.id,label:e.user.full_name,ordering:t}}),O=d.useMemo(()=>{return(t||[]).map(e=>{return{id:e.id,label:e.question,ordering:e.ordering}})},[t]),M=d.useMemo(()=>{return{0:{options:O},1:{options:Z}}},[t,a,O,Z]),_=(e,t)=>{y(t),0===t?(w(O[0]),S(O[0].id)):(w(Z[0]),S(Z[0].id))},R=d.useMemo(()=>{var e;return!k()(a)&&(null!=l&&!!l.is_owner||null!=l&&null!==(e=l.extra)&&void 0!==e&&!!e.can_moderate)},[a,l]);return d.createElement(n.Vq,q({},f,{maxWidth:"xs",fullWidth:!0}),d.createElement(n.$N,null,g.formatMessage({id:e})),d.createElement(n.cZ,{variant:"fitScroll",sx:{height:"45vh"}},d.createElement(Y,null,d.createElement(c.Z,{value:b,onChange:_,indicatorColor:"primary",textColor:"primary"},d.createElement(U,{disableRipple:!0,label:g.formatMessage({id:"summary"}).toUpperCase()}),R?d.createElement(U,{disableRipple:!0,label:g.formatMessage({id:"individuals"}).toUpperCase()}):null),d.createElement(x,{onSelect:P,data:M[b],tab:b,valueSelect:E})),d.createElement(r.l$,null,d.createElement(Y,{sx:{mb:2}},0===b?d.createElement(m,{canLoadMore:!0,dataSource:{apiMethod:(null==v?void 0:v.apiMethod)||"get",apiUrl:null==v?void 0:v.apiUrl,apiParams:(0,H.aZ)(v.apiParams,{id:C})},pagingId:`/quiz/view-plays/tab=${b}/value=${C}`,prefixPagingId:"/quiz/view-plays",itemView:"quiz.itemView.AnswerPercent",emptyPage:"hide",gridLayout:"Friend - Small List",itemLayout:"Quiz - Answer Played List"}):d.createElement(D,{item:l,userId:C,questions:t})))))}},13324:function(e,t,a){a.r(t);var i=a(85597),n=a(92114),r=a(81719),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let s="QuizViewDialog",c=(0,r.ZP)(n.cZ,{name:s,slot:"root"})(({theme:e})=>({padding:"0 !important",overflowY:"visible",display:"flex"})),d=(0,r.ZP)("div",{name:s,slot:"root"})(({theme:e})=>({width:"1020px",maxWidth:"100%"}));t.default=(0,i.SuR)(function({item:e,identity:t}){let{useDialog:a,jsxBackend:r,useIsMobile:s,i18n:p}=(0,i.OgA)(),{dialogProps:u}=a(),m=r.get("quiz.block.quizView"),g=s();return e?o.createElement(n.Vq,l({},u,{maxWidth:"md",scroll:"body","data-testid":"popupViewQuiz"}),o.createElement(n.$N,{enableBack:g,disableClose:g},p.formatMessage({id:"quiz"})),o.createElement(c,null,o.createElement(d,null,o.createElement(m,{item:e,identity:t,isModalView:!0})))):null})},57147:function(e,t,a){a.d(t,{u:function(){return l}});var i=a(22222),n=a(27361),r=a.n(n);let o=(e,t)=>{return t?null==t?void 0:t.map(t=>r()(e,t)).filter(Boolean):[]},l=(0,i.P1)(o,e=>e)},10777:function(e,t,a){a.r(t),a.d(t,{default:function(){return w}});var i=a(92114),n=a(85597),r=a(21241),o=a(21822),l=a(72962),s=a(24498),c=a(71682),d=a(70214),p=a(99164),u=a(91647),m=a(67294),g=a(22410),h=a(73327),f=(0,g.Z)(e=>(0,h.Z)({root:{},dialogContent:{height:320,padding:e.spacing(0),flex:"1 1 auto",overflowY:"auto"},reactNumber:{marginBottom:"0 !important",color:e.palette.text.secondary,fontSize:e.mixins.pxToRem(13),fontWeight:e.typography.fontWeightBold,"&:first-of-type":{fontWeight:"normal"}},customTabs:{"& .MuiTabs-flexContainer":{margin:e.spacing(1,1.5,1,1.5)},"& .MuiTab-root":{fontSize:e.typography.pxToRem(13),minHeight:"auto",borderRadius:4,marginRight:"0.25em",padding:e.spacing(.5),"&:hover":{backgroundColor:e.palette.action.hover}},"& .Mui-selected":{backgroundColor:e.palette.action.selected},"& .MuiTab-wrapper":{textTransform:"none",flexDirection:"row",padding:e.spacing(.25,1),"& img":{marginBottom:"0 !important",marginRight:e.spacing(.75),"& + $reactNumber":{fontWeight:"bold"}}},"& .MuiTabs-indicator":{backgroundColor:"transparent"}}}),{name:"ReactionDialog"});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let b={minHeight:32},y={minWidth:16},x={width:15,height:15},E=()=>{return m.createElement(m.Fragment,null,m.createElement(c.Z,{variant:"button",width:40,height:24,sx:{marginRight:1}}),m.createElement(c.Z,{variant:"button",width:60,height:24,sx:{marginRight:1}}),m.createElement(c.Z,{variant:"button",width:60,height:24,sx:{marginRight:1}}))};var w=function(e){let{item_type:t,item_id:a,reactId:c}=e,g=f(),[h,w]=(0,m.useState)(c),C=(0,m.useRef)(),{useDialog:S,i18n:k,ListView:P,useFetchItems:Z,dispatch:O,navigate:M}=(0,n.OgA)(),{dialogProps:_,closeDialog:R}=S(),[z,W,I]=Z({dataSource:{apiUrl:"/preaction/reaction-tabs",apiParams:{item_type:t,item_id:a}},data:[]});(0,m.useEffect)(()=>{(null==z?void 0:z.length)&&O({type:"updateResourceReaction",payload:{tabResourceReaction:z}}),!c&&(null==z?void 0:z.length)&&w(z[0].id)},[z,c]);let N=(0,m.useMemo)(()=>({apiUrl:"/preaction/get-reacted-lists",apiParams:{item_type:t,item_id:a,react_id:h,limit:20}}),[a,t,h]),T=()=>{M("/"),R()};if(I)return m.createElement(i.Vq,v({},_,{maxWidth:"xs",fullWidth:!0}),m.createElement(i.$N,null,"Error"),m.createElement(s.Z,{dividers:!1},m.createElement(u.Z,{sx:{pt:2},variant:"body1"},k.formatMessage({id:"error_post_delete"}))),m.createElement(l.Z,null,m.createElement(o.Z,{"data-testid":"buttonBackHome",role:"button",tabIndex:1,autoFocus:!0,variant:"contained",disableRipple:!0,size:"medium",color:"primary",onClick:T,sx:{minWidth:100}},k.formatMessage({id:"refresh"}))));let A=`preaction/${t}/${a}/${h}`,j=(e,t)=>{w(parseInt(t,10))};return m.createElement(i.Vq,v({},_,{maxWidth:"xs",fullWidth:!0}),m.createElement(i.$N,null,k.formatMessage({id:"reacted_by"})),m.createElement(p.Z,{value:h,onChange:j,style:b,className:g.customTabs},W?m.createElement(E,null):z.map(e=>m.createElement(d.Z,{key:e.title,style:y,disableRipple:!0,icon:e.icon?m.createElement("img",{src:e.icon,alt:e.title,style:x}):m.createElement("span",{className:g.reactNumber},e.title),iconPosition:"start",label:e.total_reacted?m.createElement("span",{className:g.reactNumber},e.total_reacted):void 0,value:e.id,"aria-label":e.title}))),m.createElement("div",{className:g.dialogContent,ref:C},m.createElement(r.ID,{scrollRef:C},W?null:m.createElement(P,{dataSource:N,pagingId:A,canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{spacing:0},itemView:"reaction.itemView.reactedUser"}))))}},40471:function(e,t,a){a.d(t,{z:function(){return o}});var i=a(86706),n=a(22222);let r=(0,n.P1)(e=>e.preaction.data.reactions,e=>e);function o(){return(0,i.v9)(r)}},24632:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(85597),n=a(92114),r=a(84635),o=a(17673),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){let{useDialog:t,compactData:a}=(0,i.OgA)(),{dialogProps:c}=t(),d=a("item_id=:item_id&item_type=:item_type&report_owner=:report_owner",e);return l.createElement(n.Vq,s({},c,{maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"}),l.createElement(r.AO,{dialog:!0,dataSource:{apiUrl:`/report/form?${o.stringify(d)}`}}))}},12808:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(85597),n=a(92114),r=a(84635),o=a(17673),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){let{useDialog:t,compactData:a}=(0,i.OgA)(),{dialogProps:c}=t(),d=a("item_id=:item_id&item_type=:item_type",e);return l.createElement(n.Vq,s({},c,{maxWidth:"xs",fullWidth:!0,"data-testid":"popupReport"}),l.createElement(r.AO,{dialog:!0,dataSource:{apiUrl:`/report-owner/form?${o.stringify(d)}`}}))}},53691:function(e,t,a){a.d(t,{Z:function(){return l}});var i=a(49960),n=a(18037),r=a(67294),o=a(75990);function l(e){let{item:t,handleToggleItem:a,checked:l,loading:s}=e,c=(0,o.Z)(),[d,p]=r.useState(l),u=e=>{a(null==t?void 0:t.id,!d),p(e=>!e)};return(r.useEffect(()=>{p(l)},[l]),t)?r.createElement(n.Z,{className:c.itemWrapper,control:r.createElement(i.Z,{disabled:s,checked:d,onChange:u,color:"primary",size:"small"}),label:t.name}):null}},75990:function(e,t,a){var i=a(22410),n=a(73327);t.Z=(0,i.Z)(e=>{var t;return(0,n.Z)({root:{width:225},heading:{textTransform:"uppercase",color:e.palette.text.secondary,backgroundColor:e.palette.background.default,fontWeight:"bold",padding:e.spacing(1,1.5)},headingCollapse:{display:"flex",justifyContent:"space-between",alignItems:"center",cursor:"pointer"},listCollection:{display:"flex",flexDirection:"column",maxHeight:200,overflowY:"auto"},itemWrapper:{width:"100%",margin:"0 !important",padding:e.spacing(.5,1,.5,0),position:"relative","& + $itemWrapper:before":{content:'""',borderTop:"solid 1px",borderColor:null===(t=e.palette.border)||void 0===t?void 0:t.secondary,position:"absolute",top:0,left:e.spacing(2),right:e.spacing(2)}},createForm:{backgroundColor:e.palette.background.default,padding:e.spacing(2)},input:{"& .MuiInputBase-root":{borderRadius:4,backgroundColor:e.mixins.backgroundColor("paper"),height:e.spacing(4)}},actions:{marginTop:e.spacing(1),display:"flex","& button":{flex:1,minWidth:0},"& button + button":{marginLeft:e.spacing(1)}}})},{name:"MenuItemAddToCollection"})},20666:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(92114),n=a(84635),r=a(85597),o=a(42826),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(){let{useDialog:e}=(0,r.OgA)(),t=e(),{dialogProps:a,closeDialog:c}=t,d=(0,r.oHF)(o.T6,"saved_list","addItem"),p=e=>l.createElement("div",null);return l.createElement(i.Vq,s({},a,{maxWidth:"sm","data-testid":""}),l.createElement(i.cZ,{sx:{maxWidth:"100%",p:0}},l.createElement(n.dq,{dialog:!0,dialogItem:t,dataSource:{apiUrl:d.apiUrl},onCancel:c,onSuccess:c,loadingComponent:l.createElement(p,null)})))}},80802:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(92114),r=a(21241),o=a(67294);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({apiUrl:e,apiParams:t,pagingId:a,dialogTitle:s}){let{useDialog:c,ListView:d,i18n:p}=(0,i.OgA)(),{dialogProps:u}=c();return o.createElement(n.Vq,l({},u,{maxWidth:"sm",fullWidth:!0}),o.createElement(n.$N,null,p.formatMessage({id:s})),o.createElement(n.cZ,{variant:"fitScroll",sx:{height:"45vh"}},o.createElement(r.l$,{style:{height:"auto"}},o.createElement(d,{dataSource:{apiUrl:e,apiParams:t},canLoadMore:!1,clearDataOnUnMount:!0,gridLayout:"Friend - Small List",itemLayout:"Friend - Small List",itemView:"saved.itemView.friendList",emptyPage:"core.block.no_item_with_icon",emptyPageProps:{description:"no_friends_found",image:"ico-user-circle-o"}}))))}},63045:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var i=a(92114),n=a(85597),r=a(21241),o=a(30120),l=a(35705),s=a(41609),c=a.n(s),d=a(67294),p=a(53691),u=a(41547),m=a(21822),g=a(81719);let h=(0,g.ZP)("div",{name:"root"})(({theme:e})=>({display:"flex",flexDirection:"column",justifyContent:"center",padding:e.spacing(0,2),alignItems:"center",margin:e.spacing(7.5)})),f=(0,g.ZP)(u.zb,{name:"LineIcon"})(({theme:e})=>({fontSize:e.mixins.pxToRem(64),color:e.palette.text.secondary,marginBottom:e.spacing(4)})),v=(0,g.ZP)("div",{name:"content"})(({theme:e})=>({fontSize:e.mixins.pxToRem(18),color:e.palette.text.secondary,textAlign:"center",[e.breakpoints.down("xs")]:{fontSize:e.mixins.pxToRem(15)}})),b=(0,g.ZP)(m.Z,{name:"WrapButton"})(({theme:e})=>({marginTop:e.spacing(1),"&:hover":{backgroundColor:"unset"}})),y=(0,g.ZP)(m.Z,{name:"ButtonInviteStyled"})(({theme:e})=>({height:"100%","& .MuiButton-startIcon":{marginLeft:0}}));function x({icon:e="ico-list-bullet-o",description:t="there_are_no_friend_list",button:a}){let{i18n:i,dispatch:r,useDialog:o}=(0,n.OgA)(),{closeDialog:l}=o(),s=()=>{l(),a.type&&r({type:a.type,payload:{...a.props}})};return d.createElement(h,null,d.createElement(f,{icon:e}),t?d.createElement(v,null,i.formatMessage({id:t})):null,d.createElement(b,null,d.createElement(y,{size:"small",variant:"outlined",component:"h5",onClick:s,startIcon:d.createElement(u.zb,{sx:{marginLeft:"0 !important"},icon:"ico-envelope"})},d.createElement("span",null,i.formatMessage({id:a.label||"add_new_listing"})))))}function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let w=()=>d.createElement(o.Z,{my:1,sx:{display:"flex",justifyContent:"center"}},d.createElement(l.Z,{color:"inherit",size:"1rem"}));function C({item:e,noShowFeedback:t}){let{useDialog:a,i18n:l,useFetchItems:s,dispatch:u}=(0,n.OgA)(),m=a(),{dialogProps:g}=m,h=e._identity,{collection_ids:f=[]}=e||{},[v,b]=d.useState(f||[]),[y,C]=d.useState(!1),[S,k]=s({dataSource:{apiUrl:"/saveditems-collection"}}),P=(e,a)=>{C(!0);let i=a?[...v,e]:v.filter(t=>t!==e);u({type:"addSavedItemToCollection",payload:{identity:h,ids:i,collection_id:e,isRemoved:!a,noShowFeedback:t},meta:{onSuccess:()=>{C(!1),b(i)}}})},Z=()=>{return c()(S)?d.createElement(x,{icon:"ico-list-bullet-o",description:"no_collections_found",button:{type:"addSavedItemToNewCollection",props:{identity:h},label:"new_collection"}}):d.createElement(o.Z,{sx:{p:1}},d.createElement(r.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:300},S.map(e=>d.createElement(p.Z,{item:e,collection_ids:f,key:e.id.toString(),handleToggleItem:P,checked:v.some(t=>t===e.id),loading:y}))))};return d.createElement(i.Vq,E({},g,{maxWidth:"xs","data-testid":""}),d.createElement(i.$N,{children:l.formatMessage({id:"save_to_collection"}),"data-testid":"popupTitle"}),d.createElement(i.cZ,{sx:{maxWidth:"100%",p:0}},k?d.createElement(w,null):d.createElement(Z,null)))}},12475:function(e,t,a){a.r(t),a.d(t,{default:function(){return c}});var i=a(85597),n=a(92114),r=a(41547),o=a(21822),l=a(67294);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function c(e){let{i18n:t,useSession:a}=(0,i.OgA)(),{user:c}=a(),{dialogProps:d}=(0,n.Rh)();return l.createElement(n.Vq,s({},d),l.createElement(n.$N,null,t.formatMessage({id:"share"})),l.createElement(n.cZ,{sx:{minWidth:600,maxWidth:"100%"}},l.createElement("div",null,l.createElement(r.Yt,{user:c,size:40,noLink:!0})),"This features is coming soon!"),l.createElement(n.kX,null,l.createElement(o.Z,{style:{minWidth:160},variant:"contained",color:"primary",size:"medium"},t.formatMessage({id:"share"}))))}},20751:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var i=a(85597),n=a(92114),r=a(67294),o=a(41547),l=a(81719);let s="MenuItem",c=(0,l.ZP)("div",{name:s,slot:"itemRoot"})(({theme:e})=>({fontSize:"1rem",padding:e.spacing(1,2),cursor:"pointer","&:hover":{backgroundColor:e.palette.action.selected}})),d=(0,l.ZP)(o.zb,{name:s,slot:"itemIcon"})(({theme:e})=>({width:e.spacing(4),display:"inline-block"}));function p({item:e,onClick:t}){return r.createElement(c,{onClick:t},r.createElement(d,{icon:e.icon}),r.createElement("span",null,e.label))}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function m(e){let{i18n:t,dispatch:a}=(0,i.OgA)(),{dialogProps:o,closeDialog:l}=(0,n.Rh)(),{shareOptions:s,identity:c}=e,d=r.useCallback(e=>{a({type:e,payload:{identity:c}}),l()},[l,a,c]);return r.createElement(n.Vq,u({},o),r.createElement(n.$N,null,t.formatMessage({id:"share"})),r.createElement(n.cZ,{sx:{minWidth:360,px:0,py:1}},s.map((e,t)=>r.createElement(p,{item:e,onClick:()=>d(e.value),key:t.toString()}))))}},15442:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var i=a(85597),n=a(92114),r=a(67294),o=a(30120);function l(){return(l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function s({dataSource:e,title:t,hasComparison:a,meta:s,relatedFieldName:c}){let{useDialog:d,ListView:p,i18n:u,layoutBackend:m}=(0,i.OgA)(),{dialogProps:g}=d(),h="Subscription - Dialog - List",f=m.getItemPreset(h);return r.createElement(n.Vq,l({},g,{maxWidth:"sm",fullWidth:!0}),r.createElement(n.$N,{children:null!=t?t:u.formatMessage({id:"subscription_packages"}),"data-testid":"popupTitle"}),r.createElement(o.Z,{sx:{flex:1,minHeight:0,maxHeight:"100%",overflow:"auto"}},r.createElement(p,{dataSource:e,itemView:"subscription_package.itemView.smallCard",limitItemsLoadSmooth:3,gridLayout:h,itemLayout:h,itemProps:{...null==f?void 0:f.itemProps,setFieldValue:null==s?void 0:s.setFieldValue,relatedFieldName:c}}),a?r.createElement(o.Z,{px:2,pb:2,sx:{display:"flex",justifyContent:"flex-end"}},r.createElement(i.rUS,{to:"/subscription",color:"primary"},u.formatMessage({id:"compare_packages"}))):null))}},57807:function(e,t,a){a.d(t,{Z:function(){return l}});var i=a(85597),n=a(84635),r=a(78016),o=a(67294);function l({user:e,submitAction:t="@login",formName:a="login",title:l}){let[s,c]=o.useState(),d=(0,i.gM1)("user","user",a);o.useEffect(()=>{e&&c(e)},[e]);let p={email:null==s?void 0:s.email,password:null==s?void 0:s.password,remember:!1};return o.createElement(r.Z,{component:"main",maxWidth:"xs"},o.createElement(n.qu,{key:(null==s?void 0:s.id)||"none",submitAction:t,initialValues:p,formSchema:l?{...d,title:l}:d,navigationConfirmWhenDirty:!1}))}},75214:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});var i=a(85597),n=a(92114),r=a(67294),o=a(57807),l=a(30120),s=a(50130),c=a(41547);function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function p({title:e,formName:t="login_popup"}){let{useDialog:a}=(0,i.OgA)(),{dialogProps:p,closeDialog:u}=a();return r.createElement(n.Vq,d({},p,{maxWidth:"xs",fullWidth:!0}),r.createElement(l.Z,{py:3},r.createElement(s.Z,{sx:{position:"absolute",top:8,right:8},onClick:u},r.createElement(c.zb,{icon:"ico-close"})),r.createElement(o.Z,{submitAction:"@loginFromDialog",formName:t,title:e})))}},75255:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var i=a(85597),n=a(92114),r=a(21241),o=a(41547),l=a(30120),s=a(67294);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}function d(){let{useDialog:e,i18n:t,ListView:a}=(0,i.OgA)(),{dialogProps:d}=e(),[p,u]=s.useState(""),m=s.useCallback(e=>{u(e)},[]),g=t.formatMessage({id:"edit_your_shortcuts"}),h=s.useMemo(()=>{return`/user/shortcut/edit/?query=${p}`},[p]);return s.useEffect(()=>{return()=>{}},[]),s.createElement(n.Vq,c({},d,{maxWidth:"xs",fullWidth:!0}),s.createElement(n.$N,null,g),s.createElement(n.cZ,{variant:"fitScroll",sx:{height:"45vh"}},s.createElement(l.Z,{sx:{p:2}},s.createElement(o.mN,{placeholder:t.formatMessage({id:"search_your_page_groups_dots"}),onChanged:m})),s.createElement(r.l$,{autoHeightMax:"100%",autoHide:!0,autoHeight:!0},s.createElement(a,{emptyPage:"core.block.no_content",emptyPageProps:{title:"no_results_try_another_search"},dataSource:{apiUrl:"/user/shortcut/edit",apiParams:{q:p||void 0}},pagingId:h,canLoadMore:!0,clearDataOnUnMount:!0,itemView:"shortcut.itemView.mainCard",gridLayout:"Shortcut - Small Lists",itemLayout:"Shortcut - Small Lists"}))))}},22003:function(e,t,a){a.r(t);var i=a(92114),n=a(85597),r=a(41547),o=a(30120),l=a(44373),s=a(81719),c=a(67294),d=a(90910);function p(){return(p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(e[i]=a[i])}return e}).apply(this,arguments)}let u="videoView",m=(0,s.ZP)("div",{name:"VideoView",slot:"dialogVideo"})(({theme:e})=>({position:"relative",backgroundColor:"#000",width:"100%",overflow:"hidden","& iframe":{width:"100%",height:"100%"},[e.breakpoints.down("md")]:{width:"65%"},[e.breakpoints.down("sm")]:{width:"100%",height:"auto",borderRadius:0,overflow:"initial"}})),g=(0,s.ZP)("div",{name:"VideoView",slot:"dialogStatistic",shouldForwardProp:e=>"isExpand"!==e})(({theme:e,isExpand:t})=>({height:"100%",width:t?0:"480px",flexGrow:1,[e.breakpoints.down("md")]:{width:"35%"},[e.breakpoints.down("sm")]:{width:"100%"},[e.breakpoints.down("xs")]:{width:"100%",height:"400px"}})),h=(0,s.ZP)(i.cZ,{name:"VideoView",slot:"dialogStatistic"})(({theme:e})=>({padding:"0 !important",height:"100%",display:"flex",overflowX:"hidden",[e.breakpoints.down("sm")]:{flexFlow:"column"}})),f=(0,s.ZP)("div",{name:u,slot:"HeaderAlbum"})(({theme:e})=>({display:"flex",flexDirection:"column",padding:e.spacing(0,2)})),v=(0,s.ZP)("div",{name:u,slot:"AlbumNameWrapper"})(({theme:e})=>({"& .ico.ico-photos-o":{fontSize:e.mixins.pxToRem(18),marginRight:e.spacing(1)},display:"flex",alignItems:"center"})),b=(0,s.ZP)("div",{name:u,slot:"AlbumName"})(({theme:e})=>({fontSize:e.mixins.pxToRem(15)})),y=(0,s.ZP)(o.Z,{name:u,slot:"WrapperStatistic"})(({theme:e})=>({display:"flex",flexDirection:"column",height:"100%"}));t.default=(0,n.SuR)(function({item:e,identity:t,error:a}){let{ItemDetailInteractionInModal:s,useDialog:u,useIsMobile:x,i18n:E,jsxBackend:w,useGetItem:C,useGetItems:S}=(0,n.OgA)(),{dialogProps:k}=u(),P=x(),[Z,O]=c.useState(!1),M=C(null==e?void 0:e.album),_=S(null==e?void 0:e.categories),R=w.get("video.itemView.modalCard");if(!e)return null;let z=e=>{O(e)};return c.createElement(i.Vq,p({scroll:"body"},k,{fullScreen:!a,"data-testid":"popupDetailVideo",onBackdropClick:void 0}),P||a?c.createElement(i.$N,{enableBack:!a,disableClose:P},E.formatMessage({id:"video"})):null,c.createElement(d.Z,{error:a},c.createElement(h,null,c.createElement(m,null,c.createElement(c.Fragment,null,c.createElement(R,{item:e,onMinimizePhoto:z}))),c.createElement(g,{isExpand:Z},c.createElement(y,{sx:{display:Z?"none":"flex",flexDirection:"column"}},c.createElement(f,null,M?c.createElement(o.Z,{sx:{pt:2}},c.createElement(v,null,c.createElement(r.zb,{icon:" ico-photos-o"}),c.createElement(b,null,E.formatMessage({id:"from_album_name"},{name:c.createElement(n.rUS,{to:null==M?void 0:M.link},null==M?void 0:M.name)}))),c.createElement(o.Z,{sx:{pt:2}},c.createElement(l.Z,null))):null,c.createElement(r.ot,{to:"/video/category",data:_,sx:{pt:2,mb:{sm:1,xs:0},textTransform:"capitalize"},displayLimit:2})),c.createElement(o.Z,{sx:{flex:1,minHeight:0}},c.createElement(s,{identity:t})))))))})}}]);