"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["FormEditor"],{64001:function(e,t,r){r.r(t),r.d(t,{default:function(){return $}});var a=r(76224),o=r(13478),l=r(17888),n=r(84917),i=r(22410),d=r(73327),p=r(2101),u=r(86010),c=r(9041),m=r(89265),s=r.n(m),b=r(18948),f=r(17247),g=r.n(f),h=r(68929),k=r.n(h),C=r(67294),x=r(35108),w=r(90798),S=r(85597);let y={options:["inline","fontSize","list","link","image","history"],inline:{inDropdown:!1}},E={minHeight:"100px"},R={border:"none"},W=(0,i.Z)(e=>(0,d.Z)({formLabel:{paddingLeft:"4px !important"},"formLabel-outlined":{backgroundColor:e.palette.background.paper,paddingRight:e.spacing(.5),paddingLeft:e.spacing(.5),marginLeft:e.spacing(-.5)},RDW:{position:"relative",padding:12,"& #mui-rte-toolbar":{},"& #mui-rte-editor":{},"& .rdw-option-wrapper.rdw-option-active":{borderColor:(0,p.Fq)(e.palette.primary.main,.5),boxShadow:"none",backgroundColor:(0,p.Fq)(e.palette.primary.main,.5),"&:hover":{boxShadow:"none"}},"& .rdw-dropdown-optionwrapper":{background:"light"===e.palette.mode?"#fff":e.palette.background.paper,"& .rdw-dropdownoption-highlighted":{background:"light"===e.palette.mode?"#f1f1f1":e.palette.background.default}},"& .rdw-link-modal, & .rdw-image-modal":{background:"light"===e.palette.mode?"#fff":e.palette.background.paper,boxShadow:"light"===e.palette.mode?"3px 3px 5px #bfbdbd":`3px 3px 5px ${e.palette.background.paper}`},"& .rdw-image-alignment-options-popup":{color:"#050505",background:"light"===e.palette.mode?"#fff":e.palette.background.paper}},"RDW-outlined":{"&:hover":{"& > fieldset":{borderColor:e.palette.text.primary}}},"RDW-outlined-focused":{"& > fieldset":{borderColor:`${e.palette.primary.main} !important`,border:"2px solid"},"& > label":{color:e.palette.primary.main}},"RDW-filled":{},"RDW-standard":{padding:e.spacing(1,0,0,0),borderWidth:"0 0 1px 0"},"RDW-error":{"& > fieldset":{borderColor:`${e.palette.error.main} !important`},"& > label":{color:e.palette.error.main}},hidePlaceholder:{"& .public-DraftEditorPlaceholder-root":{display:"none"}},hiddenToolbar:{display:"none !important"}})),v=/<img([\w\W]+?)>/m,D=({config:e,name:t,disabled:r,formik:i})=>{let{label:d,variant:p,color:m,required:f,fullWidth:h=!0,disabled:D,placeholder:$,margin:L="normal"}=e,T=W(),[F,Z]=C.useState(!1),[q,N,{setValue:P}]=(0,b.U$)(null!=t?t:"RichTextEditorField"),{useIsMobile:_}=(0,S.OgA)(),B=_(),A=C.useRef(c.EditorState.createWithContent(c.ContentState.createFromText(""))),[O,z]=C.useState(A.current);C.useEffect(()=>{if(!F){let e=g()(q.value?q.value:""),{contentBlocks:t,entityMap:r}=e,a=c.ContentState.createFromBlockArray(t,r);A.current=c.EditorState.createWithContent(a),z(A.current)}},[q.value,F]);let H=C.useCallback(e=>{z(e);let t=s()((0,c.convertToRaw)(e.getCurrentContent())),r="";((0,o.oN)(t).trim()||v.test(t))&&(r=t),P(r)},[]),M=C.useCallback(e=>{return!1},[]),U=C.useCallback(()=>{Z(!0)},[]),j=C.useCallback(()=>{Z(!1)},[]),G=!!(N.error&&(N.touched||i.submitCount)),I=C.useRef(),J=e=>{e&&I.current&&I.current.focusEditor()},K=O.getCurrentContent(),Q=!1;return K.hasText()||"unstyled"===K.getBlockMap().first().getType()||(Q=!0),C.createElement(l.Z,{margin:L,required:f,disabled:D||r||i.isSubmitting,fullWidth:h,"data-testid":k()(`field ${t}`)},C.createElement("div",{onClick:J,className:(0,u.default)(T.RDW,T[`RDW-${p}`],F&&T[`RDW-${p}-focused`],G&&T["RDW-error"],{[T.hidePlaceholder]:Q})},C.createElement(n.Z,{required:f,shrink:!0,variant:p,"data-testid":k()(`input ${t}`),className:(0,u.default)(T.formLabel,T[`formLabel-${p}`],F&&T[`formLabel-${p}-focused`]),disabled:D||r||i.isSubmitting,color:m},d),C.createElement(x.Editor,{ref:I,onFocus:U,onBlur:j,readOnly:D||r||i.isSubmitting,editorState:O,onEditorStateChange:H,placeholder:$,editorStyle:E,handlePastedText:M,"data-testid":k()(`input ${t}`),toolbarStyle:R,toolbar:y,toolbarClassName:B&&T.hiddenToolbar}),C.createElement(a.yC,{children:d,variant:p})),G?C.createElement(w.Z,{error:N.error}):null)};var $=D}}]);