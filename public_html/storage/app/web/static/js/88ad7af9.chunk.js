"use strict";(self.webpackChunk_metafox_react=self.webpackChunk_metafox_react||[]).push([["metafox-chat-components-ChatPopover-ChatPopover"],{52666:function(e,t,a){a.r(t),a.d(t,{default:function(){return v}});var n=a(28629),r=a(85597),o=a(21241),l=a(76224),i=a(30120),c=a(21822),s=a(25722),p=a(62937),m=a(81719),d=a(91647),u=a(67294);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}let h=(0,m.ZP)("div")(({theme:e})=>({cursor:"pointer"})),f=(0,m.ZP)(c.Z)(({theme:e})=>({color:"dark"===e.palette.mode?e.palette.text.primary:e.palette.grey["700"],fontSize:e.spacing(2.25),minWidth:e.spacing(0)})),y=(0,m.ZP)(c.Z)(({theme:e})=>({fontSize:e.spacing(2.25),minWidth:e.spacing(6.25),color:e.palette.text.primary,"& .ico.ico-check-circle-alt":{marginRight:e.spacing(.75),marginTop:e.spacing(.5),fontSize:e.spacing(1.75)}})),E=(0,m.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"flex-end"})),C=(0,m.ZP)(i.Z,{shouldForwardProp:e=>"noContent"!==e})(({theme:e,noContent:t})=>{var a;return{padding:e.spacing(1.5,2),display:"flex",alignItems:"center",justifyContent:"space-between",...!t&&{borderBottom:"1px solid",borderColor:null===(a=e.palette.border)||void 0===a?void 0:a.secondary}}}),P=(0,m.ZP)(i.Z)(({theme:e})=>({padding:e.spacing(1,2),display:"flex",alignItems:"center",justifyContent:"space-between",color:e.palette.text.primary})),b=(0,m.ZP)("div")(({theme:e})=>({padding:e.spacing(1,1,1,2),display:"flex",alignItems:"center"}));function v({anchorRef:e,open:t,closePopover:a,...i}){let{i18n:c,dispatch:m,ListView:v,jsxBackend:k}=(0,r.OgA)(),[x,Z]=u.useState(!1),[w,_]=u.useState(""),S=k.get("ui.searchBox"),[M]=u.useState({apiUrl:"/chat-room",apiParams:"limit=50"});u.useEffect(()=>{return()=>{t&&m({type:"chatplus/buddyPanel/clearSearching"})}},[]);let z=u.useCallback(()=>{m({type:"chat/openRoomPanel",payload:n.U_}),a&&a()},[]),R=u.useCallback(()=>{m({type:"chat/room/markAllRead"})},[]),I=u.useCallback(()=>{m({type:"chat/navigateMessagesPage"})},[]),O=e=>{_(e)};return u.createElement(p.Z,g({id:"notification","data-testid":"notifications",anchorEl:e.current,open:t},i),u.createElement(s.Z,{sx:{width:360,overflow:"hidden",userSelect:"none"}},u.createElement(C,null,u.createElement(E,null,u.createElement(d.Z,{variant:"h4"},c.formatMessage({id:"messages"}))),u.createElement(h,null,u.createElement(f,{onClick:z},u.createElement(l.zb,{icon:"ico-compose"})))),u.createElement(b,null,x?u.createElement(f,{onClick:()=>Z(!1)},u.createElement(l.zb,{icon:"ico-arrow-left"})):null,u.createElement(S,{placeholder:c.formatMessage({id:"search_people"}),value:w,onQueryChange:O,onFocus:()=>Z(!0),sx:{width:"100%"}})),u.createElement(o.l$,{autoHide:!0,autoHeight:!0,autoHeightMax:320,autoHeightMin:40},u.createElement(v,{acceptQuerySearch:!0,query:w,dataSource:M,pagingId:"pagination.messagesPopper.listRooms",canLoadMore:!0,clearDataOnUnMount:!0,gridContainerProps:{rowSpacing:.5},gridLayout:"ChatRoom - Main Card - Popper",itemLayout:"ChatRoom - Main Card - Popper",itemView:"blocked.itemView.chatroomCard",emptyPage:"core.block.no_content",emptyPageProps:{title:"no_messages",contentStyle:{sx:{marginTop:"16px"}}}})),u.createElement(P,null,u.createElement(h,null,u.createElement(y,{onClick:R},u.createElement(l.zb,{icon:"ico-check-circle-alt"}),u.createElement(d.Z,{variant:"body1"},c.formatMessage({id:"mark_all_as_read"})))),u.createElement(h,null,u.createElement(d.Z,{variant:"body1",onClick:I},c.formatMessage({id:"view_all_messages"}))))))}}}]);